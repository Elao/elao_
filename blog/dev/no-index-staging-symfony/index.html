<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Comment empêcher les moteurs de recherche d&#039;indexer votre app Symfony en staging ?</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/favicon-16x16.png">
        <link rel="manifest" href="/elao_/site.webmanifest">
        <link rel="mask-icon" href="/elao_/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Les pages de votre application n&#039;ont pas vocation à être présentes dans les moteurs de recherche ? Voici une courte explication pour vous aider à empêcher le crawl et l&#039;indexation." />
            <link rel="canonical" href="https://elao.github.io/elao_/blog/dev/no-index-staging-symfony" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Comment empêcher les moteurs de recherche d&#039;indexer votre app Symfony en staging ?" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Les pages de votre application n&#039;ont pas vocation à être présentes dans les moteurs de recherche ? Voici une courte explication pour vous aider à empêcher le crawl et l&#039;indexation." />
            <meta property="og:url" content="https://elao.github.io/elao_/blog/dev/no-index-staging-symfony" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/resized/content/images/blog/thumbnails/judging-sardine-small.jpg/142f0ee66da1c22b206f55231e4e9dbe.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Comment empêcher les moteurs de recherche d&#039;indexer votre app Symfony en staging ?">
            <meta property="twitter:description" content="Les pages de votre application n&#039;ont pas vocation à être présentes dans les moteurs de recherche ? Voici une courte explication pour vous aider à empêcher le crawl et l&#039;indexation.">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/resized/content/images/blog/thumbnails/judging-sardine-small.jpg/462423823eab7c6a166ffe9d7c10bf7e.jpg">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Comment empêcher les moteurs de recherche d'indexer votre app Symfony en staging ?",
    "image": [
        "https://elao.github.io/elao_/blog/dev/content/images/blog/thumbnails/judging-sardine-small.jpg"
    ],
    "datePublished": "2019-07-10T00:00:00+00:00",
    "dateModified": "2019-07-10T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Maxime Colin",
            "url": "https://elao.github.io/elao_/equipe/mcolin"
        },
        {
            "@type": "Person",
            "name": "Anne‑Laure de Boissieu",
            "url": "https://elao.github.io/elao_/equipe"
        }
    ],
    "keywords": [
        "Symfony",
        "Seo",
        "No index"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/build/app.e49b8e48.css">
        
                        <script src="/elao_/build/runtime.c3b9d4eb.js" defer></script><script src="/elao_/build/552.3082ae9c.js" defer></script><script src="/elao_/build/769.7dfbbe52.js" defer></script><script src="/elao_/build/app.087dc2a5.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;build&#x5C;&#x2F;see.ace7bf9f.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/">
                        <span class="screen-reader">Comment empêcher les moteurs de recherche d&#039;indexer votre app Symfony en staging ?</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/blog/dev">
                <span itemprop="name">Dev</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Comment empêcher les moteurs de recherche d&#039;indexer votre app Symfony en staging ?</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/782c29a93a891a0d31e17aba9cba81e5.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/782c29a93a891a0d31e17aba9cba81e5.jpg') 1x,
        url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/138eea77177d11afee1983317e1077a4.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/782c29a93a891a0d31e17aba9cba81e5.jpg') 1x,
        url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/138eea77177d11afee1983317e1077a4.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/782c29a93a891a0d31e17aba9cba81e5.jpg') 1x,
        url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/138eea77177d11afee1983317e1077a4.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/782c29a93a891a0d31e17aba9cba81e5.jpg') 1x,
        url('/elao_/resized/content/images/blog/headers/judging-sardine-large.jpg/138eea77177d11afee1983317e1077a4.jpg') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author article-author--multi">
                        <div class="article-author__image">
                                                            <a href="/elao_/blog/auteur/mcolin">
                                    <img     src="/elao_/resized/content/images/members/avatars/mcolin.jpg/cb69b0afe176d65ea7c1da7e712cac13.jpg"
    srcset="
        /elao_/resized/content/images/members/avatars/mcolin.jpg/cb69b0afe176d65ea7c1da7e712cac13.jpg 1x,
        /elao_/resized/content/images/members/avatars/mcolin.jpg/0899bdf7169af336de983de73d88fa58.jpg 2x
    "
 />
                                </a>
                                                            <a>
                                    <img     src="/elao_/resized/content/images/members/avatars/aldeboissieu.jpg/9d34ca0274ae2f1597c95c95d016a363.jpg"
    srcset="
        /elao_/resized/content/images/members/avatars/aldeboissieu.jpg/9d34ca0274ae2f1597c95c95d016a363.jpg 1x,
        /elao_/resized/content/images/members/avatars/aldeboissieu.jpg/325f6c6653944401a38576f9563caf5b.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/blog/auteur/mcolin">
                                    <strong>Maxime Colin</strong>
                                </a>
                                                            <a href="/elao_/blog/auteur/aldeboissieu">
                                    <strong>Anne‑Laure de Boissieu</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>10 juillet 2019</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>Comment empêcher les moteurs de recherche d&#039;indexer votre app Symfony en staging ?</h1>
                <p>Les pages de votre application n&#039;ont pas vocation à être présentes dans les moteurs de recherche ? Voici une courte explication pour vous aider à empêcher le crawl et l&#039;indexation.</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/blog/tag/symfony" rel="nofollow">#Symfony</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/blog/tag/seo" rel="nofollow">#Seo</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/blog/tag/no-index" rel="nofollow">#NoIndex</a>
                        </li>
                                    </ul>
            </div>
        </div>

                    <ol class="table-of-content" data-aos="fade-up">
                                    <li class="table-of-content__item">
                        <a href="#les-meilleures-solutions-l-authentification-cote-serveur-et-le-filtre-par-ip">Les meilleures solutions 💡: l&#039;authentification côté serveur et le filtre par IP</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#la-chose-a-ne-pas-faire-interdire-l-indexation-via-le-robots-txt">La chose à ne pas faire 🙅‍♀️ : interdire l&#039;indexation via le robots.txt</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#oups-mon-site-avec-des-urls-de-staging-a-ete-indexe">Oups, mon site avec des urls de staging a été indexé ...</a>

                                            </li>
                            </ol>
        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <p>L'indexation par les robots des moteurs de recherche des urls de staging ou de démonstration sont des cas classiques de <a href="https://www.webrankinfo.com/dossiers/conseils/horreurs-du-seo" target="_blank">#SEOHorrorStories</a>. En effet, cette situation est gênante, pour deux raisons :</p>
<ul>
<li>L'entreprise ne souhaite probablement pas exposer à ses concurrents ou aux curieux du travail en cours,</li>
<li>Le contenu relatif à l'entreprise est disponible sous plusieurs urls, induisant un fort risque de dilution de la pertinence du contenu du site "officiel", puisque celui-ci peut être proposé sur deux pages différentes (c'est ce qu'on appelle la duplication de contenu).</li>
</ul>
<p>Voyons ensemble <strong>quelques solutions pour ne pas indexer les pages publiques de nos applicatifs</strong>, si nous n'en avons pas besoin.</p>
<h2 id="les-meilleures-solutions-l-authentification-cote-serveur-et-le-filtre-par-ip" class="anchor-title"><a href="#les-meilleures-solutions-l-authentification-cote-serveur-et-le-filtre-par-ip">Les meilleures solutions 💡: l'authentification côté serveur et le filtre par IP</a></h2>
<p>Le meilleur moyen d'empêcher tout crawl des robots et visites des internautes est d'<strong>imposer une authentification côté serveur</strong>. Une autre bonne solution est de filtrer l'accès au site selon l'IP, c'est à dire qu'on autorise l'affichage que si vous y êtes autorisés.
Bien sûr, dans les deux cas, les robots ne peuvent pas accéder aux pages, empêchant de ce fait tout risque de crawl et donc d'indexation.</p>
<p>Néanmoins, ces deux solutions peuvent parfois entraîner de nombreuses contraintes, par exemple si vous utilisez différents sous-domaines pour vos assets ou pour vos apis. La recette peut alors se compliquer sur les features les plus importantes du site.</p>
<h3 id="le-plan-b-l-en-tete-de-reponse-http" class="anchor-title"><a href="#le-plan-b-l-en-tete-de-reponse-http">Le plan B 👍 : l'en-tête de réponse HTTP</a></h3>
<p>Cette <strong>instruction X-Robots-Tag indiquera aux robots de ne pas indexer la page</strong>. Attention, cette méthode ne doit pas être couplée avec une directive de disallow de l'intégralité du robots.txt, puisque les bots n'auraient jamais accès à ce tag.</p>
<p>Une des variantes est la balise meta robots noindex, <a href="https://support.google.com/webmasters/answer/93710?hl=fr" target="_blank">c'est une des solutions décrites par Google dans sa documentation officielle</a>.</p>
<h3 id="comment-parametrer-ce-tag-sur-symfony" class="anchor-title"><a href="#comment-parametrer-ce-tag-sur-symfony">Comment paramétrer ce tag sur Symfony ?</a></h3>
<p>Depuis Symfony 4.3, <a href="https://symfony.com/blog/new-in-symfony-4-3-automatic-search-engine-protection" target="_blank">une configuration</a> permet d'ajouter automatiquement le header <code class="code-inline" id="a413952fa0d6ba133500f98763c6f807">X-Robots-Tag: noindex</code> aux réponses de Symfony.</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="c3fe005ec8c78f177157f61dc8716a63"><span class="token comment"># config/packages/framework.yaml</span>
<span class="token key atrule">framework</span><span class="token punctuation">:</span>
    <span class="token key atrule">disallow_search_engine_index</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre>
<p>Néanmoins, <strong>vous ne pouvez modifier cette configuration qu'en fonction de l'environnement Symfony</strong> (<code class="code-inline" id="e77989ed21758e78331b20e477fc5582">dev</code>, <code class="code-inline" id="d6e4a9b6646c62fc48baa6dd6150d1f7">prod</code>, <code class="code-inline" id="098f6bcd4621d373cade4e832627b4f6">test</code>, ...), et non en fonction du serveur. L'idée serait d'ajouter ce header sur les serveurs de staging, demo ou recette par exemple, et de ne pas l'ajouter sur le serveur de production, peu importe l'environnement Symfony qui est utilisé.</p>
<p>Malheureusement, <strong>cette configuration ne peux pas être pilotée par une variable d'environnement</strong> car elle impacte directement le container (définition d'un listener) et Symfony ne permet pas de faire cela au runtime. Je conseille donc de ne pas utiliser cette configuration.</p>
<p>La solution est de passer par la configuration <strong>nginx</strong> ou <strong>Apache</strong> de votre serveur pour ajouter le header. Par exemple avec nginx:</p>
<pre class="code-multiline language-nginx"><code class="language-nginx" id="c5258a060d3fdfcded375136410e638d"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    ...
    <span class="token directive"><span class="token keyword">add_header</span> X-Robots-Tag <span class="token string">"noindex"</span></span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span></code></pre>
<p>Et avec Apache (sous réserve que le mod header soit activé) :</p>
<pre class="code-multiline language-apacheconf"><code class="language-apacheconf" id="3aab7872f2d2bda5de12f1086b44b205">...
<span class="token directive-inline property">SetEnv</span> X-Robots-Tag noindex
...</code></pre>
<p>Cette solution a l'avantage de fonctionner <strong>peu importe la version de Symfony, le framework ou le langage utilisé par votre application</strong>. De plus, elle ne pourra pas être désactivée lors d'un mauvais déploiement.</p>
<h2 id="la-chose-a-ne-pas-faire-interdire-l-indexation-via-le-robots-txt" class="anchor-title"><a href="#la-chose-a-ne-pas-faire-interdire-l-indexation-via-le-robots-txt">La chose à ne pas faire 🙅‍♀️ : interdire l'indexation via le robots.txt</a></h2>
<p>Grâce à la directive <code class="code-inline" id="948f1aaceb85fb33069817d3d356b762">disallow</code>, on pense pouvoir empêcher les robots de visiter et d'indexer les pages de notre site. Mais ce n'est pas tout à fait l'objectif de <code class="code-inline" id="948f1aaceb85fb33069817d3d356b762">disallow</code>, <strong>qui n'empêche pas l'indexation mais le crawl</strong>. Résultat : vous pouvez retrouver des pages indexées dans les moteurs de recherche, même si le robot ne remonte ni meta description, ni title. Vous pouvez ainsi lire le fameux message :</p>
<p><code class="code-inline" id="cb147c23623a83dc80765e1d812833b6">A description for this result is not available because of this sites's robots.txt</code></p>
<p>De plus, il n'est pas rare de trouver en production des fichiers <code class="code-inline" id="aa2646a667ee1cd83235786dccef4a26">robots.txt</code> paramétrés pour le staging, car ils auraient été oubliés lors de la mise en production 🙀.</p>
<p>Bon à savoir : la directive Noindex, qui était rarement utilisée, <a href="https://webmasters.googleblog.com/2019/07/a-note-on-unsupported-rules-in-robotstxt.html" target="_blank">a été officiellement abandonnée par Google</a>.</p>
<h2 id="oups-mon-site-avec-des-urls-de-staging-a-ete-indexe" class="anchor-title"><a href="#oups-mon-site-avec-des-urls-de-staging-a-ete-indexe">Oups, mon site avec des urls de staging a été indexé ...</a></h2>
<p>Faites le nécessaire pour empêcher les futures visites de robots. Vous pouvez ensuite utiliser <a href="https://www.google.com/webmasters/tools/removals" target="_blank">l'outil de suppression d'URL de la Search Console</a>, et demander la suppression des URLs problématiques.</p>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a href="/elao_/blog/auteur/mcolin">
                                <img     src="/elao_/resized/content/images/members/avatars/mcolin.jpg/cb69b0afe176d65ea7c1da7e712cac13.jpg"
    srcset="
        /elao_/resized/content/images/members/avatars/mcolin.jpg/cb69b0afe176d65ea7c1da7e712cac13.jpg 1x,
        /elao_/resized/content/images/members/avatars/mcolin.jpg/0899bdf7169af336de983de73d88fa58.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a href="/elao_/blog/auteur/mcolin">
                                <strong>Maxime Colin</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                            <a
                                    href="https://twitter.com/colin_maxime"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--x" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte Twitter de Maxime Colin</span>
                                </a>
                                                                                        <a
                                    href="https://bsky.app/profile/maximecolin.bsky.social"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--bluesky" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte Bluesky de Maxime Colin</span>
                                </a>
                                                                                        <a
                                    href="https://github.com/maximecolin"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Maxime Colin</span>
                                </a>
                                                                                        <a href="https://www.maximecolin.fr/"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--website" aria-hidden="true"></i>
                                    <span class="screen-reader">Site personnel de Maxime Colin</span>
                                </a>
                                                    </div>
                    </div>
                                    <div class="article-author">
                        <div class="article-author__image">
                            <a>
                                <img     src="/elao_/resized/content/images/members/avatars/aldeboissieu.jpg/9d34ca0274ae2f1597c95c95d016a363.jpg"
    srcset="
        /elao_/resized/content/images/members/avatars/aldeboissieu.jpg/9d34ca0274ae2f1597c95c95d016a363.jpg 1x,
        /elao_/resized/content/images/members/avatars/aldeboissieu.jpg/325f6c6653944401a38576f9563caf5b.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Co-écrit par
                            <a>
                                <strong>Anne‑Laure de Boissieu</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                                                                                    <a
                                    href="https://github.com/al2b"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Anne‑Laure de Boissieu</span>
                                </a>
                                                                                        <a href="https://mixitconf.org/"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--website" aria-hidden="true"></i>
                                    <span class="screen-reader">Site personnel de Anne‑Laure de Boissieu</span>
                                </a>
                                                    </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/master/content/blog/dev/no-index-staging-symfony.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                                                <a href="/elao_/recrutement">
                            Nous recrutons
                                                            <span class="bullet">1</span>
                                                    </a>
                    </li>
                    <li>
                        <a href="/elao_/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                    <li>
                        <a href="https://bsky.app/profile/elao.com" target="_blank">
                            <i class="icon icon--bluesky"></i>
                            Bluesky
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            X
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2025 - ELAO - Tous droits réservés</span>
            <a href="/elao_/legal">Mentions légales</a>
            <a href="/elao_/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
