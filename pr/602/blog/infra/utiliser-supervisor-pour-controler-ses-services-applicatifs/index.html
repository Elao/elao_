<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Controller ses services applicatifs avec supervisor</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/602/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/602/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/602/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/602/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/602/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/602/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/602/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Supervisor est un système de contrôle des processus/services applicatifs destiné aux systèmes de types UNIX." />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/602/blog/infra/utiliser-supervisor-pour-controler-ses-services-applicatifs" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Controller ses services applicatifs avec supervisor" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Supervisor est un système de contrôle des processus/services applicatifs destiné aux systèmes de types UNIX." />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/602/blog/infra/utiliser-supervisor-pour-controler-ses-services-applicatifs" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/feea06c1542ba2277877572e5c75ab3f.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Controller ses services applicatifs avec supervisor">
            <meta property="twitter:description" content="Supervisor est un système de contrôle des processus/services applicatifs destiné aux systèmes de types UNIX.">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/c0a8e88d6d2a7414e4a745bc90acf9b3.jpg">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/pr/602/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Controller ses services applicatifs avec supervisor",
    "image": [
        "https://elao.github.io/elao_/pr/602/blog/infra/content/images/blog/thumbnails/ice_bulb.jpg"
    ],
    "datePublished": "2014-12-22T00:00:00+00:00",
    "dateModified": "2014-12-22T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Guewen Faivre",
            "url": "https://elao.github.io/elao_/pr/602/equipe/gfaivre"
        }
    ],
    "keywords": [
        "Services",
        "Infra",
        "Linux",
        "Debian",
        "Supervisor"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/602/build/app.2a1fdda4.css">
        
                        <script src="/elao_/pr/602/build/runtime.97d4aae0.js" defer></script><script src="/elao_/pr/602/build/552.3082ae9c.js" defer></script><script src="/elao_/pr/602/build/769.7dfbbe52.js" defer></script><script src="/elao_/pr/602/build/app.d906f729.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;602&#x5C;&#x2F;build&#x5C;&#x2F;see.ace7bf9f.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;602&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;602&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;602&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;602&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/602/">
                        <span class="screen-reader">Controller ses services applicatifs avec supervisor</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/602/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/602/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/602/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/602/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/602/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/pr/602/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/602/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/pr/602/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/602/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/602/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/602/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/602/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/602/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/pr/602/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/pr/602/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/602/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/602/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/602/blog/infra">
                <span itemprop="name">Infra</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Controller ses services applicatifs avec supervisor</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/f148051f866cf404da10d0d9121a2928.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/f148051f866cf404da10d0d9121a2928.jpg') 1x,
        url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/fcc904a0c0549733d5fa5b03dd38531b.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/f148051f866cf404da10d0d9121a2928.jpg') 1x,
        url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/fcc904a0c0549733d5fa5b03dd38531b.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/f148051f866cf404da10d0d9121a2928.jpg') 1x,
        url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/fcc904a0c0549733d5fa5b03dd38531b.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/f148051f866cf404da10d0d9121a2928.jpg') 1x,
        url('/elao_/pr/602/%2E%2E/../resized/content/images/blog/thumbnails/ice_bulb.jpg/fcc904a0c0549733d5fa5b03dd38531b.jpg') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author ">
                        <div class="article-author__image">
                                                            <a href="/elao_/pr/602/blog/auteur/gfaivre">
                                    <img     src="/elao_/pr/602/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/0b15d32360625605c83c974bf168637b.jpg"
    srcset="
        /elao_/pr/602/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/0b15d32360625605c83c974bf168637b.jpg 1x,
        /elao_/pr/602/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/f804161347eed9c67c0f2c20a4f1fc65.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/pr/602/blog/auteur/gfaivre">
                                    <strong>Guewen Faivre</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>22 décembre 2014</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>Controller ses services applicatifs avec supervisor</h1>
                <p>Supervisor est un système de contrôle des processus/services applicatifs destiné aux systèmes de types UNIX.</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/602/blog/tag/services" rel="nofollow">#Services</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/602/blog/tag/infra" rel="nofollow">#Infra</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/602/blog/tag/linux" rel="nofollow">#Linux</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/602/blog/tag/debian" rel="nofollow">#Debian</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/602/blog/tag/supervisor" rel="nofollow">#Supervisor</a>
                        </li>
                                    </ul>
            </div>
        </div>

                    <ol class="table-of-content" data-aos="fade-up">
                                    <li class="table-of-content__item">
                        <a href="#introduction">Introduction</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#supervisord">Supervisord</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#supervisorctl">Supervisorctl</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#utiliser-supervisor">Utiliser supervisor</a>

                                            </li>
                            </ol>
        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <p>Bonjour à tous,</p>
<p>Aujourd'hui nous allons faire le tour d'une solution fort sympathique que nous utilisons @elao pour faire tourner certains services applicatifs.</p>
<p>Son petit nom ? <a href="http://supervisord.org/" target="_blank"><strong>Supervisor</strong></a>.</p>
<h2 id="introduction" class="anchor-title"><a href="#introduction">Introduction</a></h2>
<p>Supervisor est un petit outil codé en Python et permettant d'assurer le suivi et le contrôle de services/processus applicatifs sur des systèmes de type UNIX.</p>
<p>On peut le comparer à launchd (utilisé par OSX) ou <a href="http://smarden.org/runit/" target="_blank"><strong>runit</strong></a>. Attention toutefois il n'est pas destiné à remplacer le process init des systèmes UNIX. Il est par contre le parfait allié pour lancer et suivre des services applicatifs liés à un projet et qui doivent être démarrés et disponibles en permanence.</p>
<p>On peut notamment penser à des services NodeJS ou autres.</p>
<p>Supervisor est disponible en paquet Debian en version 3.0, l'installation est donc très facile :</p>
<pre class="code-multiline language-bash"><code class="language-bash" id="a47b359ccd7dcf8a0f9ebaf1023ffb84"><span class="token function">apt-get</span> <span class="token function">install</span> supervisor</code></pre>
<p>Supervisor est divisé en deux composants différents.</p>
<h2 id="supervisord" class="anchor-title"><a href="#supervisord">Supervisord</a></h2>
<p>Supervisord est la partie qui a la responsabilité de démarrer les services configurés et de les redémarrer en cas de crash.
Il est configurable via le fichier <code class="code-inline" id="53585b857fac1155a055cfb706951271">/etc/supervisor/supervisord.conf</code></p>
<h2 id="supervisorctl" class="anchor-title"><a href="#supervisorctl">Supervisorctl</a></h2>
<p><strong>Supervisorctl</strong> est le client permettant d'administrer les services gérés par supervisor. Il est capable de se connecter à plusieurs démons <strong>supervisord</strong>  et permet de démarrer / arrêter des services. Il est possible de les faire fonctionner soit via une socket soit via TCP. Il est également possible de gérer une authentification lors de la connexion au démon.</p>
<h2 id="utiliser-supervisor" class="anchor-title"><a href="#utiliser-supervisor">Utiliser supervisor</a></h2>
<h3 id="ajouter-un-service-a-supervisor" class="anchor-title"><a href="#ajouter-un-service-a-supervisor">Ajouter un service à Supervisor</a></h3>
<p>Pour ajouter un service à supervisor il suffit de le déclarer en ajoutant un fichier dans <code class="code-inline" id="35dd810a7ec81a0bcfadd24ef5eb125f">/etc/supervisor/conf.d</code>.</p>
<p>Attention celui-ci doit se terminer par l'extension <code class="code-inline" id="a2b11a8323f2bacebd54851aea409219">.conf</code> pour être correctement pris en compte par le démon.</p>
<pre class="code-multiline language-bash"><code class="language-bash" id="f2217f03b1b5f1dba9b87ab670009370"><span class="token punctuation">[</span>program:blogd<span class="token punctuation">]</span>
<span class="token assign-left variable">command</span><span class="token operator">=</span>node node_modules/bin/blogd

<span class="token assign-left variable">directory</span><span class="token operator">=</span>/srv/my_project

<span class="token assign-left variable">autostart</span><span class="token operator">=</span>true
<span class="token assign-left variable">autorestart</span><span class="token operator">=</span>true
<span class="token assign-left variable">startretries</span><span class="token operator">=</span><span class="token number">20</span>
<span class="token assign-left variable">numprocs</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">stdout_logfile</span><span class="token operator">=</span>/var/log/blogd.log
<span class="token assign-left variable">redirect_stderr</span><span class="token operator">=</span>true</code></pre>
<p>Après redémarrage de supervisor (<code class="code-inline" id="5da9f0106c3ef53be3458314b5d0c56d">/etc/init.d/supervisor restart</code>) nous pouvons ensuite vérifier le bon fonctionnement du/des service(s) via le client :</p>
<pre class="code-multiline language-bash"><code class="language-bash" id="534d42e3b4580903a065afd854ceab27">elao@bismuth:/etc/supervisor/conf.d<span class="token operator">|</span>
⇒  supervisorctl
mailcatcher                      RUNNING    pid <span class="token number">7840</span>, <span class="token function">uptime</span> <span class="token number">2</span> days, <span class="token number">4</span>:51:46
phantomjs                        RUNNING    pid <span class="token number">7842</span>, <span class="token function">uptime</span> <span class="token number">2</span> days, <span class="token number">4</span>:51:46
blogd                            RUNNING    pid <span class="token number">11929</span>, <span class="token function">uptime</span> <span class="token number">0</span>:02:41</code></pre>
<h3 id="redemarrer-un-service" class="anchor-title"><a href="#redemarrer-un-service">Redémarrer un service</a></h3>
<p>La syntaxe pour redémarrer un service est on ne peut plus simple.</p>
<pre class="code-multiline language-bash"><code class="language-bash" id="5d2352073b3e1618a3c7fdbfb1a7cc59">supervisor<span class="token operator">&gt;</span> restart blogd
blogd: stopped
blogd: started</code></pre>
<h3 id="parcourir-les-logs-depuis-le-client" class="anchor-title"><a href="#parcourir-les-logs-depuis-le-client">Parcourir les logs depuis le client</a></h3>
<pre class="code-multiline language-bash"><code class="language-bash" id="2de32c7d087c790fc8680459b1236603">supervisor<span class="token operator">&gt;</span> <span class="token function">tail</span> <span class="token parameter variable">-f</span> blogd
<span class="token operator">==</span><span class="token operator">&gt;</span> Press Ctrl-C to <span class="token builtin class-name">exit</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>
var/blog/content/blog/images/ <span class="token operator">=</span><span class="token operator">&gt;</span> web/blog/medias
<span class="token punctuation">[</span>ASSETS<span class="token punctuation">]</span> Copying folders succeed
Assets copied
Listening on <span class="token number">127.0</span>.0.1:5555
Config: /srv/site/silex/package.json
Backup <span class="token function">file</span> var/blog/current.json not found or unreadable
Loading fresh content
Refreshing data from <span class="token builtin class-name">source</span>
Loading posts<span class="token punctuation">..</span>.
Loading users<span class="token punctuation">..</span>.
Loading tags<span class="token punctuation">..</span>.
Checking data<span class="token punctuation">..</span>.
Data checked status success
Copying assets
<span class="token punctuation">[</span>ASSETS<span class="token punctuation">]</span> from var/blog/content/blog/images/ <span class="token operator">=</span><span class="token operator">&gt;</span> web/blog/medias
<span class="token punctuation">[</span>ASSETS<span class="token punctuation">]</span> Copying folders succeed
Assets copied
Listening on <span class="token number">127.0</span>.0.1:5555</code></pre>
<h3 id="activer-l-interface-web" class="anchor-title"><a href="#activer-l-interface-web">Activer l'interface web</a></h3>
<p>Pour finir supervisor fournit également une interface web qui est activable via la section <code class="code-inline" id="9b27884b577f2c1581c4dddcdd09920e">[inet_http_server]</code> et qui permet de gérer les services de la même façon que le client en console.</p>
<img src="/elao_/pr/602/%2E%2E/../resized/content/images/blog/2014/supervisor_web.png/60383f926f4b57350b2be67804be9ed4.png" alt="Supervisor - Interface web supervisor" title="Supervisor - Interface web supervisor" srcset="/elao_/pr/602/%2E%2E/../resized/content/images/blog/2014/supervisor_web.png/60383f926f4b57350b2be67804be9ed4.png 1x,
/elao_/pr/602/%2E%2E/../resized/content/images/blog/2014/supervisor_web.png/7dfcc7380776c2f1cdd6987822ea8115.png 2x," id="supervisor-interface-web-supervisor">
<p>Il suffit de créer un nouveau fichier dans <code class="code-inline" id="35dd810a7ec81a0bcfadd24ef5eb125f">/etc/supervisor/conf.d</code> s'appelant par exemple <code class="code-inline" id="9942e7a7112d0f92178c8b313160b9a9">inet_http_server.conf</code> et d'y recopier le contenu suivant :</p>
<pre class="code-multiline language-bash"><code class="language-bash" id="d81d62cf7611c17ecd48f05ac6f87e31"><span class="token punctuation">[</span>inet_http_server<span class="token punctuation">]</span>
port      <span class="token operator">=</span> :9001
username  <span class="token operator">=</span> elao
password  <span class="token operator">=</span> boumbo</code></pre>
<p>Si vous ne souhaitez pas d'authentification il suffit de supprimer les deux lignes correspondantes.</p>
<p>Remarques, commentaires et corrections sont les bienvenus comme toujours, n'hésitez pas à proposer vos <a href="https://github.com/Elao/blog" target="_blank"><strong>PR</strong></a>.</p>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a href="/elao_/pr/602/blog/auteur/gfaivre">
                                <img     src="/elao_/pr/602/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/0b15d32360625605c83c974bf168637b.jpg"
    srcset="
        /elao_/pr/602/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/0b15d32360625605c83c974bf168637b.jpg 1x,
        /elao_/pr/602/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/f804161347eed9c67c0f2c20a4f1fc65.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a href="/elao_/pr/602/blog/auteur/gfaivre">
                                <strong>Guewen Faivre</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                            <a href="https://twitter.com/guewen_faivre" class="social social--small">
                                    <i class="icon icon--x" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte Twitter de Guewen Faivre</span>
                                </a>
                                                                                        <a href="https://github.com/gfaivre " class="social social--small">
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Guewen Faivre</span>
                                </a>
                                                                                        <a href="http://www.elao.com" class="social social--small">
                                    <i class="icon icon--website" aria-hidden="true"></i>
                                    <span class="screen-reader">Site personnel de Guewen Faivre</span>
                                </a>
                                                    </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/rdo-ddd/content/blog/infra/utiliser-supervisor-pour-controler-ses-services-applicatifs.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/602/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/602/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/602/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/602/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/602/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/602/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/602/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                                                <a href="/elao_/pr/602/recrutement">
                            Nous recrutons
                                                            <span class="bullet">2</span>
                                                    </a>
                    </li>
                    <li>
                        <a href="/elao_/pr/602/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/602/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            Twitter
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/mycompany/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/pr/602/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2024 - ELAO - Tous droits réservés</span>
            <a href="/elao_/pr/602/legal">Mentions légales</a>
            <a href="/elao_/pr/602/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
