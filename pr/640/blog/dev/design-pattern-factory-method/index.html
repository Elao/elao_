<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Le Design Pattern &#039;Factory Method&#039;</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/640/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/640/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/640/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/640/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/640/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/640/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/640/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Premier article d&#039;une série consacrée aux Design Patterns. Aujourd&#039;hui : le pattern Factory Method" />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/640/blog/dev/design-pattern-factory-method" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Le Design Pattern &#039;Factory Method&#039;" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Premier article d&#039;une série consacrée aux Design Patterns. Aujourd&#039;hui : le pattern Factory Method" />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/640/blog/dev/design-pattern-factory-method" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/pr/640/%2E%2E/../resized/content/images/blog/thumbnails/scientist.jpg/8f14830081a18495b6b15bf4c9c62c44.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Le Design Pattern &#039;Factory Method&#039;">
            <meta property="twitter:description" content="Premier article d&#039;une série consacrée aux Design Patterns. Aujourd&#039;hui : le pattern Factory Method">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/640/%2E%2E/../resized/content/images/blog/thumbnails/scientist.jpg/71622eada56b0d8799443ad1d4f37f2a.jpg">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/pr/640/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Le Design Pattern 'Factory Method'",
    "image": [
        "https://elao.github.io/elao_/pr/640/blog/dev/content/images/blog/thumbnails/scientist.jpg"
    ],
    "datePublished": "2017-04-10T00:00:00+00:00",
    "dateModified": "2017-04-10T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Xavier R",
            "url": "https://elao.github.io/elao_/pr/640/equipe/xavierr"
        }
    ],
    "keywords": [
        "Design pattern",
        "Conception"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/640/build/app.e6f27b98.css">
        
                        <script src="/elao_/pr/640/build/runtime.1d68fa54.js" defer></script><script src="/elao_/pr/640/build/552.3082ae9c.js" defer></script><script src="/elao_/pr/640/build/769.7dfbbe52.js" defer></script><script src="/elao_/pr/640/build/app.d906f729.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;640&#x5C;&#x2F;build&#x5C;&#x2F;see.ace7bf9f.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;640&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;640&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;640&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;640&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/640/">
                        <span class="screen-reader">Le Design Pattern &#039;Factory Method&#039;</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/640/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/640/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/640/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/640/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/640/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/pr/640/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/640/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/pr/640/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/640/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/640/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/640/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/640/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/640/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/pr/640/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/pr/640/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/640/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/640/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/640/blog/dev">
                <span itemprop="name">Dev</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Le Design Pattern &#039;Factory Method&#039;</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/62541d5b42b0c2460f9cca869539998b.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/62541d5b42b0c2460f9cca869539998b.jpg') 1x,
        url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/baf7fc01088c3ea04ca4b8bf7e06a2d5.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/62541d5b42b0c2460f9cca869539998b.jpg') 1x,
        url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/baf7fc01088c3ea04ca4b8bf7e06a2d5.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/62541d5b42b0c2460f9cca869539998b.jpg') 1x,
        url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/baf7fc01088c3ea04ca4b8bf7e06a2d5.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/62541d5b42b0c2460f9cca869539998b.jpg') 1x,
        url('/elao_/pr/640/%2E%2E/../resized/content/images/blog/headers/scientist.jpg/baf7fc01088c3ea04ca4b8bf7e06a2d5.jpg') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author ">
                        <div class="article-author__image">
                                                            <a href="/elao_/pr/640/blog/auteur/xavierr">
                                    <img     src="/elao_/pr/640/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg"
    srcset="
        /elao_/pr/640/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg 1x,
        /elao_/pr/640/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/483510c48265ecfc9142de1a8a2bc614.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/pr/640/blog/auteur/xavierr">
                                    <strong>Xavier R</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>10 avril 2017</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>Le Design Pattern &#039;Factory Method&#039;</h1>
                <p>Premier article d&#039;une série consacrée aux Design Patterns. Aujourd&#039;hui : le pattern Factory Method</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/640/blog/tag/design-pattern" rel="nofollow">#DesignPattern</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/640/blog/tag/conception" rel="nofollow">#Conception</a>
                        </li>
                                    </ul>
            </div>
        </div>

                    <ol class="table-of-content" data-aos="fade-up">
                                    <li class="table-of-content__item">
                        <a href="#quelques-reperes-bibliographiques-en-guise-de-preambule">Quelques repères bibliographiques en guise de préambule</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#ceci-n-est-pas-une-pipe">Ceci n&#039;est pas une pipe</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#notre-premier-dp-la-factory-method">Notre premier DP : la Factory Method</a>

                                            </li>
                            </ol>
        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <h2 id="quelques-reperes-bibliographiques-en-guise-de-preambule" class="anchor-title"><a href="#quelques-reperes-bibliographiques-en-guise-de-preambule">Quelques repères bibliographiques en guise de préambule</a></h2>
<p>Avant d'entrer dans le vif du sujet en abordant notre premier Design Pattern, permettez-moi de citer deux ouvrages incontournables lorsque l'on évoque ce sujet.</p>
<figure>
    <img src="/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/biblio-dp-elements-of-reusable.jpeg/a4cd2bb87a4ad278b50e536503593d10.jpeg" alt="Design Patterns: Elements of Reusable Object-Oriented Software" srcset="/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/biblio-dp-elements-of-reusable.jpeg/a4cd2bb87a4ad278b50e536503593d10.jpeg 1x,
/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/biblio-dp-elements-of-reusable.jpeg/55c0612c057bd7819cbf41ef5cc86a59.jpeg 2x," id="design-patterns-elements-of-reusable-object-oriented-software">
    <figcaption>
      <span class="figure__legend">Design Patterns: Elements of Reusable Object-Oriented Software</span>
    </figcaption>
</figure>
<p>En effet, difficile d'entamer une série d'articles consacrés aux Design Patterns sans faire référence à la bible en la matière : <em>Design Patterns: Elements of Reusable Object-Oriented Software</em>. Ce livre publié en 1994 par quatre développeurs, Gamma, Helm, Johnson et Vlissides, plus connus sous le nom du <em>Gang of Four</em>, recense 23 Design Patterns classés en trois catégories :</p>
<ul>
<li>les Design Patterns de création</li>
<li>les Design Patterns comportementaux (<em>Behavior</em>)</li>
<li>les Design Patterns structurels</li>
</ul>
<p>Le Design Pattern que nous allons étudier aujourd'hui (<em>Factory Method</em>) appartient à la première catégorie.</p>
<p>Bien qu'écrit il y a plus de vingt ans, ce livre fait toujours autorité et c'est à lui qu'il faut se référer lorsque l'on souhaite connaître l'anatomie d'un Pattern ou éviter les quiproquos au sein d'une équipe de développeurs. Il n'est pas forcément d'une lecture agréable et s'apparente plus à un annuaire ou un dictionnaire : le lire peut s'avérer rébarbatif, mais il est indispensable de le garder à portée de main pour y trouver les informations dont on a besoin.</p>
<p>Je ne m'étendrai pas sur la définition exacte d'un Design Pattern, ni sur le formalisme à adopter pour présenter un pattern (le livre le fait très bien), ni sur les principes qui sous-tendent une bonne conception objet (comme l'acronyme SOLID par exemple) car nous aurons l'occasion d'y revenir au moment d'aborder certains patterns.</p>
<p>On peut déplorer que la plupart des exemples du livre s'appuient sur le langage <strong>Smalltalk</strong> qui est tombé en désuétude (mais notez tout de même que ce langage fut pionnier dans bien des domaines !) ... <strong>Java</strong> pourrait sembler aujourd'hui plus adapté et/ou fédérateur pour un ouvrage consacré à la conception objet, mais lors de la première édition du livre (1994), la première version de Java n'existait pas encore ...</p>
<figure>
    <img src="/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/biblio-dp-head-first.jpeg/8fb2154ceaf2862443018a216d111d1d.jpeg" alt="Head First Design Patterns" srcset="/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/biblio-dp-head-first.jpeg/8fb2154ceaf2862443018a216d111d1d.jpeg 1x,
/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/biblio-dp-head-first.jpeg/0e0f7f5f34f35c88282fa91972fcd77c.jpeg 2x," id="head-first-design-patterns">
    <figcaption>
      <span class="figure__legend">Head First Design Patterns</span>
    </figcaption>
</figure>
<p>Complément idéal à la bible des Design Patterns, <em>Head First Design Patterns</em> (O'Reilly 2004) constitue une excellente introduction aux principaux design patterns. Par rapport au premier ouvrage, il adopte une démarche résolument pratique et recourt à un éventail remarquable de techniques pédagogiques pour aborder les design patterns (traits d'humour, schémas explicatifs, dialogues fictifs en situation autour des différents patterns, démarches didactiques, etc.). Apprendre les design patterns peut s'avérer fastidieux, mais rien de tout ça ici ! Je recommande particulièrement cet ouvrage si vous souhaitez vous initier aux design patterns sans drame ... Par ailleurs, la plupart des exemples s'appuient sur le langage Java, beaucoup plus abordable et actuel que Smalltalk.</p>
<p>Enfin, je ne peux passer sous silence deux autres ouvrages qui me paraissent fondamentaux s'agissant de conception objet, à savoir <em>Domain-Driven Design: Tackling Complexity in the Heart of Software</em> d'Eric Evans (livre pas forcément très digeste mais dont on ne peut pas ignorer l'influence) et <em>Catalog of Patterns of Enterprise Application Architecture</em> de Martin Fowler : qu'est-ce qui définit exactement une entité ? un value object ? un repository ? etc. Nous avons tous une vague idée de ces concepts mais c'est dans cet ouvrage que se trouvent les réponses à ces questions.</p>
<h2 id="ceci-n-est-pas-une-pipe" class="anchor-title"><a href="#ceci-n-est-pas-une-pipe">Ceci n'est pas une pipe</a></h2>
<p>Après un préambule assez verbeux j'en conviens, laissez-moi à présent vous gratifier d'une remarque liminaire : cet article est avant tout destiné à présenter le Design Pattern <em>Factory Method</em>, alors précisons d'emblée que ce qui suit n'est pas un pattern (et encore moins une pipe, mais ça, c'est un autre débat ...) :</p>
<pre class="code-multiline language-php"><code class="language-php" id="315d8d3b287d59fb542aa5c41628a45a"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token keyword">class</span> <span class="token class-name-definition class-name">MyFactory</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">getInstance</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token variable">$type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token string double-quoted-string">"a"</span><span class="token punctuation">:</span>
                    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string double-quoted-string">"b"</span><span class="token punctuation">:</span>
                    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token comment">/* etc. */</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></span></code></pre>
<p>Ne me faites pas dire ce que je n'ai pas dit ... Je ne prétends pas du tout que le code ci-dessus relève d'une mauvaise conception. Ni que cette classe n'est pas une <em>factory</em>. Simplement, si l'on se réfère à la définition exacte du pattern <code class="code-inline" id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code>, on s'apercevra que l'on n'est pas en présence d'un pattern.</p>
<p>Pour autant, cela ne signifie pas que ce code mérite l'anathème, loin de là. J'évoquais tout à l'heure les principes d'une bonne conception objet, et parmi les bonnes pratiques, il est préconisé d'isoler ce qui varie (<em>encapsulate what varies</em>). Or c'est exactement ce que fait cette classe : elle isole en son sein un pan de code qui repose sur un embranchement (<em>switch</em>) pour retourner un objet. De ce point de vue, ce code est parfaitement valide.</p>
<p>Noter que cette bonne pratique objet qui consiste à isoler ce qui varie est mentionnée parmi d'autres dans le livre <em>Head First Design Pattern</em>. Citons-en quelques-unes :</p>
<ul>
<li>favoriser la composition plutôt que l'héritage (citée également par le <em>Gang of Four</em>)</li>
<li>programmer pour des interfaces plutôt que pour des implémentations (<em>idem</em>)</li>
<li>s'efforcer de limiter le couplage entre les objets qui collaborent (<em>strive for loosely couple designs between objects that interact</em>)</li>
<li>les classes devraient être ouvertes à l'extension mais fermées à la modification</li>
<li>etc.</li>
</ul>
<p>Mais nous aurons l'occasion d'y revenir ...</p>
<h2 id="notre-premier-dp-la-factory-method" class="anchor-title"><a href="#notre-premier-dp-la-factory-method">Notre premier DP : la Factory Method</a></h2>
<h3 id="introduction" class="anchor-title"><a href="#introduction">Introduction</a></h3>
<p>Les principes d'une bonne conception objet recommandent de programmer pour des interfaces plutôt que des implémentations (c'est au demeurant un principe qui s'accommode très bien avec celui de l'injection de dépendance). Concrètement, cela consiste par exemple à privilégier des méthodes de classes qui acceptent en arguments des interfaces (ou classes abstraites) plutôt que des classes concrètes. Cela étant, même si l'on programme pour des interfaces, nous devons nécessairement nous résoudre à instancier des objets concrets pour que notre application s'exécute. Et c'est là qu'entrent en scène les design patterns de création, et notamment les deux Design patterns de <em>Factory</em> identifiés par le <em>Gang of Four</em>, à savoir la <code class="code-inline" id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code> et l'<code class="code-inline" id="3266b075d74acc656ed95e166300fd26">Abstract Factory</code>.</p>
<p>Pour l'heure, intéressons-nous au premier de ces deux patterns de <em>Factory</em>.</p>
<h3 id="classification" class="anchor-title"><a href="#classification">Classification</a></h3>
<p>La <code class="code-inline" id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code> est classée dans la catégorie des <strong>Design Patterns de création</strong>.</p>
<h3 id="definition" class="anchor-title"><a href="#definition">Définition</a></h3>
<blockquote>
<p>Define an interface for creating an object, but let subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses</p>
</blockquote>
<p>Cette définition peut paraître assez obscure à première vue, mais croyez-moi, le pattern est d'une affligeante simplicité.</p>
<h3 id="schema" class="anchor-title"><a href="#schema">Schéma</a></h3>
<figure>
    <img src="/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/creation-factory-method.jpg/2b2f706547d54a386036f24da48a6a5a.jpg" alt="Le Design Pattern 'Factory Method'" srcset="/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/creation-factory-method.jpg/2b2f706547d54a386036f24da48a6a5a.jpg 1x,
/elao_/pr/640/%2E%2E/../resized/content/images/blog/design-pattern/creation-factory-method.jpg/e2d69aa4c7c3120988f7b3f38f459c01.jpg 2x," id="le-design-pattern-factory-method">
    <figcaption>
      <span class="figure__legend">Schéma du Design Pattern 'Factory Method'</span>
    </figcaption>
</figure>
<h3 id="participants" class="anchor-title"><a href="#participants">Participants</a></h3>
<p>On distingue sur le schéma ci-dessus les participants suivants :</p>
<ul>
<li>Le créateur : classe concrète ou abstraite notamment chargée de <em>fabriquer</em> l'objet attendu</li>
<li>Le créateur concret : il étend <em>Creator</em> et instancie l'objet attendu</li>
<li>Le produit : c'est l'interface de l'objet à instancier</li>
<li>Le produit concret : c'est l'objet à instancier</li>
</ul>
<h3 id="expose-de-la-problematique" class="anchor-title"><a href="#expose-de-la-problematique">Exposé de la problématique</a></h3>
<pre class="code-multiline language-php"><code class="language-php" id="438c1fddeeed1ec109f41d0f90008f5e"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token keyword">class</span> <span class="token class-name-definition class-name">OrderHandler</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">orderProduct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$qty</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Product</span> <span class="token punctuation">{</span>
            <span class="token variable">$orderedProduct</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$orderedProduct</span><span class="token operator">-&gt;</span><span class="token function">setOrder</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$orderedProduct</span><span class="token operator">-&gt;</span><span class="token function">setQty</span><span class="token punctuation">(</span><span class="token variable">$qty</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// etc.</span>

            <span class="token keyword">return</span> <span class="token variable">$orderedProduct</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></span></code></pre>
<p>La classe <code class="code-inline" id="f454b76d1cda09695d0fe30bb3447acd">OrderHandler</code> contient notamment une méthode <code class="code-inline" id="4452382afcfa03da536e0f17ebe42d6d">orderProduct</code> qui retourne un produit commandé après l'avoir instancié. Par rapport à notre schéma ci-dessus, <code class="code-inline" id="f454b76d1cda09695d0fe30bb3447acd">OrderHandler</code> correspondrait au <code class="code-inline" id="ef1d00d8a237a1bbe431e1091f5715fb">Creator</code> tandis que <code class="code-inline" id="deb10517653c255364175796ace3553f">Product</code> correspondrait à <code class="code-inline" id="87570424120ece0aa466a2ac89cd6d69">ConcreteProduct</code>.</p>
<p>Nous pouvons craindre que cette classe <code class="code-inline" id="f454b76d1cda09695d0fe30bb3447acd">OrderHandler</code> et la classe concrète <code class="code-inline" id="deb10517653c255364175796ace3553f">Product</code> soient trop étroitement liées. En effet, que se passe-t-il si nous devons gérer d'autres types de produits (des produits matériels, mais aussi des prestations de services par exemple) ? Dans son état actuel, la classe <code class="code-inline" id="f454b76d1cda09695d0fe30bb3447acd">OrderHandler</code> nous lie trop fortement à la classe <code class="code-inline" id="deb10517653c255364175796ace3553f">Product</code>. Nous avons notamment enfreint plusieurs recommandations :</p>
<ul>
<li>notre classe n'est pas ouverte à l'extension,</li>
<li>nous n'avons pas développé pour des interfaces,</li>
<li>nous avons créé un couplage très fort (trop fort ?) entre nos deux classes.</li>
</ul>
<p>Il est possible qu'en l'état actuel de l'application, ce code fasse parfaitement l'affaire. Mais il est préférable de rendre son code ouvert aux évolutions, et c'est particulièrement vrai lorsque l'on développe des services destinés à être consommés par des tiers (librairie <em>open source</em> par exemple) ou bien des classes métiers dont les spécifications sont susceptibles d'évoluer fréquemment.</p>
<h3 id="le-design-pattern-factory-method-a-la-rescousse" class="anchor-title"><a href="#le-design-pattern-factory-method-a-la-rescousse">Le design pattern Factory Method à la rescousse</a></h3>
<p>Nous allons à présent modifier notre classe <code class="code-inline" id="f454b76d1cda09695d0fe30bb3447acd">OrderHandler</code> pour nous rapprocher du pattern :</p>
<pre class="code-multiline language-php"><code class="language-php" id="21e2b1250e9a91bef21ab903fc656839"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token keyword">class</span> <span class="token class-name-definition class-name">OrderHandler</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">orderProduct</span><span class="token punctuation">(</span>
            <span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">,</span>
            <span class="token keyword type-hint">int</span> <span class="token variable">$qty</span> <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">OrderableInterface</span> <span class="token punctuation">{</span>
            <span class="token variable">$orderedProduct</span> <span class="token operator">=</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$orderedProduct</span><span class="token operator">-&gt;</span><span class="token function">setOrder</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$orderedProduct</span><span class="token operator">-&gt;</span><span class="token function">setQty</span><span class="token punctuation">(</span><span class="token variable">$qty</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// etc.</span>

            <span class="token keyword">return</span> <span class="token variable">$orderedProduct</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Product</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></span></code></pre>
<p>Les modifications apportées consistent à :</p>
<ul>
<li>introduire une interface <code class="code-inline" id="b1e2398023779dfea602f3526b414d59">OrderableInterface</code> qu'implémente désormais <code class="code-inline" id="deb10517653c255364175796ace3553f">Product</code></li>
<li>déporter dans une méthode dédiée (<code class="code-inline" id="1c43c67bab8db278ba27b2e3d4df467e">createProduct</code>) l'instanciation d'un produit concret (<code class="code-inline" id="deb10517653c255364175796ace3553f">Product</code>)</li>
</ul>
<h3 id="commentaires" class="anchor-title"><a href="#commentaires">Commentaires</a></h3>
<p>On note tout d'abord, comme le laisse deviner la classe <code class="code-inline" id="f454b76d1cda09695d0fe30bb3447acd">OrderHandler</code>, que le pattern <code class="code-inline" id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code> est souvent implémenté par des classes dont la création de produit n'est pas la principale responsabilité ; ici <code class="code-inline" id="f454b76d1cda09695d0fe30bb3447acd">OrderHandler</code> est une classe métier qui ne se contente pas d'instancier un produit ; elle est par exemple plus riche fonctionnellement que la classe <code class="code-inline" id="df38f3fff38715f5a828cb4513ec1063">MyFactory</code> que j'avais présentée tout à l'heure.</p>
<p>En résumé, et comme son nom l'indique, le pattern <code class="code-inline" id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code> consiste tout simplement à déporter dans une méthode dédiée l'instanciation de l'objet attendu. Cette méthode se résume finalement à un simple <code class="code-inline" id="376c2c521c8fa91f7f529db30e32047a">return new Product();</code>. Concept d'une extrême simplicité mais qui nous permet d'obtenir une classe ouverte à l'extension, en permettant le cas échéant à ses enfants d'instancier un autre type.</p>
<h3 id="design-patterns-voisins" class="anchor-title"><a href="#design-patterns-voisins">Design patterns voisins</a></h3>
<p>Il existe un autre Design pattern <em>Factory</em>, plus riche que le design pattern <code class="code-inline" id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code> car il implique plus de participants (mais il n'est pas nécessairement plus compliqué pour autant) : l'<code class="code-inline" id="1c61beffe031447a2393c8e7e10a2574">Abstact Factory</code>. Il y a fort à parier qu'il fasse l'objet du prochain article de cette série consacrée aux Design Patterns.</p>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a href="/elao_/pr/640/blog/auteur/xavierr">
                                <img     src="/elao_/pr/640/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg"
    srcset="
        /elao_/pr/640/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg 1x,
        /elao_/pr/640/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/483510c48265ecfc9142de1a8a2bc614.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a href="/elao_/pr/640/blog/auteur/xavierr">
                                <strong>Xavier R</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                                                        <a href="https://github.com/xavier-rdo " class="social social--small">
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Xavier R</span>
                                </a>
                                                                                </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/team/paul-emile/content/blog/dev/design-pattern-factory-method.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/640/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/640/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/640/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/640/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/640/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/640/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/640/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                                                <a href="/elao_/pr/640/recrutement">
                            Nous recrutons
                                                            <span class="bullet">2</span>
                                                    </a>
                    </li>
                    <li>
                        <a href="/elao_/pr/640/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/640/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            Twitter
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/mycompany/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/pr/640/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2024 - ELAO - Tous droits réservés</span>
            <a href="/elao_/pr/640/legal">Mentions légales</a>
            <a href="/elao_/pr/640/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
