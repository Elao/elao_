<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Le Design Pattern &#039;Abstract Factory&#039;</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/647/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/647/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/647/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/647/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/647/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/647/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/647/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Deuxième article d&#039;une série consacrée aux Design Patterns. Aujourd&#039;hui : le pattern Abstract Factory" />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/647/blog/dev/design-pattern-abstract-factory" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Le Design Pattern &#039;Abstract Factory&#039;" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Deuxième article d&#039;une série consacrée aux Design Patterns. Aujourd&#039;hui : le pattern Abstract Factory" />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/647/blog/dev/design-pattern-abstract-factory" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/pr/647/%2E%2E/../resized/content/images/blog/thumbnails/schema.jpg/8b7e5dd293761b29bfd19aa5e19cbeeb.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Le Design Pattern &#039;Abstract Factory&#039;">
            <meta property="twitter:description" content="Deuxième article d&#039;une série consacrée aux Design Patterns. Aujourd&#039;hui : le pattern Abstract Factory">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/647/%2E%2E/../resized/content/images/blog/thumbnails/schema.jpg/473759bee3158e1243dd06ee3132f279.jpg">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/pr/647/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Le Design Pattern 'Abstract Factory'",
    "image": [
        "https://elao.github.io/elao_/pr/647/blog/dev/content/images/blog/thumbnails/schema.jpg"
    ],
    "datePublished": "2017-04-11T00:00:00+00:00",
    "dateModified": "2017-04-11T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Xavier R",
            "url": "https://elao.github.io/elao_/pr/647/equipe/xavierr"
        }
    ],
    "keywords": [
        "Design pattern",
        "Conception"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/647/build/app.290ceeb1.css">
        
                        <script src="/elao_/pr/647/build/runtime.a9b2d3ee.js" defer></script><script src="/elao_/pr/647/build/552.3082ae9c.js" defer></script><script src="/elao_/pr/647/build/769.7dfbbe52.js" defer></script><script src="/elao_/pr/647/build/app.d906f729.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;647&#x5C;&#x2F;build&#x5C;&#x2F;see.ace7bf9f.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;647&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;647&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;647&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;647&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/647/">
                        <span class="screen-reader">Le Design Pattern &#039;Abstract Factory&#039;</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/647/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/647/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/647/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/647/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/647/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/pr/647/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/647/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/pr/647/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/647/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/647/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/647/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/647/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/647/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/pr/647/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/pr/647/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/647/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/647/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/647/blog/dev">
                <span itemprop="name">Dev</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Le Design Pattern &#039;Abstract Factory&#039;</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/17055338ea2d7b295fefc8063b6a47e3.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/17055338ea2d7b295fefc8063b6a47e3.jpg') 1x,
        url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/a13e160ed10e1f37057bfdc09c071941.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/17055338ea2d7b295fefc8063b6a47e3.jpg') 1x,
        url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/a13e160ed10e1f37057bfdc09c071941.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/17055338ea2d7b295fefc8063b6a47e3.jpg') 1x,
        url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/a13e160ed10e1f37057bfdc09c071941.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/17055338ea2d7b295fefc8063b6a47e3.jpg') 1x,
        url('/elao_/pr/647/%2E%2E/../resized/content/images/blog/headers/header_schema.jpg/a13e160ed10e1f37057bfdc09c071941.jpg') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author ">
                        <div class="article-author__image">
                                                            <a href="/elao_/pr/647/blog/auteur/xavierr">
                                    <img     src="/elao_/pr/647/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg"
    srcset="
        /elao_/pr/647/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg 1x,
        /elao_/pr/647/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/483510c48265ecfc9142de1a8a2bc614.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/pr/647/blog/auteur/xavierr">
                                    <strong>Xavier R</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>11 avril 2017</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>Le Design Pattern &#039;Abstract Factory&#039;</h1>
                <p>Deuxième article d&#039;une série consacrée aux Design Patterns. Aujourd&#039;hui : le pattern Abstract Factory</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/647/blog/tag/design-pattern" rel="nofollow">#DesignPattern</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/647/blog/tag/conception" rel="nofollow">#Conception</a>
                        </li>
                                    </ul>
            </div>
        </div>

                    <ol class="table-of-content" data-aos="fade-up">
                                    <li class="table-of-content__item">
                        <a href="#classification">Classification</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#definition">Définition</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#schema-du-design-pattern-abstract-factory">Schéma du design pattern Abstract Factory</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#exemple-de-problemes-familiaux">Exemple de problèmes familiaux ...</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#resolution-de-la-problematique-a-l-aide-du-dp-abstractfactory">Résolution de la problématique à l&#039;aide du DP AbstractFactory</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#explication-de-la-solution">Explication de la solution</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#conclusion">Conclusion</a>

                                            </li>
                            </ol>
        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <p>Deuxième article d'une série consacrée aux Design Patterns. Aujourd'hui, le pattern <code class="code-inline" id="65e83a834deb2a41513d933cb5fa5570">AbstractFactory</code> où il sera question de produits, de familles et de fabriques (<em>factories</em>, au pluriel s'il vous plaît).</p>
<table width="100%">
    <tr>
        <td>
            <figure>
                <img src="/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/img/ingals-family.jpeg/c0eb17a66273d1618046e8cd5569d4e4.jpeg" alt="Une gentille famille américaine" srcset="/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/img/ingals-family.jpeg/c0eb17a66273d1618046e8cd5569d4e4.jpeg 1x,
/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/img/ingals-family.jpeg/93c1778e10895ea00eae143cbcd68941.jpeg 2x," id="une-gentille-famille-americaine">
                <figcaption style="text-align: center;font-style: italic;">Une gentille famille américaine</figcaption>
            </figure>
        </td>
        <td>
            <figure>
                <img src="/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/img/chainsaw-family.jpeg/c43e84514f660dced29ea68674451fef.jpeg" alt="Une famille américaine" srcset="/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/img/chainsaw-family.jpeg/c43e84514f660dced29ea68674451fef.jpeg 1x,
/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/img/chainsaw-family.jpeg/e1b5c307efacf205cca744b7017df17f.jpeg 2x," id="une-famille-americaine">
                <figcaption style="text-align: center;font-style: italic;">Une <strike>gentille</strike> famille américaine</figcaption>
            </figure>
        </td>
    </tr>
</table>
<div class="admonition info">
<p>
    Le livre <strong><strong>Head First Design Patterns</strong></strong> (<a href="/elao_/pr/647/../design-pattern-factory-method.md">dont j'ai déjà vanté les mérites</a>) regroupe les deux patterns <code id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code> et <code id="65e83a834deb2a41513d933cb5fa5570">AbstractFactory</code> dans un même chapitre consultable en ligne et intitulé <a href="https://www.safaribooksonline.com/library/view/head-first-design/0596007124/ch04.html" target="_blank">The Factory Pattern: Baking with OO Goodness</a>. Je ne saurais trop vous encourager à le consulter !
</p>
</div>
<h2 id="classification" class="anchor-title"><a href="#classification">Classification</a></h2>
<p>Le pattern <code class="code-inline" id="3266b075d74acc656ed95e166300fd26">Abstract Factory</code> est classé dans la catégorie des <strong>Design Patterns de création</strong>.</p>
<h2 id="definition" class="anchor-title"><a href="#definition">Définition</a></h2>
<blockquote>
<p>Provide an interface for creating families of related or dependent objects without specifying their concrete classes.</p>
</blockquote>
<p>C'est une très jolie définition dont je ne me lasse pas ... (Comme toute définition, elle paraît assez barbare tant que l'on n'a pas approfondi le concept, ce que je vous propose de faire dans les paragraphes qui suivent).</p>
<p>En résumé, le pattern <code class="code-inline" id="3266b075d74acc656ed95e166300fd26">Abstract Factory</code> va nous permettre d'instancier des familles de produits dépendant les uns des autres sans qu'il soit nécessaire de préciser leur type concret (je ne suis pas sûr qu'on soit plus avancé ...)</p>
<h2 id="schema-du-design-pattern-abstract-factory" class="anchor-title"><a href="#schema-du-design-pattern-abstract-factory">Schéma du design pattern Abstract Factory</a></h2>
<img src="/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/creation-abstract-factory.png/e0a161574064b703e835e7b9cc5dbf2f.png" alt="Le Design Pattern 'Abstract Factory'" title="Le Design Pattern 'Abstract Factory'" srcset="/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/creation-abstract-factory.png/e0a161574064b703e835e7b9cc5dbf2f.png 1x,
/elao_/pr/647/%2E%2E/../resized/content/images/blog/design-pattern/creation-abstract-factory.png/8db39480e0f4baae389b9eaef9c68dac.png 2x," id="le-design-pattern-abstract-factory">
<p>Ne vous laissez pas impressionner par la densité du schéma et le nombre de participants. Le pattern n'a rien d'insurmontable et peut s'avérer utile dans de nombreuses situations.</p>
<p>Pour l'heure, et pour y voir un peu plus clair, je vous suggère de diviser mentalement le schéma en deux :</p>
<ul>
<li>à gauche figurent les fabriques</li>
<li>à droite les produits à instancier</li>
</ul>
<p>Les produits appartiennent à une famille. Sur ce schéma le produit A1 et le produit B1 appartiennent à la même famille et sont donc destinés à collaborer ensemble. Le produit A2 et le produit B2 appartiennent à une autre famille et sont également conçus pour collaborer ensemble. En revanche, A1 et B2 ne peuvent pas fonctionner ensemble. Il est donc important d'instancier des produits qui sont compatibles (autrement dit, qui appartiennent à la même famille) et c'est là qu'interviennent les fabriques abstraites.</p>
<p>Je suis sûr qu'au cours de votre carrière de développeur vous avez été amenés à modéliser des contraintes métiers énoncées peu ou prou ainsi : "<em>si mon produit est une instance de A, alors c'est mon service A qui le gère ; si mon produit est une instance de B, alors c'est mon service B qui le gère</em>". Ne cherchez pas plus loin, c'est justement à ce genre de problématique que répond le pattern <code class="code-inline" id="3266b075d74acc656ed95e166300fd26">Abstract Factory</code>.</p>
<h2 id="exemple-de-problemes-familiaux" class="anchor-title"><a href="#exemple-de-problemes-familiaux">Exemple de problèmes familiaux ...</a></h2>
<p>J'ai développé une extension Chrome qui permet de présenter des statistiques structurées à partir du détail d'un commit sur Github : nom du projet, nom de l'auteur, liste des fichiers concernés par les modifications, nombre de lignes supprimées, nombre de lignes ajoutées, etc.</p>
<p>Pour ce faire, j'ai développé une librairie qui contient deux classes qui analysent le contenu HTML d'une page Github et en extraient les données pertinentes :</p>
<ul>
<li>la première classe <code class="code-inline" id="6b5e652c03489366972d52d5aa3ce2a6">GithubCrawler</code> parse le DOM (cette classe connaît les chemins XPATH qui permettent d'extraire les données brutes au format HTML)</li>
<li>la seconde classe <code class="code-inline" id="8f962f457dd44b50ac847fd857dcc106">GithubParser</code> sait parser les données brutes retournées par mon crawler pour en extraire les données épurées (débarrassées des tags HTML notamment) et les structurer</li>
</ul>
<p>Mon client est aux anges et souhaite donc étendre ce fonctionnel aux projets hébergés sur Gitlab (vous la voyez arriver la nouvelle <code class="code-inline" id="ed81c0311eb5364a8d6d1d1b63f3c51d">famille</code> ?). Bien évidemment, la structure HTML des pages Gitlab est complètement différente des pages Github, et mon parser Github est tout à fait incapable de comprendre les données retournées par mon crawler Gitlab ... La contrainte est donc la suivante : si mon crawler est un crawler Github, alors je dois utiliser le parser Github ; si mon crawler est un crawler Gitlab, alors je dois utiliser le parser Gitlab. Et mon client ne compte pas s'arrêter là, il souhaite bien évidemment aussi gérer les pages Bitbucket ...</p>
<h2 id="resolution-de-la-problematique-a-l-aide-du-dp-abstractfactory" class="anchor-title"><a href="#resolution-de-la-problematique-a-l-aide-du-dp-abstractfactory">Résolution de la problématique à l'aide du DP AbstractFactory</a></h2>
<p>Vous l'aurez sans doute deviné, nous nous trouvons en présence de trois familles de produits différentes : la famille des produits Github, la famille des produits Gitlab et la famille des produits Bickbucket. Dans chacune de ces familles, on retrouve un produit <code class="code-inline" id="820d17d3f859f4391cce177be0c93fde">Crawler</code> et un produit <code class="code-inline" id="9a83ab0d60fed7c37d928ccb30d1b6ae">Parser</code> conçus pour collaborer ensemble.</p>
<p>Comment garantir que j'utilise des produits d'une même famille ? Réponse : le pattern <strong>Abstract Factory</strong>. Ce qui nous donne le récapitulatif suivant :</p>
<table>
    <tr>
        <th> </th>
        <th>Github</th>
        <th>Gitlab</th>
        <th>BitBucket</th>
    </tr>
    <tr>
        <td>SCMCrawlerInterface:</td>
        <td colspan="3">
            <pre class="code-multiline language-php"><code class="language-php" id="a89c4bdd1cdd5f381f2f8cd1d8c61b85"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getProjectNameHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getSummaryHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getCommittedFilesHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
        </td>
    </tr>
    <tr>
        <td> </td>
        <td>GithubCrawler</td>
        <td>GitlabCrawler</td>
        <td>BitBucketCrawler</td>
    </tr>
    <tr>
        <td>SCMParserInterface:</td>
        <td colspan="3">
            <pre class="code-multiline language-php"><code class="language-php" id="c1512041f08ef2e667b7106a08e464b4"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">parseProjectName</span><span class="token punctuation">(</span><span class="token variable">$projectNameHtml</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">parseSummary</span><span class="token punctuation">(</span><span class="token variable">$summaryHtml</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">parseCommittedFiles</span><span class="token punctuation">(</span><span class="token variable">$committedFilesHtml</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
        </td>
    </tr>
    <tr>
        <td> </td>
        <td>GithubParser</td>
        <td>GitlabParser</td>
        <td>BitBucketParser</td>
    </tr>
    <tr>
        <td>SCMFactoryInterface</td>
        <td colspan="3">
            <pre class="code-multiline language-php"><code class="language-php" id="5b01ec97eafb2f26f34465c8998965e9"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
        </td>
    </tr>
    <tr>
        <td> </td>
        <td>GithubFactory</td>
        <td>GitlabFactory</td>
        <td>BitBucketFactory</td>
    </tr>
</table>
<h2 id="explication-de-la-solution" class="anchor-title"><a href="#explication-de-la-solution">Explication de la solution</a></h2>
<ul>
<li>j'ai introduit une interface <code class="code-inline" id="4e989432907405ee26f3acdc4c264fec">SCMCrawlerInterface</code> qu'implémentent les crawlers de chaque famille</li>
<li>j'ai également introduit une interface <code class="code-inline" id="34efd9deaba24759cc10f3cde8fee46d">SCMParserInterface</code> pour les parsers</li>
<li>j'ai créé une fabrique (<em>Factory</em>) pour chaque famille :
<ul>
<li>chaque fabrique implémente l'interface <code class="code-inline" id="78ac5e0ad827ce4a09d8d60a5515bfb8">SCMFactoryInterface</code></li>
<li>nous implémentons autant de fabriques concrètes que de familles</li>
<li>l'interface d'une fabrique expose autant de méthodes de création qu'il y a de produits dans une famille</li>
</ul></li>
</ul>
<p>Voici à titre d'exemple le code de la fabrique <code class="code-inline" id="5e7d2048a6b87680ad0b18e6e85f9789">GithubFactory</code> (je vous épargne le code des deux autres fabriques):</p>
<pre class="code-multiline language-php"><code class="language-php" id="8e6c53d0aa62ee99dbe0adbcf59513ac"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">GithubFactory</span> <span class="token keyword">implements</span> <span class="token class-name">SCMFactoryInterface</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">SCMCrawlerInterface</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">GithubCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">SCMParserInterface</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">GithubParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p>A présent, en fonction du contexte dans lequel nous nous trouvons (Github, Gitlab ou Bitbucket), il suffit d'instancier la bonne fabrique et d'appeler respectivement ses méthodes <code class="code-inline" id="21032d9bb7147d3eb07317f164890745">getCrawler</code> et <code class="code-inline" id="a08d072aa7ede5db0cf15d484998c5d7">getParser</code> pour obtenir les bons services adaptés au contexte courant. C'est au final la fabrique qui est garante de la compatibilité des produits qui collaborent.</p>
<p>Autre avantage de cette solution : la résolution des services à instancier selon le contexte se fait une seule fois, il suffit d'instancier la bonne fabrique (nous n'avons pas à résoudre l'instanciation du bon crawler dans un premier temps, puis du bon parser dans un second temps).</p>
<p>Grâce à ce pattern, l'ajout d'une nouvelle famille de produits peut également se faire assez aisément (un nouveau SCM à gérer), tout comme l'ajout d'un nouveau produit dans chaque famille (on pourrait envisager d'implémenter un Renderer spécialisé dans chaque famille, chargé de l'affichage des données obtenues, par exemple).</p>
<h2 id="conclusion" class="anchor-title"><a href="#conclusion">Conclusion</a></h2>
<p>Parce que ce sont tous deux des patterns de fabrique, on confond souvent la <code class="code-inline" id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code> et le pattern <code class="code-inline" id="3266b075d74acc656ed95e166300fd26">Abstract Factory</code>. Voici donc un résumé de ces deux patterns en mettant l'accent sur ce qui les différencie :</p>
<ul>
<li><code class="code-inline" id="d021d5f9d4069111c20ea6ad534fd22c">Factory Method</code> : <code class="code-inline" id="22af645d1859cb5ca6da0c484f1f37ea">new</code> déporté dans une méthode dédiée, un seul type d'objet retourné à la fois (une seule méthode d'instanciation par Factory)</li>
<li><code class="code-inline" id="3266b075d74acc656ed95e166300fd26">Abstract Factory</code> : famille de produits liés fonctionnellement, plusieurs fabriques, plusieurs types d'objets retournés par chaque fabrique (plusieurs méthodes d'instanciation par Factory)</li>
</ul>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a href="/elao_/pr/647/blog/auteur/xavierr">
                                <img     src="/elao_/pr/647/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg"
    srcset="
        /elao_/pr/647/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg 1x,
        /elao_/pr/647/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/483510c48265ecfc9142de1a8a2bc614.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a href="/elao_/pr/647/blog/auteur/xavierr">
                                <strong>Xavier R</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                                                        <a href="https://github.com/xavier-rdo " class="social social--small">
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Xavier R</span>
                                </a>
                                                                                </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/accompagnement-alternants/ep-3/content/blog/dev/design-pattern-abstract-factory.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/647/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/647/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/647/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/647/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/647/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/647/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/647/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                                                <a href="/elao_/pr/647/recrutement">
                            Nous recrutons
                                                            <span class="bullet">2</span>
                                                    </a>
                    </li>
                    <li>
                        <a href="/elao_/pr/647/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/647/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            Twitter
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/mycompany/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/pr/647/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2024 - ELAO - Tous droits réservés</span>
            <a href="/elao_/pr/647/legal">Mentions légales</a>
            <a href="/elao_/pr/647/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
