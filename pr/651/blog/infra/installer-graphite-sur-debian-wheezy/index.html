<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Installer graphite sur Debian Wheezy</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/651/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/651/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/651/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/651/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/651/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/651/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/651/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Installation de graphite avec Gunicorn et Nginx sur debian Wheezy." />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/651/blog/infra/installer-graphite-sur-debian-wheezy" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Installer graphite sur Debian Wheezy" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Installation de graphite avec Gunicorn et Nginx sur debian Wheezy." />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/651/blog/infra/installer-graphite-sur-debian-wheezy" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/871588bcadd1c6da53fb6cebf443a42c.png">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Installer graphite sur Debian Wheezy">
            <meta property="twitter:description" content="Installation de graphite avec Gunicorn et Nginx sur debian Wheezy.">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/a28c0f08e7b7826845f708608d952c6f.png">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/pr/651/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Installer graphite sur Debian Wheezy",
    "image": [
        "https://elao.github.io/elao_/pr/651/blog/infra/content/images/blog/thumbnails/dashboard.png"
    ],
    "datePublished": "2014-12-20T00:00:00+00:00",
    "dateModified": "2014-12-20T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Guewen Faivre",
            "url": "https://elao.github.io/elao_/pr/651/equipe/gfaivre"
        }
    ],
    "keywords": [
        "Monitoring",
        "Infra",
        "Linux",
        "Debian",
        "Nginx"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/651/build/app.36e31d3a.css">
        
                        <script src="/elao_/pr/651/build/runtime.4f991585.js" defer></script><script src="/elao_/pr/651/build/552.3082ae9c.js" defer></script><script src="/elao_/pr/651/build/769.7dfbbe52.js" defer></script><script src="/elao_/pr/651/build/app.087dc2a5.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;651&#x5C;&#x2F;build&#x5C;&#x2F;see.ace7bf9f.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;651&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;651&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;651&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;651&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/651/">
                        <span class="screen-reader">Installer graphite sur Debian Wheezy</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/651/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/651/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/651/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/651/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/651/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/pr/651/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/651/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/pr/651/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/651/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/651/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/651/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/651/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/651/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/pr/651/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/pr/651/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/651/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/651/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/651/blog/infra">
                <span itemprop="name">Infra</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Installer graphite sur Debian Wheezy</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/f895dcbd36c71680634cc5a972a6e9a4.png');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/f895dcbd36c71680634cc5a972a6e9a4.png') 1x,
        url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/4232576225ac6a9e7f7e88c46bdf4920.png') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/f895dcbd36c71680634cc5a972a6e9a4.png') 1x,
        url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/4232576225ac6a9e7f7e88c46bdf4920.png') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/f895dcbd36c71680634cc5a972a6e9a4.png') 1x,
        url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/4232576225ac6a9e7f7e88c46bdf4920.png') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/f895dcbd36c71680634cc5a972a6e9a4.png') 1x,
        url('/elao_/pr/651/%2E%2E/../resized/content/images/blog/thumbnails/dashboard.png/4232576225ac6a9e7f7e88c46bdf4920.png') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author ">
                        <div class="article-author__image">
                                                            <a href="/elao_/pr/651/blog/auteur/gfaivre">
                                    <img     src="/elao_/pr/651/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/0b15d32360625605c83c974bf168637b.jpg"
    srcset="
        /elao_/pr/651/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/0b15d32360625605c83c974bf168637b.jpg 1x,
        /elao_/pr/651/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/f804161347eed9c67c0f2c20a4f1fc65.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/pr/651/blog/auteur/gfaivre">
                                    <strong>Guewen Faivre</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>20 décembre 2014</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>Installer graphite sur Debian Wheezy</h1>
                <p>Installation de graphite avec Gunicorn et Nginx sur debian Wheezy.</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/651/blog/tag/monitoring" rel="nofollow">#Monitoring</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/651/blog/tag/infra" rel="nofollow">#Infra</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/651/blog/tag/linux" rel="nofollow">#Linux</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/651/blog/tag/debian" rel="nofollow">#Debian</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/651/blog/tag/nginx" rel="nofollow">#Nginx</a>
                        </li>
                                    </ul>
            </div>
        </div>

                    <ol class="table-of-content" data-aos="fade-up">
                                    <li class="table-of-content__item">
                        <a href="#installation-des-paquets">Installation des paquets</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#installation-de-l-environnement-python">Installation de l&#039;environnement Python</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#installer-cairo">Installer Cairo</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#installer-carbon">Installer Carbon</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#installer-graphite-web">Installer Graphite Web</a>

                                            </li>
                            </ol>
        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <p>Parmi de nombreuses solutions de monitoring l'une d'entre elle fait pas mal parler d'elle en ce moment. <a href="http://graphite.wikidot.com/" target="_blank"><strong>Graphite</strong></a> se veut capable de rendre des graphiques en temps réel de l'état de vos plateformes (systèmes ou applicatives) à partir d'informations collectées sur l'ensemble de votre infra.</p>
<p>Que l'on soit bien d'accord nous ne sommes pas dans le même type de monitoring que peut fournir, par exemple des solutions comme <a href="http://www.zabbix.com/" target="_blank"><strong>Zabbix</strong></a>, qui proposeront, certes, des graphs à partir des différentes ressources "monitorées" mais également des solutions permettant d'alerter les équipes Infra en cas de problèmes (par Email ou par SMS).</p>
<p><u><strong>Graphite est aujourd'hui séparés en plusieurs composants:</strong></u></p>
<ul>
<li><a href="https://github.com/graphite-project/carbon" target="_blank"><strong>Carbon</strong></a>, qui est en charge de recevoir les métriques qui lui sont envoyés via le réseau et de les stocker en utilisant l'un des "storage backend" qui lui est fourni. Il sera bientôt remplacé par <a href="https://github.com/graphite-project/ceres" target="_blank"><strong>Ceres</strong></a> (Nom de code MegaCarbon).</li>
<li><a href="https://github.com/graphite-project/whisper" target="_blank"><strong>Whisper</strong></a> est en charge du stockage des informations, c'est une TSDB (Time Serie Database), en bon français une base de données fichiers permettant de stocker des métriques horodatés.</li>
<li><a href="https://github.com/graphite-project/graphite-web" target="_blank"><strong>Graphite-web</strong></a> qui fourni une interface permettant de créer des graphiques à partir des données collectées par Carbon et Whisper.</li>
</ul>
<p>Nous verrons au cours de ce tutoriel la mise en place d'une stack de monitoring basée sur ces différents composants.</p>
<h2 id="installation-des-paquets" class="anchor-title"><a href="#installation-des-paquets">Installation des paquets</a></h2>
<p>Nous allons, dans un premier temps, avoir besoin des paquets suivants (Les versions utilisées pour la réalisation de cet article sont spécifiées):</p>
<ul>
<li>nginx (1.6.2)</li>
<li>python-dev (2.7.3-4+deb7u1)</li>
<li>python-pip (1.1.3)</li>
<li>memcached (1.4.13-0.2+deb7u1)</li>
<li>libcairo2-dev (1.12.2-3)</li>
<li>pkg-config (0.26-1)</li>
<li>libyaml-dev (0.1.4-2+deb7u5)</li>
</ul>
<p><em>Attention  l'installation de la version 1.6.2 de Nginx nécessite <strong><a href="/elao_/pr/651/blog/infra/utiliser-les-depots-officiels-nginx-sur-debian-wheezy">d'utiliser les dépôts officiels Nginx</a></strong> et non pas ceux de Debian dans lesquels Nginx est fourni en version 1.2.1.</em></p>
<pre class="code-multiline"><code id="1a66362b9bc088062556f4ba758d0169">apt-get install nginx python-dev python-pip memcached  libcairo2-dev pkg-config git libyaml-dev</code></pre>
<h2 id="installation-de-l-environnement-python" class="anchor-title"><a href="#installation-de-l-environnement-python">Installation de l'environnement Python</a></h2>
<p>Graphite web exploitant le Framework Django et diverses autres librairies python nous allons les installer:</p>
<pre class="code-multiline"><code id="58ca34589445f306dec8629327e0edb0">pip install django==1.5 &amp;&amp;
pip install twisted==11.0.0 &amp;&amp;
pip install python-memcached==1.47 &amp;&amp;
pip install txAMQP==0.4 &amp;&amp;
pip install django-tagging==0.3.2 &amp;&amp;
pip install gunicorn==19.1.1 &amp;&amp;
pip install git+git://github.com/graphite-project/whisper.git#egg=whisper==0.9.12 &amp;&amp;
pip install PyYAML==3.11</code></pre>
<h2 id="installer-cairo" class="anchor-title"><a href="#installer-cairo">Installer Cairo</a></h2>
<p><a href="http://cairographics.org/pycairo/" target="_blank"><strong>Cairo</strong></a> est utilisé pour les rendus par Graphite.</p>
<pre class="code-multiline"><code id="3f57ee72fcee68ab2d9a4e1f7d52491e">cd /tmp &amp;&amp;
wget http://cairographics.org/releases/py2cairo-1.8.10.tar.gz &amp;&amp;
tar xfz py2cairo-1.8.10.tar.gz &amp;&amp;
cd pycairo-1.8.10 &amp;&amp;
./configure &amp;&amp;
make &amp;&amp;
make install</code></pre>
<h2 id="installer-carbon" class="anchor-title"><a href="#installer-carbon">Installer Carbon</a></h2>
<p>Pour commencer nous allons installer Carbon en suivant les étapes suivants:</p>
<pre class="code-multiline"><code id="95cc26170805eb57d2a2db055e1a1580">cd /tmp &amp;&amp; git clone https://github.com/graphite-project/carbon.git &amp;&amp;
cd carbon &amp;&amp;
python setup.py install</code></pre>
<p>Le chemin d'installation par défaut est <code class="code-inline" id="8f2568933fd552e97e39c97ac1e84e06">/opt/graphite</code> il est bien sur possible de personnaliser cette installation.</p>
<h3 id="personnaliser-l-installation-de-carbon" class="anchor-title"><a href="#personnaliser-l-installation-de-carbon">Personnaliser l'installation de Carbon</a></h3>
<p>Si les paramètre d'installation par défaut de Carbon ne vous conviennent pas vous pouvez les modifier avec les options suivantes:</p>
<ul>
<li>
<p><code class="code-inline" id="49d984adc876f8e2cb3158f445cdcae3">--prefix</code> Qui va correspondre au chemin d'installation des répertoire bin/ et conf/ (pour rappel par défaut ils sont installés  dans <code class="code-inline" id="8f2568933fd552e97e39c97ac1e84e06">/opt/graphite</code>)</p>
</li>
<li>
<p><code class="code-inline" id="c9f1ec5725726c71de2c3cc8f1437fd5">--install-lib</code> Qui correspondra à l'installation des modules et librairies python. (Par défaut <code class="code-inline" id="4910e6ae452154158b2ecbb60a06cabc">/opt/graphite/lib</code>)</p>
</li>
<li>
<p><code class="code-inline" id="d08ce536d8dc99525de6eb88baa5d824">--install-data</code> Qui correspondra à l'emplacement où seront placés les répertoires <code class="code-inline" id="ddecebdea58b5f264d27f1f7909bab74">storage</code> et <code class="code-inline" id="3a8e4c06e471595f6eb262bb9b5582d9">conf</code> ( Il est égal par défaut à la valeur de <code class="code-inline" id="851f5ac9941d720844d143ed9cfcf60a">prefix</code>)</p>
</li>
<li>
<p><code class="code-inline" id="93d749ff6dd1980e9f116bb479388726">--install-scripts</code> Qui correspondra à l'emplacement ou sont stockés les scripts (Par défaut dans <code class="code-inline" id="c1111bd512b29e821b120b86446026b8">bin</code> relativement à <code class="code-inline" id="851f5ac9941d720844d143ed9cfcf60a">prefix</code>)</p>
</li>
</ul>
<p>Si l'on souhaite tout installer dans /srv/graphite</p>
<p><code class="code-inline" id="a5861e93f9a41db7501595d3a874f321">python setup.py install --prefix=/srv/graphite --install-lib=/srv/graphite/webapp</code></p>
<p>Si vous souhaitez donc coller un maximum au shema type des système Linux on peut donc imaginer quelque chose comme:</p>
<p><code class="code-inline" id="c01554a7070e00951a41b513932b7fd3">python setup.py install --install-scripts=/usr/bin --install-lib=/usr/lib/python2.7/site-packages --install-data=/var/lib/graphite</code></p>
<p>Attention la version de python dépendra de votre configuration !</p>
<h3 id="automatiser-le-demarrage-de-carbon" class="anchor-title"><a href="#automatiser-le-demarrage-de-carbon">Automatiser le démarrage de Carbon</a></h3>
<p>Les scripts init.d fournis avec Carbon fonctionnent mais sont prévus pour RedHat et vont renvoyer une erreur (sans gravité mais qui peut toujours laisser planner un doute), vous trouverez donc ci-après les scripts init.d pour Debian pour chacun des services Carbon (<a href="https://gist.github.com/gfaivre/9cbc5d38bc3ce8586fdf/download" target="_blank"><strong>carbon-aggregator</strong></a>, <a href="https://gist.github.com/gfaivre/09a4870ef6fc429c0bb0/download" target="_blank"><strong>carbon-cache</strong></a>, <a href="https://gist.github.com/gfaivre/090098bae3e8238fd7c6/download" target="_blank"><strong>carbon-relay</strong></a>) en attendant que notre PR soit acceptée.</p>
<p>Ces scripts sont, bien entendu, à placer dans <code class="code-inline" id="4e285fd03830581d75d447185ef1f39c">/etc/init/d</code> il suffit ensuite de jouer ce <a href="https://gist.github.com/gfaivre/9c9f3bb6eafd6514d57b/download" target="_blank"><strong>script</strong></a> afin de les configurer.</p>
<h2 id="installer-graphite-web" class="anchor-title"><a href="#installer-graphite-web">Installer Graphite Web</a></h2>
<p>Graphite web est la partie permettant de créer des graphiques à partir des métriques stockés par Carbon.</p>
<pre class="code-multiline"><code id="69fece0e9230c06caa9f18b388c36e8d">cd /tmp &amp;&amp; git clone https://github.com/graphite-project/graphite-web.git &amp;&amp;
cd graphite-web &amp;&amp;
python setup.py install</code></pre>
<p>Comme pour Carbon le chemin d'installation est par défaut <code class="code-inline" id="8f2568933fd552e97e39c97ac1e84e06">/opt/graphite</code> il est également possible de personnaliser cette installation.</p>
<h3 id="personnaliser-l-installation-de-graphite-web" class="anchor-title"><a href="#personnaliser-l-installation-de-graphite-web">Personnaliser l'installation de Graphite Web</a></h3>
<p>Il est tout à fait possible, comme pour Carbon, de personnaliser notre installation de Graphite web:</p>
<ul>
<li><code class="code-inline" id="49d984adc876f8e2cb3158f445cdcae3">--prefix</code> Qui va correspondre au chemin d'installation des répertoire bin/ et conf/ (pour rappel par défaut ils sont installés  dans <code class="code-inline" id="8f2568933fd552e97e39c97ac1e84e06">/opt/graphite</code>)</li>
<li><code class="code-inline" id="c9f1ec5725726c71de2c3cc8f1437fd5">--install-lib</code> Qui correspondra à l'installation des modules et librairies python. (Par défaut <code class="code-inline" id="4910e6ae452154158b2ecbb60a06cabc">/opt/graphite/lib</code>)</li>
<li><code class="code-inline" id="d08ce536d8dc99525de6eb88baa5d824">--install-data</code> Qui correspondra à l'emplacement où seront placés les répertoires <code class="code-inline" id="ddecebdea58b5f264d27f1f7909bab74">storage</code> et <code class="code-inline" id="3a8e4c06e471595f6eb262bb9b5582d9">conf</code> ( Il est égal par défaut à la valeur de <code class="code-inline" id="851f5ac9941d720844d143ed9cfcf60a">prefix</code>)</li>
<li><code class="code-inline" id="93d749ff6dd1980e9f116bb479388726">--install-scripts</code> Qui correspondra à l'emplacement ou sont stockés les scripts (Par défaut dans <code class="code-inline" id="c1111bd512b29e821b120b86446026b8">bin</code> relativement à <code class="code-inline" id="851f5ac9941d720844d143ed9cfcf60a">prefix</code>)</li>
</ul>
<p>Si l'on souhaite tout installer dans /srv/graphite</p>
<p><code class="code-inline" id="a5861e93f9a41db7501595d3a874f321">python setup.py install --prefix=/srv/graphite --install-lib=/srv/graphite/webapp</code></p>
<p>Si vous souhaitez donc coller un maximum au schema type des système Linux on peut donc imaginer quelque chose comme:</p>
<p><code class="code-inline" id="c01554a7070e00951a41b513932b7fd3">python setup.py install --install-scripts=/usr/bin --install-lib=/usr/lib/python2.7/site-packages --install-data=/var/lib/graphite</code></p>
<p>Attention la version de python dépendra de votre configuration !</p>
<h3 id="configurer-graphite-web" class="anchor-title"><a href="#configurer-graphite-web">Configurer Graphite-web</a></h3>
<p>Recopiez et renommer le fichier <code class="code-inline" id="43806d37d1d9d0b5e81b8163cf868ab9">graphite.wsgi.example</code> que vous trouverez dans <code class="code-inline" id="01b6407b97783a76dc68dc07734f66c1">/opt/graphite/conf</code> en <code class="code-inline" id="bdeb2fc2b66e38166d56b24ab758d710">/opt/graphite/webapp/wsgi.py</code></p>
<p>Renommez ensuite le fichier <code class="code-inline" id="57f5cea5810c8d0496a5e8fbd5347fde">/opt/graphite/webapp/graphite/local_settings.py.example</code> en <code class="code-inline" id="b00f83069043fbfc221f1fd83dd8441c">local_settings.py</code>.</p>
<pre class="code-multiline"><code id="081e05ac029a402c456269c04bc989ad">cd /opt/graphite/conf &amp;&amp;
cp graphite.wsgi.example ../webapp/wsgi.py &amp;&amp;
cd ../webapp &amp;&amp;
mv /opt/graphite/webapp/graphite/local_settings.py.example  local_settings.py</code></pre>
<p>Enfin modifiez le fichier <code class="code-inline" id="1bff70c3ae873500f45e980145ae608e">/opt/graphite/webapp/graphite/settings.py</code> en remplaçant le champ <code class="code-inline" id="5a8d2d734a1352f8d113d22eabf2d1cb">SECRET_KEY</code> par une clé aléatoire de bonne longueur.</p>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a href="/elao_/pr/651/blog/auteur/gfaivre">
                                <img     src="/elao_/pr/651/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/0b15d32360625605c83c974bf168637b.jpg"
    srcset="
        /elao_/pr/651/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/0b15d32360625605c83c974bf168637b.jpg 1x,
        /elao_/pr/651/%2E%2E/../resized/content/images/members/avatars/gfaivre.jpg/f804161347eed9c67c0f2c20a4f1fc65.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a href="/elao_/pr/651/blog/auteur/gfaivre">
                                <strong>Guewen Faivre</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                            <a
                                    href="https://twitter.com/guewen_faivre"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--x" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte Twitter de Guewen Faivre</span>
                                </a>
                                                                                                                    <a
                                    href="https://github.com/gfaivre"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Guewen Faivre</span>
                                </a>
                                                                                        <a href="http://www.elao.com"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--website" aria-hidden="true"></i>
                                    <span class="screen-reader">Site personnel de Guewen Faivre</span>
                                </a>
                                                    </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/refresh/content/blog/infra/installer-graphite-sur-debian-wheezy.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/651/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/651/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/651/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/651/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/651/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/651/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/651/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                                                <a href="/elao_/pr/651/recrutement">
                            Nous recrutons
                                                            <span class="bullet">1</span>
                                                    </a>
                    </li>
                    <li>
                        <a href="/elao_/pr/651/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/651/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                    <li>
                        <a href="https://bsky.app/profile/elao.com" target="_blank">
                            <i class="icon icon--bluesky"></i>
                            Bluesky
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            X
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/pr/651/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2025 - ELAO - Tous droits réservés</span>
            <a href="/elao_/pr/651/legal">Mentions légales</a>
            <a href="/elao_/pr/651/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
