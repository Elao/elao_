<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Django (3ème partie) : les templates, et bien d&#039;autres choses ...</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/660/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/660/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/660/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/660/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/660/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/660/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/660/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Django (3ème partie) : les templates, et bien d&#039;autres choses ..." />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/660/blog/dev/django-3eme-partie-les-templates-et-bien-dautres-choses" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Django (3ème partie) : les templates, et bien d&#039;autres choses ..." />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Django (3ème partie) : les templates, et bien d&#039;autres choses ..." />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/660/blog/dev/django-3eme-partie-les-templates-et-bien-dautres-choses" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/f6fe85b8f806a5f6b5cf0d04635f4648.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Django (3ème partie) : les templates, et bien d&#039;autres choses ...">
            <meta property="twitter:description" content="Django (3ème partie) : les templates, et bien d&#039;autres choses ...">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/1f736f5fde3845b1e613e001cdf5bb68.jpg">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/pr/660/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Django (3ème partie) : les templates, et bien d'autres choses ...",
    "image": [
        "https://elao.github.io/elao_/pr/660/blog/dev/content/images/blog/thumbnails/django.jpg"
    ],
    "datePublished": "2010-10-15T00:00:00+00:00",
    "dateModified": "2010-10-15T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Xavier R",
            "url": "https://elao.github.io/elao_/pr/660/equipe/xavierr"
        }
    ],
    "keywords": [
        "Django",
        "Framework",
        "Mvc",
        "Python"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/660/build/app.c75c6925.css">
        
                        <script src="/elao_/pr/660/build/runtime.3c4e92bc.js" defer></script><script src="/elao_/pr/660/build/947.b56b79b1.js" defer></script><script src="/elao_/pr/660/build/769.7dfbbe52.js" defer></script><script src="/elao_/pr/660/build/app.e47fd89c.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;660&#x5C;&#x2F;build&#x5C;&#x2F;see.80fe75b7.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;660&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/660/">
                        <span class="screen-reader">Django (3ème partie) : les templates, et bien d&#039;autres choses ...</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/pr/660/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/pr/660/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/pr/660/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/pr/660/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/blog/dev">
                <span itemprop="name">Dev</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Django (3ème partie) : les templates, et bien d&#039;autres choses ...</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/54aec324e1babdef385173de2723c636.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/54aec324e1babdef385173de2723c636.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/b93305178723ab651b4b8464f099bac7.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/54aec324e1babdef385173de2723c636.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/b93305178723ab651b4b8464f099bac7.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/54aec324e1babdef385173de2723c636.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/b93305178723ab651b4b8464f099bac7.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/54aec324e1babdef385173de2723c636.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/django.jpg/b93305178723ab651b4b8464f099bac7.jpg') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author ">
                        <div class="article-author__image">
                                                            <a href="/elao_/pr/660/blog/auteur/xavierr">
                                    <img     src="/elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg"
    srcset="
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg 1x,
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/483510c48265ecfc9142de1a8a2bc614.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/pr/660/blog/auteur/xavierr">
                                    <strong>Xavier R</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>15 octobre 2010</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>Django (3ème partie) : les templates, et bien d&#039;autres choses ...</h1>
                <p>Django (3ème partie) : les templates, et bien d&#039;autres choses ...</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/django" rel="nofollow">#Django</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/framework" rel="nofollow">#Framework</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/mvc" rel="nofollow">#Mvc</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/python" rel="nofollow">#Python</a>
                        </li>
                                    </ul>
            </div>
        </div>

        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <p>Bonjour à toutes et à tous,</p>
<p>Aujourd'hui nous abordons notre troisième volet consacré à <a href="http://www.djangoproject.com/" target="_blank">Django</a> et autant vous le dire tout de suite : nous avons du pain sur la planche !</p>
<p>En effet, nous allons enrichir le projet initié lors de notre <a href="/blog/django-2nde-partie-le-modele-et-ladmin.html" target="_blank">précédent article</a>. Pour mémoire, j'ai choisi de mettre en pratique nos connaissances de Django à travers un cas concret, assez simple pour être didactique mais assez riche pour couvrir un large éventail de fonctionnalités : un site de vente d'articles de sport (ou, soyons honnêtes, plutôt une ébauche de site). Dans l'épisode précédent, nous avons créé deux objets métiers, "<strong>Sport</strong>" et "<strong>Item</strong>", et mis en place l'interface permettant de les gérer, grâce à l'Admin de Django (affichage des listes, création, édition, suppression). Aujourd'hui, nous allons construire une page d'accueil dans laquelle nous afficherons une liste des produits disponibles. Histoire de rendre la partie plus intéressante, nous nous fixons les objectifs suivants : la liste pourra faire l'objet d'un tri sur un critère donné, elle devra être paginée et il sera possible de faire des recherches sur des critères assez simples. Du travail en perspective !</p>
<p>Voici le résultat à atteindre :</p>
<img src="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2010/elao_shop_index_vfinale.png/af1e6badff69ea8744604115b2723b4c.png" alt="elao shop index vfinale Django (3ème partie) : les templates, et bien dautres choses ..." title="elao shop index vfinale Django (3ème partie) : les templates, et bien dautres choses ..." srcset="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2010/elao_shop_index_vfinale.png/af1e6badff69ea8744604115b2723b4c.png 1x,
/elao_/pr/660/%2E%2E/../resized/content/images/blog/2010/elao_shop_index_vfinale.png/45cb164963efcb227d571d8390b10529.png 2x," id="elao-shop-index-vfinale-django-3eme-partie-les-templates-et-bien-dautres-choses">
<p>Tout au long de cet article, nous allons travailler principalement sur trois fichiers : la template globale (<strong>base.html</strong>), la template correspondant à la page d'accueil (<strong>index.html</strong>) et le fichier <strong>shop/views.py</strong>. A mesure que nous avancerons en fonctionnalités, nous compléterons le code de chacun de ces fichiers. Toutefois, si à un moment ou un autre, vous êtiez perdu(e)s, voici une archive contenant le projet obtenu lorsque toutes les étapes décrites dans cet article ont été réalisées (codes, feuilles de style, images, fixtures …) : <a href="http://www.elao.org/wp-content/uploads/2010/10/django_shop_v1.zip" target="_blank">Elao shop - code source - part 3</a>. Quoi qu'il en soit, pour tirer pleinement profit de cet article, je vous encourage plutôt à suivre chacune des étapes décrites ci-après, à ne télécharger cette archive que pour récupérer les fixtures, les styles et les images, et à ne consulter le code qu'en cas de difficulté à "reconstituer le puzzle". Bien entendu, le code fourni ne sert qu'à des fins didactiques et ne devrait en aucun cas être utilisé tel quel en production. Ce code est sans nul doute perfectible à bien des égards, et toute critique constructive pour l'améliorer est évidemment la bienvenue.</p>
<p>Vous êtes prêts ? C'est parti ! Nous allons donc nous atteler à la création de notre page d'accueil, assez basique dans sa forme et son contenu dans un premier temps.</p>
<h3 id="premiere-etape-creation-d-un-jeu-de-donnees" class="anchor-title"><a href="#premiere-etape-creation-d-un-jeu-de-donnees">Première étape : création d'un jeu de données</a></h3>
<p>Vouloir afficher des articles sur un site de vente, c'est bien, encore faut-il pour cela que nous disposions d'un jeu de données. Et c'est là qu'entrent en scène les <strong>fixtures</strong>. Nous allons donc voir une méthode permettant de créer un jeu de fixtures, puis alimenter la base de données avec les données ainsi obtenues (pour ceux qui le souhaitent, un exemple de fixtures est disponible dans le répertoire <strong>shop/fixtures</strong> de <a href="/blog/wp-content/uploads/2010/10/django_shop_v1.zip">l'archive</a> proposée au début de cet article. Copier ce fichier dans le répertoire <strong>elao/shop/fixtures</strong> de votre propre projet. Ces fixtures ont été obtenus en appliquant la méthode décrite ci-après).</p>
<p>Il faut savoir que Django gère les fixtures dans plusieurs formats : XML, YAML et JSON. Nous allons opter ici, de manière assez arbitraire, pour le format XML, qui n'est pas nécessairement mon format préféré, mais il fallait bien en choisir un … J'aurais tendance à considérer que le format YML est le plus lisible des trois (cela reste une opinion) mais …</p>
<blockquote>
<p>Pour générer des fixtures au format YAML, <a href="http://www.pyyaml.org/" target="_blank">PyYAML</a> doit être installé !</p>
</blockquote>
<p>La manière la plus simple pour générer un jeu de données est dans un premier temps de créer en base de données un enregistrement pour chaque classe, à l'aide de l'Admin de Django, puis de lancer la sous-commande <strong>dumpdata</strong> qui va générer un fichier exemple de fixtures à partir des données que nous aurons enregistrées. Si vous souhaitez créer vos propres fixtures, je vous laisse donc le temps d'aller créer une instance de la classe "<strong>shop.Sport</strong>" et une autre de la classe "sport.Item" via l'Admin … Ca y est ? C'est fait ? Nous pouvons donc générer un squelette de fixtures qui va nous servir de base pour créer des données supplémentaires :</p>
<pre class="code-multiline language-bash"><code class="language-bash" id="738fbe96c1fa95ca0e868d294ecae2a6">python manage.py dumpdata <span class="token parameter variable">--indent</span><span class="token operator">=</span><span class="token number">2</span> <span class="token parameter variable">--format</span><span class="token operator">=</span>xml shop</code></pre>
<p>Voici un exemple de data qui s'affiche à l'écran après avoir lancé cette commande :</p>
<pre class="code-multiline language-xml"><code class="language-xml" id="483a0b7e35eb20be7d3167fddefbe083"><span class="token comment">&lt;!--?xml version="1.0" encoding="utf-8"?--&gt;</span></code></pre>
<p>En nous basant sur cet exemple, nous allons pouvoir créer des données supplémentaires que nous enregistrerons dans le fichier <strong>elao/shop/fixtures/initial_data.xml</strong>. Si vous ne souhaitez pas créer vos propres fixtures, je rappelle qu'un fichier XML de fixtures est disponible dans l'archive. Attention, si vous êtes un amateur de foot éclairé, je vous déconseille d'utiliser ce fichier XML, dont le contenu pourrait heurter la sensibilité de certains footballeurs … Les images associées à nos articles sont également disponibles dans l'archive.</p>
<p>A présent, nous allons charger les données en base en lançant la commande <strong>loaddata</strong> :</p>
<pre class="code-multiline language-bash"><code class="language-bash" id="0b591be8986428a4f71d0cb9d54bcf9f">python manage.py loaddata shop/fixtures/initial_data.xml</code></pre>
<p>La console devrait vous retourner le résultat suivant :</p>
<pre class="code-multiline"><code id="aea13c3a1b2eef56d079326f39df0003">Installing xml fixture 'shop/fixtures/initial_data' from absolute path.
Installed 12 object(s) from 1 fixture(s)</code></pre>
<p>Voilà, nous disposons désormais d'un jeu de données qui va nous permettre d'afficher tous les articles sur la page d'accueil de notre site. Nous pouvons donc nous atteler à la rédaction de la page d'accueil. Et pour cela, nous allons définir une template de base (le layout global) dont nos vues hériteront.</p>
<h3 id="creation-de-la-page-d-accueil-et-du-layout-global" class="anchor-title"><a href="#creation-de-la-page-d-accueil-et-du-layout-global">Création de la page d'accueil et du layout global</a></h3>
<p>Dans un premier temps, nous allons écrire le squelette du code nécessaire à l'affichage d'une page d'accueil (nous nous soucierons ensuite de l'habillage). Comme souvent avec Django, cela signifie :</p>
<ol>
<li>Ecrire une route (dans notre cas, l'URL correspondra à la racine du site)</li>
<li>Ecrire une méthode <em>index</em> dans le fichier <em>views.py</em></li>
<li>Ecrire la template correspondante</li>
</ol>
<p>Tout d'abord, la route permettant d'appeler la méthode <strong>index</strong> du module <strong>views</strong> de notre application <strong>shop</strong> lorsque l'URL invoquée correspond à la racine de notre site ...</p>
<pre class="code-multiline language-python"><code class="language-python" id="df87f529561cca0f20804b3131a109c1"><span class="token comment"># elao/urls.py</span>
<span class="token comment"># …</span>
urlpatterns <span class="token operator">=</span> patterns<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">r'^$'</span><span class="token punctuation">,</span> <span class="token string">'elao.shop.views.index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment"># ...</span></code></pre>
<p>… ensuite la méthode <strong>index</strong> ...</p>
<pre class="code-multiline language-python"><code class="language-python" id="904a9957b3af51ee796849357f0822d4"><span class="token comment"># elao/shop/views.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render_to_response

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span></code></pre>
<p>… et pour finir, la template <strong>index.html</strong></p>
<pre class="code-multiline language-html"><code class="language-html" id="ab58b517ab6f929bfb91e391afeb3e2e"><span class="token comment">&lt;!-- elao/templates/index.html --&gt;</span>
{% block content %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Catalogue des articles<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
Ici, nous allons afficher la liste des articles disponibles.

{% endblock %}</code></pre>
<p>A présent, si vous vous rendez sur la page <a href="http://localhost:8000/" target="_blank"></a><a href="http://localhost:8000/" target="_blank">http://localhost:8000/</a>, vous verrez s'afficher une magnifique page, dont la sobriété graphique a de quoi refiler le cafard à tous les designers de la planète … Même le développeur indécrottable que je suis est à peine satisfait du rendu, c'est vous dire …</p>
<p>Nous allons tenter d'améliorer tout cela, mais le but de cet article n'étant pas de révéler notre sensibilité artistique, mais bien d'étudier le framework Django, nous allons voir comment une template de Django peut hériter d'une template "mère", laquelle va servir de layout pour ses "filles". Je vous rassure, nous en profiterons au passage pour améliorer le rendu à l'aide d'une feuille de style … En ce qui me concerne, je ne suis absolument pas doué pour le graphisme, mais même lorsque je développe, j'aime bien améliorer un peu le rendu global avec quelques styles basiques qui rendent tout de suite le travail plus agréable. Nous allons donc créer dans un premier temps cette template "mère", que nous appellerons <strong>base.html</strong> (c'est une convention adoptée par la plupart des développeurs Django, donc, autant nous y conformer !) et que nous placerons à la racine du répertoire <strong>templates</strong> :</p>
<pre class="code-multiline language-html"><code class="language-html" id="06aa8a4395a00df84fc7a7469d53dd33"><span class="token comment">&lt;!-- elao/templates/base.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span> auto<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">1100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token color">white</span><span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> outset <span class="token color">lightgrey</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header-logo<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin-right</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Django<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/site-media/pictures/django_logo.gif<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Django<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>absmiddle<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">26</span><span class="token unit">px</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>La boutique de sport d'ELAO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header-navigation<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> | <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/admin<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    {% block content %}{% endblock %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>Pas grand chose à signaler ici, il s'agit d'un fichier HTML assez classique. Vous remarquerez que j'ai inclus un lien vers l'Admin afin d'y accéder rapidement, ce qui n'est pas nécessairement une pratique recommandable dans la mesure où nous développons une page destinée au grand public. Mais nous verrons à l'occasion d'un prochain article comment masquer ce lien en fonction du statut de l'utilisateur courant. Noter également comment nous incluons la feuille de style "<strong>style.css</strong>" : le chemin de la feuille de style fait référence à une route <strong>site-media</strong> que nous avions créée dans l'article précédent, et qui est destinée à servir les fichiers statiques. Il vous faudra donc enregistrer vos styles dans un fichier nommé <strong>style.css</strong> placé à la racine de votre répertoire <strong>media</strong>. Pour ceux qui le souhaitent, le fichier CSS que j'ai utilisé est disponible dans l'archive téléchargeable que j'ai mentionnée au début de cet article. Cette feuille de style recourt à quelques images de poids très léger également disponibles dans l'archive. Enfin, notez surtout la présence du bloc <strong>{% block content %}{% endblock %}</strong> : toutes les pages qui hériteront de la page <strong>base.html</strong> verront le contenu de leur bloc <strong>content</strong> injecté dans le bloc <strong>content</strong> de la template "mère".</p>
<p>A présent, pour que notre page <strong>index.html</strong> soit incluse dans le layout global (en l'occurrence, dans le fichier <strong>base.html</strong>), il nous suffit d'ajouter la ligne suivante au début de ce fichier :</p>
<pre class="code-multiline language-html"><code class="language-html" id="580b6786136c4660e7d2b86a513a1d8b"><span class="token comment">&lt;!-- elao/templates/index.html --&gt;</span>
{% extends "base.html" %}</code></pre>
<p>Si vous avez récupéré la feuille de style et les images que je vous proposais, la page d'accueil <a href="http://localhost:8000/" target="_blank"></a><a href="http://localhost:8000/" target="_blank">http://localhost:8000/</a> devrait désormais ressembler à ceci :</p>
<img src="/elao_/pr/660/content/images/blog/2010/elao_shop_index_v1.png" alt="elao shop index vfinale Django (3ème partie) : les templates, et bien dautres choses ..." title="elao shop index vfinale Django (3ème partie) : les templates, et bien dautres choses ..." srcset="content/images/blog/2010/elao_shop_index_v1.png 1x,
content/images/blog/2010/elao_shop_index_v1.png 2x," id="elao-shop-index-vfinale-django-3eme-partie-les-templates-et-bien-dautres-choses">
<p>Bon, tout cela commence à prendre forme, à présent, nous allons afficher nos articles dans notre template fraichement créée !</p>
<h3 id="l-affichage-des-articles" class="anchor-title"><a href="#l-affichage-des-articles">L'affichage des articles</a></h3>
<p>La première chose à faire consiste à modifier la méthode <strong>index</strong> du module <strong>views.py</strong> pour récupérer tous les articles afin de les passer à la vue …</p>
<pre class="code-multiline language-python"><code class="language-python" id="498d311872dd21730b06ac3e80adb48b"><span class="token comment"># elao/shop/views.py</span>
<span class="token comment"># ...</span>
<span class="token keyword">from</span> shop<span class="token punctuation">.</span>models <span class="token keyword">import</span> Item

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
item_list <span class="token operator">=</span> Item<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'items'</span> <span class="token punctuation">:</span> item_list<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>… puis les afficher dans la vue :</p>
<pre class="code-multiline language-html"><code class="language-html" id="7f09cdeca33f9e758ff700e8481036b8"><span class="token comment">&lt;!-- elao/templates/index.html --&gt;</span>
{% extends "base.html" %}

{% block content %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Catalogue des articles<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    {% for item in items %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>article_div<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ item.description }}<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/site-media/{{ item.picture }}<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ item.name }}<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150px<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150px<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">17</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token unit">px</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>{{ item.price }} <span class="token entity named-entity" title="&amp;">&amp;amp;</span>euro;
            {{ item.sport.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    {% endfor %}
{% endblock %}</code></pre>
<p>Dernière chose avant de passer à la pagination, aux tris, et au moteur de recherche : si vous observez les champs définis dans la classe "<strong>Item</strong>", vous remarquerez que nous avions défini un champ <strong>stock</strong> et un champ <strong>public</strong>. Comme nous travaillons sur une page destinée aux internautes (et non pas aux administrateurs du site), il est tout naturel de ne pas afficher les articles dont le stock est nul et ceux qui ont un statut "public" à false. Nous allons donc définir un <strong>ModelManager</strong> supplémentaire pour la classe <strong>Item</strong>, qui tienne compte de ces contraintes métiers. Nous allons donc dans un premier temps rédiger le code de la classe <strong>PublicItemManager</strong> qui hérite de <strong>models.Manager</strong>, puis modifier le code de la classe <strong>Item</strong> pour que celle-ci utilise ce nouveau <strong>PublicItemManager</strong> en plus du <strong>manager</strong> par défaut. Tout cela se passe bien évidemment dans le fichier <strong>shop/models.py</strong>.</p>
<pre class="code-multiline language-python"><code class="language-python" id="cfe2ededddc0fd73aea0fea5571eff68"><span class="token comment"># shop/models.py</span>
<span class="token comment"># ...</span>
<span class="token keyword">class</span> <span class="token class-name">PublicItemManager</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Manager<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token keyword">def</span> <span class="token function">get_query_set</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span>PublicItemManager<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_query_set<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>public<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>stock__gt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Item</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token comment"># …</span>
objects <span class="token operator">=</span> models<span class="token punctuation">.</span>Manager<span class="token punctuation">(</span><span class="token punctuation">)</span>
public_items <span class="token operator">=</span> PublicItemManager<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>Noter que l'on a défini un second manager, mais si on ne souhaite pas qu'il se substitue au manager <strong>objects</strong> par défaut, il est nécessaire de déclarer explicitement ce dernier (l'interface d'Admin, par exemple, utiliserait le <strong>manager public_items</strong> si <strong>objects</strong> n'était pas déclaré et nous n'aurions donc plus accès dans l'Admin aux articles en rupture de stock et non publics, ce qui n'est pas le comportement souhaité !). A présent, nous allons modifier la méthode <strong>index</strong> dans le fichier <strong>views.py</strong> afin que les articles extraits de la base de données soient gérés par notre <strong>Manager</strong> personnalisé :</p>
<pre class="code-multiline language-python"><code class="language-python" id="f3363ac8cf2c3ff757b2ffa8defa952a"><span class="token comment"># shop/views.py</span>
<span class="token comment"># …</span>

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
item_list <span class="token operator">=</span> Item<span class="token punctuation">.</span>public_items<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'items'</span> <span class="token punctuation">:</span> item_list<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>A présent, si vous modifiez, via l'Admin, le stock ou le statut d'un article pour le rendre impropre à la publication, vous remarquerez que celui-ci ne s'affiche plus sur notre page d'accueil : mission accomplie ! Nous pouvons donc continuer à améliorer notre page, en y ajoutant la pagination des articles par exemple.</p>
<blockquote>
<p>Pour en savoir plus sur la personnalisation des <strong>ModelManagers</strong>, voir la page de la documentation Django qui traite de ce sujet : <a href="http://www.djangoproject.com/documentation/models/custom_managers/" target="_blank">Giving models a custom manager</a>.Pour savoir comment exécuter des requêtes avec l'ORM de Django, voir la page dédiée : <a href="http://docs.djangoproject.com/en/1.2/topics/db/queries/" target="_blank">Making queries</a>.</p>
</blockquote>
<h3 id="pagination-des-resultats" class="anchor-title"><a href="#pagination-des-resultats">Pagination des résultats</a></h3>
<blockquote>
<p>La pagination fait l'objet d'un chapitre complet dans la documentation officielle : <a href="http://docs.djangoproject.com/en/1.2/topics/pagination/" target="_blank">Pagination</a>.</p>
</blockquote>
<p>Nous allons limiter le nombre d'articles affichés sur la page d'accueil à trois (dans la mesure où nous disposons d'un jeu de dix articles en base de données, le nombre de trois me paraît être un bon compromis, en tenant compte du fait que nous ajouterons des fonctionnalités de filtre par la suite). Dans un premier temps, nous allons modifier la méthode <strong>index</strong> du module <strong>shop.views</strong> :</p>
<pre class="code-multiline language-python"><code class="language-python" id="014ab0bac840cd3ea37db5b23fe203f5"><span class="token comment"># shop/views.py</span>
<span class="token comment"># …</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>paginator <span class="token keyword">import</span> Paginator<span class="token punctuation">,</span> InvalidPage<span class="token punctuation">,</span> EmptyPage

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
item_list <span class="token operator">=</span> Item<span class="token punctuation">.</span>public_items<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
paginator <span class="token operator">=</span> Paginator<span class="token punctuation">(</span>item_list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment"># On s'assure que le parametre 'page' est bien de type integer, sinon, on fixe le numero de page courante a 1</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
page <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
page <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment"># Si la variable 'page' depasse le nombre de pages total, on fixe sa valeur au numero de la derniere page</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
items <span class="token operator">=</span> paginator<span class="token punctuation">.</span>page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>
<span class="token keyword">except</span> <span class="token punctuation">(</span>EmptyPage<span class="token punctuation">,</span> InvalidPage<span class="token punctuation">)</span><span class="token punctuation">:</span>
items <span class="token operator">=</span> paginator<span class="token punctuation">.</span>page<span class="token punctuation">(</span>paginator<span class="token punctuation">.</span>num_pages<span class="token punctuation">)</span>

<span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'items'</span> <span class="token punctuation">:</span> items <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>Ensuite, nous devons modifier la template <strong>index.html</strong> car désormais, nous ne bouclons plus sur <strong>items</strong>, mais sur <strong>items.object_list</strong> :</p>
<blockquote>
<p>Ici, <strong>items</strong> est une instance de la classe &lt;a id="search_div" class="search" lang="html" type="text" name="search_sport" href="?page={{ items.next_page_number }}{{ sort_query_string }}" target="_blank""&gt;</p>
</blockquote>
<pre class="code-multiline language-python"><code class="language-python" id="0df905d9735f1f9dca398c87abb99971"><span class="token operator">-</span><span class="token operator">-</span> Sélectionnez un sport <span class="token operator">-</span><span class="token operator">-</span>

<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> sport <span class="token keyword">in</span> sports <span class="token operator">%</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span> sport<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span>

<span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>nbsp<span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"Search"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>nbsp<span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">"reset"</span> value<span class="token operator">=</span><span class="token string">"Reset"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> … <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span></code></pre>
<p>Le code de notre formulaire appelle plusieurs remarques :</p>
<p>Première remarque : pour le moment nous ne faisons pas encore appel aux formulaires orientés objets proposés par Django. Nous aborderons cet aspect dans un autre article ; pour l'heure nous continuons à construire nos formulaires "<strong>à la main</strong>".</p>
<p>Seconde remarque : vous noterez que les balises de templates (<strong>template tags</strong> dans le jargon de Django) font référence à des variables en session. En effet, en combinant les paramètres de tri et les paramètres de pagination, vous avez pu constater à quel point il était délicat de maintenir une certaine cohérence, et notamment de conserver une trace des paramètres GET pour les réinjecter dans les liens de pagination. Pour notre exemple, j'ai donc choisi de transmettre les paramètres du formulaire de recherche via la méthode POST, et non pas la méthode GET, et utiliser les sessions pour conserver leur trace. Nous y reviendrons.</p>
<p>Troisième remarque : vous avez pu noter que nous bouclons sur une variable <strong>sports</strong> qui n'a pas encore été définie et pourtant la page s'affiche malgré tout. Quel enseignement en tirer ? Eh bien, tout simplement que les templates de Django, lorsqu'elles rencontrent une variable non définie, ne provoquent pas une Exception, mais les ignorent silencieusement.</p>
<p>Dernière remarque : nous protégeons notre formulaire des attaques CSRF à l'aide de la balise <strong>{% csrf_token %}</strong>. Cette protection implique des modifications dans notre code que nous allons voir.</p>
<blockquote>
<p>Pour en savoir plus sur la protection CSRF avec Django 1.2, consulter cette page : <a href="http://docs.djangoproject.com/en/1.2/ref/contrib/csrf/" target="_blank">Cross Site Request Forgery protection</a></p>
</blockquote>
<p>A présent, si vous soumettez le formulaire de recherche, Django vous gratifiera d'une erreur 403 <strong>Forbidden</strong> ; il a même la gentillesse de vous indiquer la marche à suivre, en trois points :</p>
<img src="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2010/elao_shop_csrf_403.png/acd2dc9d98fa77a29d9846756411faed.png" alt="elao shop index vfinale Django (3ème partie) : les templates, et bien dautres choses ..." title="elao shop index vfinale Django (3ème partie) : les templates, et bien dautres choses ..." srcset="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2010/elao_shop_csrf_403.png/acd2dc9d98fa77a29d9846756411faed.png 1x,
/elao_/pr/660/%2E%2E/../resized/content/images/blog/2010/elao_shop_csrf_403.png/96ea81b8d21af530a72540797f8a4753.png 2x," id="elao-shop-index-vfinale-django-3eme-partie-les-templates-et-bien-dautres-choses">
<p>Concernant les deux derniers points, nous sommes "<strong>dans les clous</strong>". En particulier, la classe <strong>CsrfViewMiddleware</strong> est bien déclarée par défaut dans notre fichier <strong>settings.py</strong>. En revanche, concernant le premier point, nous devons modifier notre méthode <strong>index</strong> pour passer à la méthode <strong>render_to_response</strong> un troisième paramètre de type <strong>RequestContext</strong>. Nous allons donc nous exécuter :</p>
<pre class="code-multiline language-python"><code class="language-python" id="a1922925c566f9c3d83544825a488492"><span class="token comment"># shop/views.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>template <span class="token keyword">import</span> RequestContext
<span class="token comment"># …</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token comment"># …</span>
<span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'items'</span> <span class="token punctuation">:</span> items<span class="token punctuation">,</span> <span class="token string">'sort_query_string'</span> <span class="token punctuation">:</span> sort_query_string<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">,</span> context_instance<span class="token operator">=</span>RequestContext<span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<blockquote>
<p>Pour en savoir un peu plus sur les classes <strong>Context</strong> et <strong>RequestContext</strong>, référez-vous à la documentation de Django : <a href="http://docs.djangoproject.com/en/1.2/ref/templates/api/#playing-with-context-objects" target="_blank">Playing with Context objects</a>.</p>
</blockquote>
<p>A présent, nous allons alimenter la liste de sélection avec les enregistrements contenus en base de données. Rien de très compliqué, cela consiste à récupérer tous les sports dans la méthode <strong>index</strong> et les transmettre à la vue (template) :</p>
<pre class="code-multiline language-python"><code class="language-python" id="d0f2a8ed6746b8d5305c8b7e63775978"><span class="token comment"># shop/views.py</span>
<span class="token keyword">from</span> shop<span class="token punctuation">.</span>models <span class="token keyword">import</span> Item<span class="token punctuation">,</span> Sport
<span class="token comment"># …</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
item_list <span class="token operator">=</span> Item<span class="token punctuation">.</span>public_items<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
sports <span class="token operator">=</span> Sport<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># …</span>
<span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'items'</span> <span class="token punctuation">:</span> items<span class="token punctuation">,</span> <span class="token string">'sort_query_string'</span> <span class="token punctuation">:</span> sort_query_string<span class="token punctuation">,</span> <span class="token string">'sports'</span><span class="token punctuation">:</span> sports<span class="token punctuation">}</span><span class="token punctuation">,</span> context_instance<span class="token operator">=</span>RequestContext<span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>Notre formulaire de filtres est désormais correctement configuré, il nous reste donc à traiter la soumission de ce formulaire. Comme je l'ai déjà évoqué, pour tracer les variables POST soumises via le formulaire, nous allons utiliser les sessions : lorsque l'on soumet le formulaire, on place toutes les variables du formulaire en session. Par la suite, si l'utilisateur navigue au moyen des liens de tri ou de pagination (donc via la méthode GET), nous nous baserons sur les variables en session pour retrouver les critères de filtre courants ; pour tenir à jour les variables en session, c'est très simple, seule une soumission du formulaire peut modifier ces variables ; en l'absence de variables POST, les variables en session restent inchangées. Quant aux variables de tri et de pagination, nous n'avons plus à nous en soucier : nous considérons qu'à partir du moment où l'utilisateur soumet une nouvelle requête via le formulaire, les variables de tri et de pagination n'ont plus à être maintenues, et elles sont systématiquement repositionnées à leur valeur par défaut.</p>
<p><strong>En résumé</strong> : on vérifie dans un premier temps si des données ont été postées ; si c'est le ce cas, on injecte les données postées en session ; dans tous les cas, on construit ensuite la requête en se basant sur les données présentes en session. Ce qui nous donne :</p>
<pre class="code-multiline language-python"><code class="language-python" id="18cdd409a1506d4bdc3e03078c46875c"><span class="token comment"># shop/views.py</span>
<span class="token comment"># …</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
item_list <span class="token operator">=</span> Item<span class="token punctuation">.</span>public_items<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
sports <span class="token operator">=</span> Sport<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># Parametres de recherche :</span>
<span class="token comment"># On recupere les donnees de session dans une variable 'search'</span>
search <span class="token operator">=</span> request<span class="token punctuation">.</span>session<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># Si le formulaire a ete soumis :</span>
<span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span> <span class="token punctuation">:</span>
<span class="token comment"># On reinitialise la variable 'search'</span>
search <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">if</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>has_key<span class="token punctuation">(</span><span class="token string">'search_name'</span><span class="token punctuation">)</span> <span class="token keyword">and</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'search_name'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
search<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'search_name'</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>has_key<span class="token punctuation">(</span><span class="token string">'search_sport'</span><span class="token punctuation">)</span> <span class="token keyword">and</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'search_sport'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
search<span class="token punctuation">[</span><span class="token string">'sport'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token comment"># Et on reinjecte la variable 'search' dans la session</span>
request<span class="token punctuation">.</span>session<span class="token punctuation">[</span><span class="token string">'search'</span><span class="token punctuation">]</span> <span class="token operator">=</span> search

<span class="token keyword">if</span> search<span class="token punctuation">.</span>has_key<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token keyword">and</span> search<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
item_list <span class="token operator">=</span> item_list<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name__icontains<span class="token operator">=</span>search<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> search<span class="token punctuation">.</span>has_key<span class="token punctuation">(</span><span class="token string">'sport'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
item_list <span class="token operator">=</span> item_list<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>sport<span class="token operator">=</span>search<span class="token punctuation">[</span><span class="token string">'sport'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ...</span></code></pre>
<p>Vous pouvez désormais naviguer dans la liste des articles à l'aide du formulaire, des liens de pagination et de tri, tout devrait se dérouler normalement. A une exception près : lorsque l'on soumet le formulaire, les valeurs courantes des critères de filtre ne sont pas conservées par le formulaire. Le problème est lié à la transmission des variables de session à la template. En effet, par défaut, Django ne rend pas les variables de session directement disponibles dans les templates. Nous devons donc encore apporter une dernière modification, qui consiste à ajouter le tuple <strong>TEMPLATE_CONTEXT_PROCESSORS</strong> défini ci-dessous dans notre fichier <strong>settings.py</strong> :</p>
<pre class="code-multiline language-python"><code class="language-python" id="5a63072f73484fde8fa9f65a84e61c2e"><span class="token comment"># settings.py</span>
<span class="token comment"># …</span>
TEMPLATE_CONTEXT_PROCESSORS <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token string">'django.core.context_processors.auth'</span><span class="token punctuation">,</span>
  <span class="token string">'django.core.context_processors.debug'</span><span class="token punctuation">,</span>
  <span class="token string">'django.core.context_processors.i18n'</span><span class="token punctuation">,</span>
  <span class="token string">'django.core.context_processors.request'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
<span class="token comment"># …</span></code></pre>
<p>Il s'agit d'une liste de méthodes (<strong>callables</strong>) permettant d'injecter des variables issues par exemple de la requête, des sessions, ou de l'utilisateur courant, dans l'objet <strong>context_instance</strong> (de la classe <strong>RequestContext</strong>) que nous transmettons aux templates.</p>
<blockquote>
<p>Les <strong>context processors</strong> sont abordés dans le chapitre de la documentation Django consacré à la classe <a href="http://docs.djangoproject.com/en/1.2/ref/templates/api/#subclassing-context-requestcontext" target="_blank">RequestContext</a>.</p>
</blockquote>
<h3 id="conclusion-absolument-pas-definitive" class="anchor-title"><a href="#conclusion-absolument-pas-definitive">Conclusion (absolument pas définitive)</a></h3>
<p>Aujourd'hui, en construisant une page d'accueil somme toute très classique, nous avons été amenés à appliquer de nombreuses fonctionnalités proposées par Django, parmi lesquelles les fixtures, l'héritage des templates, les variables de session, les gestionnaires de modèle personnalisés, la pagination, et j'en passe. Il nous reste malgré tout encore de nombreux concepts à étudier (l'internationalisation, les vues génériques, les tests unitaires et fonctionnels, l'authentification, les formulaires objets, le cache …). Je tâcherai de rédiger des articles dans lesquels j'aborderai ces différents points, mais avant d'en arriver là, je dois moi-même monter en compétences … Quoi qu'il en soit, je ne manquerai pas de vous faire profiter des connaissances que j'aurai acquises, avec toujours la ferme volonté de privilégier la pratique par rapport à la théorie.</p>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a href="/elao_/pr/660/blog/auteur/xavierr">
                                <img     src="/elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg"
    srcset="
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/401e4ebf653f048af7a31e583f17e399.jpg 1x,
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/xavierr.jpg/483510c48265ecfc9142de1a8a2bc614.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a href="/elao_/pr/660/blog/auteur/xavierr">
                                <strong>Xavier R</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                                                                                    <a
                                    href="https://github.com/xavier-rdo"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Xavier R</span>
                                </a>
                                                                                </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/feature/add-carriere-page/content/blog/dev/django-3eme-partie-les-templates-et-bien-dautres-choses.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/660/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/660/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                                                <a href="/elao_/pr/660/recrutement">
                            Nous recrutons
                                                            <span class="bullet">1</span>
                                                    </a>
                    </li>
                    <li>
                        <a href="/elao_/pr/660/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/660/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                    <li>
                        <a href="https://bsky.app/profile/elao.com" target="_blank">
                            <i class="icon icon--bluesky"></i>
                            Bluesky
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            X
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/pr/660/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2025 - ELAO - Tous droits réservés</span>
            <a href="/elao_/pr/660/legal">Mentions légales</a>
            <a href="/elao_/pr/660/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
