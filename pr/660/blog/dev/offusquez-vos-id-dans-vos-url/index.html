<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Offusquez vos id dans vos url</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/660/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/660/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/660/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/660/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/660/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/660/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/660/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Découverte d&#039;alternatives aux ID auto-incrémentés dans les urls et leur mise en place dans le framework Symfony." />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/660/blog/dev/offusquez-vos-id-dans-vos-url" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Offusquez vos id dans vos url" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Découverte d&#039;alternatives aux ID auto-incrémentés dans les urls et leur mise en place dans le framework Symfony." />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/660/blog/dev/offusquez-vos-id-dans-vos-url" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/obfuscation.jpg/54a1e9e2a032b4cec4d5dbfb9f84fa17.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Offusquez vos id dans vos url">
            <meta property="twitter:description" content="Découverte d&#039;alternatives aux ID auto-incrémentés dans les urls et leur mise en place dans le framework Symfony.">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/660/%2E%2E/../resized/content/images/blog/thumbnails/obfuscation.jpg/29da244cdf5c070e65ced0eb523672dd.jpg">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/pr/660/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Offusquez vos id dans vos url",
    "image": [
        "https://elao.github.io/elao_/pr/660/blog/dev/content/images/blog/thumbnails/obfuscation.jpg"
    ],
    "datePublished": "2019-11-06T00:00:00+00:00",
    "dateModified": "2019-11-06T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Maxime Colin",
            "url": "https://elao.github.io/elao_/pr/660/equipe/mcolin"
        }
    ],
    "keywords": [
        "Securite",
        "Php",
        "Symfony",
        "Framework"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/660/build/app.c75c6925.css">
        
                        <script src="/elao_/pr/660/build/runtime.3c4e92bc.js" defer></script><script src="/elao_/pr/660/build/947.b56b79b1.js" defer></script><script src="/elao_/pr/660/build/769.7dfbbe52.js" defer></script><script src="/elao_/pr/660/build/app.e47fd89c.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;660&#x5C;&#x2F;build&#x5C;&#x2F;see.80fe75b7.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;660&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/660/">
                        <span class="screen-reader">Offusquez vos id dans vos url</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/pr/660/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/pr/660/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/pr/660/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/pr/660/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/blog/dev">
                <span itemprop="name">Dev</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Offusquez vos id dans vos url</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/1b3981a13d7963fcca0851d6296a8816.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/1b3981a13d7963fcca0851d6296a8816.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/a340b2e062e1d92518570247f114a592.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/1b3981a13d7963fcca0851d6296a8816.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/a340b2e062e1d92518570247f114a592.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/1b3981a13d7963fcca0851d6296a8816.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/a340b2e062e1d92518570247f114a592.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/1b3981a13d7963fcca0851d6296a8816.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/headers/obfuscation.jpg/a340b2e062e1d92518570247f114a592.jpg') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author ">
                        <div class="article-author__image">
                                                            <a href="/elao_/pr/660/blog/auteur/mcolin">
                                    <img     src="/elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/mcolin.jpg/cb69b0afe176d65ea7c1da7e712cac13.jpg"
    srcset="
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/mcolin.jpg/cb69b0afe176d65ea7c1da7e712cac13.jpg 1x,
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/mcolin.jpg/0899bdf7169af336de983de73d88fa58.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/pr/660/blog/auteur/mcolin">
                                    <strong>Maxime Colin</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>6 novembre 2019</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>Offusquez vos id dans vos url</h1>
                <p>Découverte d&#039;alternatives aux ID auto-incrémentés dans les urls et leur mise en place dans le framework Symfony.</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/securite" rel="nofollow">#Securite</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/php" rel="nofollow">#Php</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/symfony" rel="nofollow">#Symfony</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/framework" rel="nofollow">#Framework</a>
                        </li>
                                    </ul>
            </div>
        </div>

                    <ol class="table-of-content" data-aos="fade-up">
                                    <li class="table-of-content__item">
                        <a href="#problemes-de-securite-et-de-confidentialite">Problèmes de sécurité et de confidentialité</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#les-alternatives-aux-ids-auto-incrementes">Les alternatives aux IDs auto-incrémentés</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#l-offuscation">L&#039;offuscation</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#integration-dans-symfony">Intégration dans Symfony</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#rendre-notre-systeme-configurable">Rendre notre système configurable</a>

                                            </li>
                            </ol>
        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <p>L'une des pratiques les plus courantes du web pour accéder à un contenu de base de données est d'inclure l'identifiant (<code class="code-inline" id="b718adec73e04ce3ec720dd11a06a308">ID</code>) de celui-ci dans l'url. Cet identifiant est dans la grande majorité des cas un entier positif auto-incrémenté par la base de données. Cet identifiant se retrouve ainsi exposé dans les urls. Bien qu'elle pose un certain nombre de problèmes, cette pratique est très simple et très répandue.</p>
<h2 id="problemes-de-securite-et-de-confidentialite" class="anchor-title"><a href="#problemes-de-securite-et-de-confidentialite">Problèmes de sécurité et de confidentialité</a></h2>
<p>Exposer ces identifiants dans les urls pose principalement des problèmes de <strong>sécurité</strong> et de <strong>confidentialité</strong>.</p>
<p>Ces problèmes sont dus à la prédictabilité de l'identifiant. En effet, celui-ci étant auto-incrémenté, si vous avez une url avec un identifiant, il est très facile de déduire les urls d'autres contenus en incrémentant ou décrémentant l'identifiant dans l'url.</p>
<p>Il est alors simple pour un attaquant ou simplement un utilisateur curieux de tenter d'accéder à des contenus qui ne lui sont pas destinés. Couplé à d'autres failles ou défauts de sécurité, cela lui facilitera grandement la tâche. Il est également simple de crawler votre contenu sans connaitre à l'avance toutes les urls, mais simplement en bouclant sur un identifiant incrémenté.</p>
<p>Et enfin, il est également simple de connaitre vos volumes de données. Par exemple, si je m'inscris sur un site et que je vois dans une url que mon compte utilisateur à l'ID 100, je sais qu'il n'y a que 100 utilisateurs inscrits sur ce site, si je passe une commande et qu'elle a l'identifiant 30, je sais qu'il n'y a eu que 30 commandes et je peux ensuite déduire le nombre de commandes moyen par utilisateur. Autant d'informations sensibles, surtout si vous êtes en concurrence.</p>
<h2 id="les-alternatives-aux-ids-auto-incrementes" class="anchor-title"><a href="#les-alternatives-aux-ids-auto-incrementes">Les alternatives aux IDs auto-incrémentés</a></h2>
<p>Plusieurs alternatives aux identifiants auto-incrémentés existent.</p>
<p>L'une des plus connues est l'<strong><a href="https://fr.wikipedia.org/wiki/Universal_Unique_Identifier" target="_blank">UUID</a></strong>. Cet identifiant de 32 caractères hexadécimaux est généré de façon unique par un algorithme. A partir de l'UUID d'un contenu il n'est pas possible de prédire celui des autres. Il est très utilisé lors d'échanges API; néanmoins il souffre d'un inconvéniant majeur pour des urls, sa longueur.</p>
<p>L'url suivante est quand même beaucoup moins lisible et pratique que la même utilisant des IDs entiers :</p>
<pre class="code-multiline"><code id="b5c1d4376359b8a0e505412d3f85fdbc">URL avec des UUIDs :
https://www.example.com/shop/category/b441a884-5d46-423b-8317-ddb6f7e3f2fb/product/f0283088-5bd3-4acc-bc42-e6d173d33dd8?filter=165779fc-171d-4f3c-8c60-a2351d6468d3

URL avec des IDs
https://www.example.com/shop/category/3/product/56?filter=33</code></pre>
<p>Une autre solution pourrait être d'utiliser des <strong>identifiants entiers non auto-incrémentés</strong>. Cela nécessite néanmoins la mise en place d'un algorithme permettant de générer de manière unique ces identifiants. C'est une solution qui peut être viable, mais pas forcement simple à mettre en place et la perte d'auto-increment côté base de données peut être handicapant.</p>
<h2 id="l-offuscation" class="anchor-title"><a href="#l-offuscation">L'offuscation</a></h2>
<p>Afin de conserver mes identifiants auto-incrementés en interne mais de ne pas les exposer j'ai opté pour l'<a href="https://fr.wikipedia.org/wiki/Offuscation" target="_blank">offuscation</a>. Le principe est simple, mes IDs sont encodés avant d'être inséré dans les urls puis décodés à chaque requête de façon à ce que l'utilisateur ne voie jamais les vrais IDs.</p>
<p>En PHP il existe plusieurs bibliothèques permettant d'offusquer un ID numérique, encodant un entier en une chaîne héxadécidémale, une chaîne base64 ou un autre entier par exemple.</p>
<ul>
<li><a href="https://hashids.org/" target="_blank">hashids</a></li>
<li><a href="https://github.com/zackkitzmiller/tiny-php" target="_blank">zackkitzmiller/tiny</a></li>
<li><a href="https://github.com/marekweb/opaque-id" target="_blank">marekweb/opaque-id</a></li>
<li><a href="https://github.com/jenssegers/optimus" target="_blank">jenssegers/optimus</a></li>
</ul>
<p>J'ai utilisé <a href="https://github.com/jenssegers/optimus" target="_blank"><strong>optimus</strong></a> qui transforme votre ID en un autre entier. Néanmoins n'importe quelle autre bibliothèque fonctionnera pour la suite de cette article.</p>
<pre class="code-multiline language-php"><code class="language-php" id="20328f69ecbe43bfd9ffba3cb1b6d80b"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$optimus</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Optimus</span><span class="token punctuation">(</span><span class="token number">1580030173</span><span class="token punctuation">,</span> <span class="token number">59260789</span><span class="token punctuation">,</span> <span class="token number">1163945558</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$encoded</span> <span class="token operator">=</span> <span class="token variable">$optimus</span><span class="token operator">-&gt;</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1535832388</span>
<span class="token variable">$original</span> <span class="token operator">=</span> <span class="token variable">$optimus</span><span class="token operator">-&gt;</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token number">1535832388</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span></span></code></pre>
<style type="text/css">
figure figcaption {
  text-align: center;
  font-style: italic;
  font-size: 80%;
}

figure pre {
  margin: 0;
}

figure {
  margin: 20px 0;
}
</style>
<h2 id="integration-dans-symfony" class="anchor-title"><a href="#integration-dans-symfony">Intégration dans Symfony</a></h2>
<p>Tout d'abord créons un service pour offusquer nos IDs.</p>
<pre class="code-multiline language-php"><code class="language-php" id="8993fa175afbc254aba58d400993c99c"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">interface</span> <span class="token class-name-definition class-name">ObfuscatorInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">obfuscate</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">deobfuscate</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">OptimusObfuscator</span> <span class="token keyword">implements</span> <span class="token class-name">ObfuscatorInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token variable">$optimus</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Optimus</span> <span class="token variable">$optimus</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">optimus</span> <span class="token operator">=</span> <span class="token variable">$optimus</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">obfuscate</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">optimus</span><span class="token operator">-&gt;</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">deobfuscate</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">optimus</span><span class="token operator">-&gt;</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p>Configurons le service avec les générateurs.</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="81fb9888f28562106e0d23fe1312fe72"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
    <span class="token key atrule">env(APP_OPTIMUS_PRIME)</span><span class="token punctuation">:</span> <span class="token string">"1580030173"</span>
    <span class="token key atrule">env(APP_OPTIMUS_INVERSE)</span><span class="token punctuation">:</span> <span class="token string">"59260789"</span>
    <span class="token key atrule">env(APP_OPTIMUS_XOR)</span><span class="token punctuation">:</span> <span class="token string">"1163945558"</span>
    <span class="token key atrule">env(APP_OPTIMUS_SIZE)</span><span class="token punctuation">:</span> <span class="token string">"31"</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">_defaults</span><span class="token punctuation">:</span>
        <span class="token key atrule">autowire</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">autoconfigure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token key atrule">Jenssegers\Optimus\Optimus</span><span class="token punctuation">:</span>
        <span class="token key atrule">$prime</span><span class="token punctuation">:</span> <span class="token string">'%env(APP_OPTIMUS_PRIME)%'</span>
        <span class="token key atrule">$inverse</span><span class="token punctuation">:</span> <span class="token string">'%env(APP_OPTIMUS_INVERSE)%'</span>
        <span class="token key atrule">$xor</span><span class="token punctuation">:</span> <span class="token string">'%env(APP_OPTIMUS_XOR)%'</span>
        <span class="token key atrule">$size</span><span class="token punctuation">:</span> <span class="token string">'%env(APP_OPTIMUS_SIZE)%'</span></code></pre>
<blockquote>
<p>La bibiothèque met à disposition une commande pour générer les paramètres à injecter à <em>Optimus</em> : <code class="code-inline" id="fcc4bcf1bebc979abbbac9ee039b0345">php vendor/bin/optimus spark</code>.
Plus d'informations sur ces paramètres dans la <a href="https://github.com/jenssegers/optimus/blob/master/README.md" target="_blank">documentation</a>.</p>
</blockquote>
<p>Ensuite, afin de ne pas avoir à encoder nous-mêmes les IDs, créons un decorator pour le router Symfony.</p>
<p>Voici un exemple simple qui <strong>offusque</strong> tous les paramètres <code class="code-inline" id="b80bb7740288fda1f201890375a60c8f">id</code> des routes.</p>
<pre class="code-multiline language-php"><code class="language-php" id="fc63f1869e129a1138c1eb15c1430a89"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">ObfuscatorUrlGenerator</span> <span class="token keyword">implements</span> <span class="token class-name">RouterInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token variable">$inner</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token variable">$obfuscator</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">RouterInterface</span> <span class="token variable">$inner</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">ObfuscatorInterface</span> <span class="token variable">$obfuscator</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">inner</span> <span class="token operator">=</span> <span class="token variable">$inner</span><span class="token punctuation">;</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">obfuscator</span> <span class="token operator">=</span> <span class="token variable">$obfuscator</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">generate</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$referenceType</span> <span class="token operator">=</span> <span class="token scope"><span class="token keyword">self</span><span class="token punctuation">::</span></span><span class="token constant">ABSOLUTE_PATH</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$parameters</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$key</span> <span class="token operator">===</span> <span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token variable">$parameters</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">obfuscator</span><span class="token operator">-&gt;</span><span class="token function">obfuscate</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">inner</span><span class="token operator">-&gt;</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$referenceType</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">match</span><span class="token punctuation">(</span><span class="token variable">$pathinfo</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">inner</span><span class="token operator">-&gt;</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token variable">$pathinfo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$parameters</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$key</span> <span class="token operator">===</span> <span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token variable">$parameters</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">obfuscator</span><span class="token operator">-&gt;</span><span class="token function">deobfuscate</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token variable">$parameters</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setContext</span><span class="token punctuation">(</span><span class="token class-name type-declaration">RequestContext</span> <span class="token variable">$context</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">inner</span><span class="token operator">-&gt;</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">inner</span><span class="token operator">-&gt;</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getRouteCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">inner</span><span class="token operator">-&gt;</span><span class="token function">getRouteCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="a7795e16e0cb024b0c4a9497f00f2861"><span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">App\Routing\ObfuscatorUrlGenerator</span><span class="token punctuation">:</span>
        <span class="token key atrule">decorates</span><span class="token punctuation">:</span> router
        <span class="token key atrule">decoration_priority</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">arguments</span><span class="token punctuation">:</span>
            <span class="token key atrule">$inner</span><span class="token punctuation">:</span> <span class="token string">"@App\Routing\ObfuscatorUrlGenerator.inner"</span></code></pre>
<p>Ainsi, notre router offusque automatiquement nos <code class="code-inline" id="b80bb7740288fda1f201890375a60c8f">id</code> lors de la génération d'url :</p>
<pre class="code-multiline language-twig"><code class="language-twig" id="d6997235508b6b0f3651776fdac1de49"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> path<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>ma_route<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span> <span class="token twig language-twig"><span class="token comment">{# /ma/route/1535832388 #}</span></span></code></pre>
<p>Et désoffusque nos <code class="code-inline" id="b80bb7740288fda1f201890375a60c8f">id</code> lors de la correspondance d'url nous permettant d'accéder à notre <code class="code-inline" id="b80bb7740288fda1f201890375a60c8f">id</code> en clair dans nos controller :</p>
<pre class="code-multiline language-php"><code class="language-php" id="a6d6176b13d0c57a1e8ee8048ab13236"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">MaRouteController</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__invoke</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// $id = 20</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<h2 id="rendre-notre-systeme-configurable" class="anchor-title"><a href="#rendre-notre-systeme-configurable">Rendre notre système configurable</a></h2>
<p>Notre offuscation fonctionne mais uniquement sur les paramètres <code class="code-inline" id="b80bb7740288fda1f201890375a60c8f">id</code>. Nous aurons peut être besoin d'offusquer d'autres paramètres ou d'exclure certaines routes.</p>
<p>Pour cela ajoutons une méthode <code class="code-inline" id="cd3c6265a726bca865fe9b74b4fd5ec4">mustBeObfuscated</code> à notre <code class="code-inline" id="9f484bcd1b56f5125466c648f60d7671">Obfuscator</code> et déportons y la logique utilisée dans le router et dans le resolver :</p>
<pre class="code-multiline language-diff"><code class="language-diff" id="622fa2f3e414c83da7b9c74d038aac09"><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">?php
</span></span>class Obfuscator
{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    public function mustBeObfuscated(string $routeName, string $argumentName): bool
</span><span class="token prefix inserted">+</span><span class="token line">    {
</span><span class="token prefix inserted">+</span><span class="token line">        return $argumentName === 'id';
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span></span>}

class ObfuscatorUrlGenerator implements RouterInterface
{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   public function generate($name, $parameters = [], $referenceType = self::ABSOLUTE_PATH)
</span><span class="token prefix unchanged"> </span><span class="token line">   {
</span><span class="token prefix unchanged"> </span><span class="token line">       foreach ($parameters as $key =&gt; $value) {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">            if ($key === 'id') {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">            if ($this-&gt;obfuscator-&gt;mustBeObfuscated($name, $key))
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">               $parameters[$key] = $this-&gt;obfuscator-&gt;obfuscate($value);
</span><span class="token prefix unchanged"> </span><span class="token line">           }
</span><span class="token prefix unchanged"> </span><span class="token line">       }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       return $this-&gt;inner-&gt;setContext($name, $parameters, $referenceType);
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   public function match($pathinfo)
</span><span class="token prefix unchanged"> </span><span class="token line">   {
</span><span class="token prefix unchanged"> </span><span class="token line">       $parameters = $this-&gt;inner-&gt;match($pathinfo);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       foreach ($parameters as $key =&gt; $value) {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">            if ($key === 'id') {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">            if ($this-&gt;obfuscator-&gt;mustBeObfuscated($parameters['_route'], $key)) {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">               $parameters[$key] = $this-&gt;obfuscator-&gt;deobfuscate($value);
</span><span class="token prefix unchanged"> </span><span class="token line">           }
</span><span class="token prefix unchanged"> </span><span class="token line">       }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       return $parameters;
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span></span>}</code></pre>
<p>Cette méthode peut alors être personnalisée pour savoir si un paramètre doit être offusqué selon son nom et sa route.</p>
<p>Par exemple, en se basant sur un tableau contenant pour chaque route les paramètres à offusquer :</p>
<pre class="code-multiline language-php"><code class="language-php" id="dc7c3a8e20fd8bc91a3a21d5e2b0fb06"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Obfuscator</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>

    <span class="token keyword">private</span> <span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
       <span class="token string single-quoted-string">'une_route'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token string single-quoted-string">'une_autre_route'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'categoryId'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'productId'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">mustBeObfuscated</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$routeName</span><span class="token punctuation">,</span> <span class="token keyword type-hint">string</span> <span class="token variable">$argumentName</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">routes</span><span class="token punctuation">[</span><span class="token variable">$routeName</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">&amp;&amp;</span> <span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$argumentName</span><span class="token punctuation">,</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">routes</span><span class="token punctuation">[</span><span class="token variable">$routeName</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p>Pour aller plus loin, nous pouvons baser ce tableau de routes sur un fichier de configuration, sur des attributs ou des options dans le fichier de routing, sur une convention de nommage ou implémenter toute autre logique dans la méthode <code class="code-inline" id="cd3c6265a726bca865fe9b74b4fd5ec4">mustBeObfuscated</code>.</p>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a href="/elao_/pr/660/blog/auteur/mcolin">
                                <img     src="/elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/mcolin.jpg/cb69b0afe176d65ea7c1da7e712cac13.jpg"
    srcset="
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/mcolin.jpg/cb69b0afe176d65ea7c1da7e712cac13.jpg 1x,
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/mcolin.jpg/0899bdf7169af336de983de73d88fa58.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a href="/elao_/pr/660/blog/auteur/mcolin">
                                <strong>Maxime Colin</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                            <a
                                    href="https://twitter.com/colin_maxime"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--x" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte Twitter de Maxime Colin</span>
                                </a>
                                                                                        <a
                                    href="https://bsky.app/profile/maximecolin.bsky.social"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--bluesky" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte Bluesky de Maxime Colin</span>
                                </a>
                                                                                        <a
                                    href="https://github.com/maximecolin"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Maxime Colin</span>
                                </a>
                                                                                        <a href="https://www.maximecolin.fr/"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--website" aria-hidden="true"></i>
                                    <span class="screen-reader">Site personnel de Maxime Colin</span>
                                </a>
                                                    </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/feature/add-carriere-page/content/blog/dev/offusquez-vos-id-dans-vos-url.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/660/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/660/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                                                <a href="/elao_/pr/660/recrutement">
                            Nous recrutons
                                                            <span class="bullet">1</span>
                                                    </a>
                    </li>
                    <li>
                        <a href="/elao_/pr/660/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/660/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                    <li>
                        <a href="https://bsky.app/profile/elao.com" target="_blank">
                            <i class="icon icon--bluesky"></i>
                            Bluesky
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            X
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/pr/660/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2025 - ELAO - Tous droits réservés</span>
            <a href="/elao_/pr/660/legal">Mentions légales</a>
            <a href="/elao_/pr/660/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
