<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>E-learning sans internet ou presque</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/660/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/660/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/660/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/660/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/660/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/660/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/660/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Retour d&#039;expérience sur la conception de la progressive web app de Chalkboard Education" />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/660/blog/dev/progressive-web-app-chalkboard-education-elearning-sans-internet" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="E-learning sans internet ou presque" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Retour d&#039;expérience sur la conception de la progressive web app de Chalkboard Education" />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/660/blog/dev/progressive-web-app-chalkboard-education-elearning-sans-internet" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/51b8407365a94174051e665545fb8b1a.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="E-learning sans internet ou presque">
            <meta property="twitter:description" content="Retour d&#039;expérience sur la conception de la progressive web app de Chalkboard Education">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/b218a1384d9d18b717063cf26dcc0f01.jpg">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/pr/660/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "E-learning sans internet ou presque",
    "image": [
        "https://elao.github.io/elao_/pr/660/blog/dev/content/images/blog/2017/chalkboard-education/woman-phone.jpg"
    ],
    "datePublished": "2017-11-22T00:00:00+00:00",
    "dateModified": "2017-11-22T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Richard Hanna",
            "url": "https://elao.github.io/elao_/pr/660/equipe"
        }
    ],
    "keywords": [
        "Progressive web app",
        "Offline",
        "React",
        "Symfony"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/660/build/app.ff5670ee.css">
        
                        <script src="/elao_/pr/660/build/runtime.3c4e92bc.js" defer></script><script src="/elao_/pr/660/build/947.b56b79b1.js" defer></script><script src="/elao_/pr/660/build/633.a68c2dc1.js" defer></script><script src="/elao_/pr/660/build/app.36fa0d0a.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;660&#x5C;&#x2F;build&#x5C;&#x2F;see.80fe75b7.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;660&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;660&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/660/">
                        <span class="screen-reader">E-learning sans internet ou presque</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/pr/660/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/660/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/pr/660/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/660/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/pr/660/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/pr/660/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/660/blog/dev">
                <span itemprop="name">Dev</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">E-learning sans internet ou presque</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/30e62c59847c4238a2af245089fdb1be.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/30e62c59847c4238a2af245089fdb1be.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/24e1a1d5497bdae74bbb6146bddf9746.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/30e62c59847c4238a2af245089fdb1be.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/24e1a1d5497bdae74bbb6146bddf9746.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/30e62c59847c4238a2af245089fdb1be.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/24e1a1d5497bdae74bbb6146bddf9746.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/30e62c59847c4238a2af245089fdb1be.jpg') 1x,
        url('/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/woman-phone.jpg/24e1a1d5497bdae74bbb6146bddf9746.jpg') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author ">
                        <div class="article-author__image">
                                                            <a>
                                    <img     src="/elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/48b4d8efbc2f597dab26fcb1ed88d540.jpg"
    srcset="
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/48b4d8efbc2f597dab26fcb1ed88d540.jpg 1x,
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/595ecfd31fcd439bed40e88acab04bb4.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/pr/660/blog/auteur/rhanna">
                                    <strong>Richard Hanna</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>22 novembre 2017</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>E-learning sans internet ou presque</h1>
                <p>Retour d&#039;expérience sur la conception de la progressive web app de Chalkboard Education</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/progressive-web-app" rel="nofollow">#ProgressiveWebApp</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/offline" rel="nofollow">#Offline</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/react" rel="nofollow">#React</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/660/blog/tag/symfony" rel="nofollow">#Symfony</a>
                        </li>
                                    </ul>
            </div>
        </div>

                    <ol class="table-of-content" data-aos="fade-up">
                                    <li class="table-of-content__item">
                        <a href="#le-contexte">Le contexte</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#application-native">Application native</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#progressive-web-app">Progressive Web App</a>

                                                    <ol class="table-of-content__sub-level">
                                                                        <li>
                                            <a href="#react-et-redux-3">React et Redux ♥️</a>
                                        </li>
                                                                        <li>
                                            <a href="#demo">Démo</a>
                                        </li>
                                                                        <li>
                                            <a href="#ui-ux-inspirees-des-applications-natives">UI/UX inspirées des applications natives</a>
                                        </li>
                                                                        <li>
                                            <a href="#mobile-first-et-offline-first">Mobile-first et Offline-first</a>
                                        </li>
                                                                        <li>
                                            <a href="#api-graphql-3">API GraphQL ♥️</a>
                                        </li>
                                                                        <li>
                                            <a href="#service-worker">Service worker</a>
                                        </li>
                                                                        <li>
                                            <a href="#le-sms-pour-transporter-de-la-donnee-a-la-place-d-internet">Le SMS pour transporter de la donnée à la place d&#039;Internet</a>
                                        </li>
                                                                        <li>
                                            <a href="#poids-de-la-pwa">Poids de la PWA</a>
                                        </li>
                                                                        <li>
                                            <a href="#audit">Audit</a>
                                        </li>
                                                            </ol>
                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#back-office-et-api-avec-symfony-3">Back office et API avec Symfony ♥️</a>

                                                    <ol class="table-of-content__sub-level">
                                                                        <li>
                                            <a href="#back-office">Back office</a>
                                        </li>
                                                                        <li>
                                            <a href="#graphql-et-symfony">GraphQL et Symfony</a>
                                        </li>
                                                            </ol>
                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#conclusion">Conclusion</a>

                                            </li>
                            </ol>
        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <h2 id="le-contexte" class="anchor-title"><a href="#le-contexte">Le contexte</a></h2>
<p>Dans certains pays africains, le nombre de places disponibles à l'université est très limité.
Par conséquent de nombreux étudiants n'ont pas accès à l'université.
La startup <a href="https://chalkboard.education/" target="_blank">Chalkboard Education</a> implantée au Ghana et en Côte d'Ivoire a pour but de
résoudre ce problème en diffusant les cours d'universités via les téléphones mobiles.
Les étudiant•e•s africains n'ont certes pas forcément le dernier modèle de smartphone ni une connexion Internet fiable
mais cela est suffisant pour accéder à la connaissance.</p>
<p>Reportage de France 24 à propos de Chalkboard Education :</p>
<iframe style="width:100%; height:400px; margin: 0 !important" src="https://www.youtube.com/embed/DWWXSP5YFaw?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
<h2 id="application-native" class="anchor-title"><a href="#application-native">Application native</a></h2>
<p>Elao accompagne Chalkboard Education depuis 2015 sur la conception de son produit.
Une première preuve de concept a été réalisée en <a href="https://facebook.github.io/react-native/" target="_blank">React Native</a> avec pour
résultat une application Android déployée sur Google Play Store à destination de plusieurs centaines d'étudiant•e•s de
l'University Of Ghana.</p>
<p class="text-center">
    <img src="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/app-react-native.png/22576226aa9e1f90d6b4e7cc2d0a77a9.png" alt="React native app" srcset="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/app-react-native.png/22576226aa9e1f90d6b4e7cc2d0a77a9.png 1x,
/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/app-react-native.png/610ce6c91f1c3d01e746e315fbdefa15.png 2x," id="react-native-app">
</p>
<h2 id="progressive-web-app" class="anchor-title"><a href="#progressive-web-app">Progressive Web App</a></h2>
<p>Avec l'émergence des <a href="/elao_/pr/660/blog/dev/la-revanche-du-web-par-les-progressive-web-apps">Progressive Web Apps</a>, nous avons
conseillé Chalkboard Education de revenir au web pour plusieurs raisons :</p>
<ul>
<li>Le public visé est majoritairement sur Android, OS pour lequel actuellement les navigateurs supportent le mieux le
Service Worker et le Web App Manifest, éléments clés du concept de Progressive Web App.</li>
<li>Avec une application web, la couverture des appareils ciblés est beaucoup plus large.</li>
<li>Le coût du développement est moins important que le développement d'applications natives pour Android et iOS.</li>
<li>Le poids d'une web app est beaucoup moins important qu'une application native ce qui est un avantage pour des
populations ayant un accès limité à Internet.</li>
<li>La fréquence de mise à jour est plus simple et ne dépend pas de la bonne volonté des stores d'applications.</li>
</ul>
<p>En quoi Chalkboard Education est une Progressive Web App ?</p>
<ul>
<li>Le <em>front</em> déclare un <a href="https://developer.mozilla.org/fr/docs/Web/Manifest" target="_blank">manifeste d'une application web</a> permettant
d'installer Chalkboard Education sur l'écran d'accueil du smartphone ou tablette.</li>
<li>Utilisation hors-ligne de l'application : tous les contenus sont pré-chargés et mis en cache permettant la consulation
des cours par les étudiant•e•s sans Internet.</li>
</ul>
<h3 id="react-et-redux-3" class="anchor-title"><a href="#react-et-redux-3">React et Redux ♥️</a></h3>
<p>Il était évident pour nous que l'application front devrait être autonome et mise en cache navigateur.
Nous avons fait le choix de
<a href="https://github.com/facebookincubator/create-react-app" target="_blank">React</a>, avec du routing géré par
<a href="https://github.com/ReactTraining/react-router" target="_blank">react-router</a>
et des états gérés par <a href="https://github.com/reactjs/redux" target="_blank">Redux</a>.</p>
<h3 id="demo" class="anchor-title"><a href="#demo">Démo</a></h3>
<p>L'étudiant•e reçoit son accès par SMS contenant un lien permettant de l'identifier. A l'ouverture de l'application, le
contenu des cours est préchargé. La progression du chargement est affichée en haut de l'interface :</p>
<video src="/elao_/pr/660/resources/blog/2017/chalkboard-education/demo-chalkboard.mp4" loop autoplay mute controls style="height:500px; border:1px solid #333"></video>
<h3 id="ui-ux-inspirees-des-applications-natives" class="anchor-title"><a href="#ui-ux-inspirees-des-applications-natives">UI/UX inspirées des applications natives</a></h3>
<p>Pour l'UI de l'application, nous avons utilisé <a href="http://www.material-ui.com/" target="_blank">Material UI</a>, un ensemble de composants
React qui implémente les bonnes pratiques <em>Material Design</em> édictées par Google.</p>
<p class="text-center">
    <img src="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/submit-progression.png/0d1acce8ce7de4084e58d67bf9b24922.png" alt="Submit progression" style="height:500px; border:1px solid #333" srcset="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/submit-progression.png/0d1acce8ce7de4084e58d67bf9b24922.png 1x,
/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/submit-progression.png/cd887e2ceaa3df64ad0f73bf08955a98.png 2x," id="submit-progression">
</p>
<p>Nous avons également travaillé l'UX pour mobile afin de s'approcher de l'UX des applications natives. Pour cela, nous
nous sommes inspirés d'applications existantes et nous nous sommes fixé quelques règles :</p>
<ul>
<li>Barre de navigation fixée en haut.</li>
<li>Éviter les formulaires : un formulaire avec deux champs radio a été remplacé par deux boutons par exemple.</li>
<li>Centrer à l'écran les actions à faire par l'utilisateur.</li>
<li>Ecran simple avec une seule action à faire:
<ul>
<li>choisir un cours dans une liste,</li>
<li>lire un cours et passer à la suite</li>
<li>valider sa progression en choisissant parmi SMS ou Internet...</li>
</ul></li>
</ul>
<p>Le développement était testé sur un ancien smartphone Android avec une ancienne version de Chrome afin de se mettre
quasi en conditions réelles.</p>
<h3 id="mobile-first-et-offline-first" class="anchor-title"><a href="#mobile-first-et-offline-first">Mobile-first et Offline-first</a></h3>
<p>L'application web de Chalkboard Education a été conçue à la fois pour un usage en <em>Mobile-first</em> et un usage en
<em>Offline-first</em>.</p>
<p>L'étudiant•e avec son téléphone connecté à un <em>hotspot wifi</em> télécharge les contenus, cours et images à la première
connexion.</p>
<p>Les contenus sont stockés de différentes manières dans le navigateur de l'étudiant•e:</p>
<ul>
<li>le contenu du cours est dans le store Redux et persisté en
<a href="https://developer.mozilla.org/fr/docs/Web/API/Storage/LocalStorage" target="_blank">localStorage</a>,</li>
<li>les médias (images) du cours sont stockés en
<a href="https://developer.mozilla.org/fr/docs/Web/API/CacheStorage" target="_blank">CacheStorage</a>
grâce au
<a href="https://developer.mozilla.org/fr/docs/Web/API/ServiceWorker" target="_blank">Service Worker</a> déclaré par l'application.</li>
</ul>
<p>L'étudiant•e peut ainsi consulter les cours hors connexions.</p>
<p>Une vérification de mise à jour est faite toutes les 24h si l'utilisateur a une connexion internet.
Il est indiqué le nombre de Ko à télécharger pour chaque mise à jour.</p>
<p><a href="https://github.com/rt2zz/redux-persist" target="_blank">Redux Persist</a> permet de persister le <em>store Redux</em> en
<a href="https://developer.mozilla.org/fr/docs/Web/API/Storage/LocalStorage" target="_blank">LocalStorage</a> et de réhydrater le <em>store</em> dès lors
que la page web est rechargée :</p>
<pre class="code-multiline language-js"><code class="language-js" id="a63d6cd1dcd0a99c459af49e527f4303"><span class="token comment">// store.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ApolloClient</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> createNetworkInterface <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'apollo-client'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> applyMiddleware<span class="token punctuation">,</span> compose<span class="token punctuation">,</span> createStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> autoRehydrate <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'redux-persist'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports">appReducer</span> <span class="token keyword module">from</span> <span class="token string">'../reducers'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports">defaultState</span> <span class="token keyword module">from</span> <span class="token string">'./defaultState'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
  appReducer<span class="token punctuation">,</span>
  defaultState<span class="token punctuation">,</span>
  <span class="token function">compose</span><span class="token punctuation">(</span>
    <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>whateverMiddleware<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">autoRehydrate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// redux persist auto rehydrate the store</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> networkInterface <span class="token operator">=</span> <span class="token function">createNetworkInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">uri</span><span class="token operator">:</span> <span class="token string">'https://api.chalkboard.education'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><em>#protips</em> : pour gérer l'accès à des contenus avec du routing et à la fois que ces contenus soient disponibles
hors-ligne sans que l'url ait été visitée au préalable, il est quasi indispensable d'utiliser des urls avec un
<a href="https://developer.mozilla.org/fr/docs/Web/API/window/location#Propri.C3.A9t.C3.A9s" target="_blank">hash</a>
(/#/whatever) et le <a href="https://reacttraining.com/react-router/web/api/HashRouter" target="_blank">HashRouter</a> de React Router fait le boulot.</p>
<h3 id="api-graphql-3" class="anchor-title"><a href="#api-graphql-3">API GraphQL ♥️</a></h3>
<p>Nous avons choisi d'implémenter une API <a href="http://graphql.org/" target="_blank">GraphQL</a> au lieu de REST :</p>
<ul>
<li>pour minimiser le nombre de requêtes HTTP,</li>
<li>laisser le <em>front</em> choisir les contenus qu'il souhaite utiliser,</li>
<li>parce que GraphQL c'est quand même bien cool.</li>
</ul>
<p>Par exemple dans la requête suivante le <em>front</em> demande à la fois :</p>
<ul>
<li>un <em>currentDate</em> (une date serveur),</li>
<li>la liste des <em>courses</em> (ses <em>folders</em>, les <em>sessions</em> des <em>folders</em>, les <em>files</em> des <em>sessions</em>),</li>
<li>et le <em>user</em> courant.</li>
</ul>
<pre class="code-multiline language-js"><code class="language-js" id="900b4311a8128eaabeda244c2d88ee37"><span class="token comment">// src/graphql/query/CoursesQuery.js</span>
<span class="token keyword module">import</span> <span class="token imports">gql</span> <span class="token keyword module">from</span> <span class="token string">'graphql-tag'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token graphql language-graphql">
  <span class="token punctuation">{</span>
    <span class="token property">currentDate</span>
    <span class="token object">user</span> <span class="token punctuation">{</span>
      <span class="token property">uuid</span>
      <span class="token property">firstName</span>
      <span class="token property">lastName</span>
      <span class="token property">country</span>
      <span class="token property">phoneNumber</span>
      <span class="token property">locale</span>
    <span class="token punctuation">}</span>
    <span class="token object">courses</span> <span class="token punctuation">{</span>
      <span class="token property">uuid</span>
      <span class="token property">title</span>
      <span class="token property">updatedAt</span>
      <span class="token object">folders</span> <span class="token punctuation">{</span>
        <span class="token property">uuid</span>
        <span class="token property">title</span>
        <span class="token property">updatedAt</span>
        <span class="token object">sessions</span> <span class="token punctuation">{</span>
          <span class="token property">uuid</span>
          <span class="token property">title</span>
          <span class="token property">updatedAt</span>
          <span class="token object">files</span> <span class="token punctuation">{</span>
            <span class="token property">url</span>
            <span class="token property">updatedAt</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre>
<p>Nous avons utilisé le très bon client GraphQL <a href="https://github.com/apollographql/apollo-client" target="_blank">Apollo client</a>.
Il existe aussi une implémentation <a href="https://github.com/apollographql/react-apollo" target="_blank">Apollo pour React</a> mais nous
ne l'avons pas utilisée étant donné que notre application n'est pas <em>API-centric</em> : toutes les <em>data</em> sont récupérées
à la première connexion puis à la mise à jour.</p>
<p>Et pour l'identification de l'étudiant•e, on passe le <em>token user</em> dans l'entête HTTP
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization" target="_blank">Authorization</a> de cette façon :</p>
<pre class="code-multiline language-js"><code class="language-js" id="f27d52372a8dc02f6b1fe9d8f5aaf77d"><span class="token comment">// store.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ApolloClient</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> createNetworkInterface <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'apollo-client'</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">GraphqlClient</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span> networkInterface <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

networkInterface<span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Create the header object if needed</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>req<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">headers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">headers</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> userToken <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token method function property-access">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">currentUser</span><span class="token punctuation">.</span><span class="token property-access">token</span><span class="token punctuation">;</span>

      req<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">headers</span><span class="token punctuation">.</span><span class="token property-access">authorization</span> <span class="token operator">=</span> userToken
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userToken<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>

      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="service-worker" class="anchor-title"><a href="#service-worker">Service worker</a></h3>
<p><a href="https://github.com/facebookincubator/create-react-app" target="_blank">Create React App</a> permet facilement de <em>bootstraper</em> un front
avec React et un service worker qui pré charge en cache les assets de l'application (index.html, javascript et css).</p>
<p>Pour mettre en cache les urls chargées au <em>runtime</em> il faut surcharger la configuration du <em>builder</em> du Service Worker
avec <a href="https://github.com/GoogleChromeLabs/sw-precache" target="_blank">sw-precache</a>. On a ajouté une commande "generate-sw" dans notre
fichier package.json :</p>
<pre class="code-multiline language-json"><code class="language-json" id="87ebcac75973f33b89124340e1955da3"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ChalkboardEducationV2ReactFront"</span><span class="token punctuation">,</span>
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...<span class="token punctuation">,</span>
    <span class="token property">"sw-precache"</span><span class="token operator">:</span> <span class="token string">"^5.2.0"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build &amp;&amp; yarn run generate-sw"</span><span class="token punctuation">,</span>
    <span class="token property">"generate-sw"</span><span class="token operator">:</span> <span class="token string">"sw-precache --root='build/' --config config/sw-precache-config.js"</span><span class="token punctuation">,</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test --env=jsdom"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Configuration pour <em>sw-precache</em> pour gérer le <em>runtime caching</em> des images :</p>
<pre class="code-multiline language-js"><code class="language-js" id="1fd42301bc94199e4107edbc675cd441"><span class="token comment">// config/sw-precache-config.js</span>
module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">staticFileGlobs</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'build/**/*.js'</span><span class="token punctuation">,</span>
    <span class="token string">'build/**/*.css'</span><span class="token punctuation">,</span>
    <span class="token string">'build/index.html'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">runtimeCaching</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">urlPattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token special-escape escape">\.</span><span class="token quantifier number">*</span><span class="token special-escape escape">\.</span><span class="token group punctuation">(?:</span>svg<span class="token alternation keyword">|</span>jpg<span class="token alternation keyword">|</span>gif<span class="token alternation keyword">|</span>png<span class="token group punctuation">)</span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">handler</span><span class="token operator">:</span> <span class="token string">'cacheFirst'</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="le-sms-pour-transporter-de-la-donnee-a-la-place-d-internet" class="anchor-title"><a href="#le-sms-pour-transporter-de-la-donnee-a-la-place-d-internet">Le SMS pour transporter de la donnée à la place d'Internet</a></h3>
<p>Sur Chalkboard Education, l'étudiant•e doit valider sa progression. Pour cela il lui est laissé le choix d'utiliser
internet ou... le SMS.</p>
<p class="text-center">
    <img src="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/submit-validation.png/dd906c91b3c9f026385d9d42d61b867a.png" alt="Submit validation by SMS" style="height:500px; border:1px solid #333" srcset="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/submit-validation.png/dd906c91b3c9f026385d9d42d61b867a.png 1x,
/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/submit-validation.png/6d7ab49d620bb24f4d094175ecacf6e4.png 2x," id="submit-validation-by-sms">
</p>
<p>Un code est généré par l'application web. Ce code est envoyé par SMS par l'étudiant•e à un numéro donné.</p>
<p>A noter que pour déclencher la rédaction d'un SMS sous Android, il est possible d'utiliser un lien HTML avec
le <em>scheme</em> <code class="code-inline" id="011b9c49959114e5a18897e14b63bf66">sms:</code></p>
<p><code class="code-inline" id="abe91dd5f98251ccf84acf175722b7bb">&lt;a href="sms:+63344556677?body=Message"&gt;Send SMS&lt;/a&gt;</code></p>
<p>Le back-office reçoit le code, identifie l'étudiant•e et la session concernée. Un SMS contenant un lien + code lui est
envoyé en retour. L'étudiant•e clique sur le lien reçu, même hors-ligne, l'application web décode le code reçu et valide
la session. L'étudiant•e peut ainsi valider la session courante et passer à la session suivante.</p>
<h3 id="poids-de-la-pwa" class="anchor-title"><a href="#poids-de-la-pwa">Poids de la PWA</a></h3>
<p>Lorsqu'on a pour projet de réaliser une progressice web app, il est important de surveiller le poids des fichiers css et
javascript <em>buildés</em>. Sur ce projet, nous avons essayé d'avoir le minimum de dépendances.</p>
<p><code class="code-inline" id="dfa75700390e42c3490a137447d7f688">$ yarn build</code></p>
<pre class="code-multiline language-bash"><code class="language-bash" id="f4a4127f476fe2e448378d9b42befa0d"><span class="token number">276.43</span> KB <span class="token punctuation">(</span>+142 B<span class="token punctuation">)</span>  build/static/js/main.8502d0fb.js
  <span class="token number">587</span> B <span class="token punctuation">(</span>+11 B<span class="token punctuation">)</span>       build/static/css/main.7edcdc8b.css</code></pre>
<p>L'application <em>front</em> pèse ainsi moins de 300 Ko !</p>
<h3 id="audit" class="anchor-title"><a href="#audit">Audit</a></h3>
<p>Le panel Audit de Chrome indique qu'on est plutôt pas mal :</p>
<p class="text-center">
    <img src="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/audit.png/b605051b6be8e89680af17da9440a790.png" alt="Audit" srcset="/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/audit.png/b605051b6be8e89680af17da9440a790.png 1x,
/elao_/pr/660/%2E%2E/../resized/content/images/blog/2017/chalkboard-education/audit.png/18e387ee25c06e267e106e02b440e2a1.png 2x," id="audit">
</p>
<h2 id="back-office-et-api-avec-symfony-3" class="anchor-title"><a href="#back-office-et-api-avec-symfony-3">Back office et API avec Symfony ♥️</a></h2>
<p>Chalkboard Education a besoin d'un back-office d'administration permettant de :</p>
<ul>
<li>gérer les étudiant•e•s (créer, importer),</li>
<li>saisir les contenus des cours,</li>
<li>assigner des cours aux étudiant•e•s,</li>
<li>envoyer un SMS contenant l'url d'accès à un.e étudiant•e,</li>
<li>voir la progression des étudiant•e•s pour chaque cours.</li>
</ul>
<p>Le back-office permet aussi de traiter automatiquement des SMS reçu contenant des codes de validation de session et
d'envoyer à l'étudiant•e un SMS en retour contenant un lien d'activation.</p>
<p>Etant donné que l'on connait bien Symfony, c'était la solution idéale pour rapidement <em>bootstraper</em> le back office
d'administration et l'API.</p>
<p>Toutes nos classes métiers et tous les <em>controllers</em> Symfony sont testés unitairement par Phpunit.
Des scénarios <a href="https://github.com/Behat/Behat" target="_blank">Behat</a> permettent de couvrir également la quasi-totalité des
fonctionnalités du Back-Office.</p>
<h3 id="back-office" class="anchor-title"><a href="#back-office">Back office</a></h3>
<p>Pour tous nos <em>controllers</em>, nous nous sommes inspirés du <em>pattern Action-Domain-Response (ADR)</em> avec les
<a href="http://symfony.com/doc/current/controller/service.html#invokable-controllers" target="_blank">Invokable Controllers</a>.</p>
<p>Cela a beaucoup d'avantages :</p>
<ul>
<li>Une classe <em>controller</em> = une action.</li>
<li>Peu de ligne de code dans un <em>controller</em> : <em>Keep It Simple Stupid</em>.</li>
<li>Cela pousse à découpler le code, et toute logique hors <em>controller</em> est déportée dans des services du domaine.</li>
<li>Une classe de <em>controller</em> est ainsi facilement testable unitairement.</li>
</ul>
<p>Exemple de "nouveau" <em>controller</em> :</p>
<pre class="code-multiline language-php"><code class="language-php" id="c967f7d6551f73b5c8a437bd99bc300c"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Ui<span class="token punctuation">\</span>Admin<span class="token punctuation">\</span>Action<span class="token punctuation">\</span>Course</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Application<span class="token punctuation">\</span>Adapter<span class="token punctuation">\</span>CommandBusInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Application<span class="token punctuation">\</span>Command<span class="token punctuation">\</span>Course<span class="token punctuation">\</span>AssignUser</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Domain<span class="token punctuation">\</span>Model<span class="token punctuation">\</span>Course</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Ui<span class="token punctuation">\</span>Admin<span class="token punctuation">\</span>Form<span class="token punctuation">\</span>Type<span class="token punctuation">\</span>Course<span class="token punctuation">\</span>AssignUserType</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Bundle<span class="token punctuation">\</span>FrameworkBundle<span class="token punctuation">\</span>Templating<span class="token punctuation">\</span>EngineInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>Form<span class="token punctuation">\</span>FormFactoryInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>HttpFoundation<span class="token punctuation">\</span>RedirectResponse</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>HttpFoundation<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>HttpFoundation<span class="token punctuation">\</span>Response</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>HttpFoundation<span class="token punctuation">\</span>Session<span class="token punctuation">\</span>Flash<span class="token punctuation">\</span>FlashBagInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>Routing<span class="token punctuation">\</span>RouterInterface</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">AssignUserAction</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/** <span class="token keyword">@var</span> <span class="token class-name">EngineInterface</span> */</span>
    <span class="token keyword">private</span> <span class="token variable">$engine</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/** <span class="token keyword">@var</span> <span class="token class-name">CommandBusInterface</span> */</span>
    <span class="token keyword">private</span> <span class="token variable">$commandBus</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/** <span class="token keyword">@var</span> <span class="token class-name">FormFactoryInterface</span> */</span>
    <span class="token keyword">private</span> <span class="token variable">$formFactory</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/** <span class="token keyword">@var</span> <span class="token class-name">RouterInterface</span> */</span>
    <span class="token keyword">private</span> <span class="token variable">$router</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/** <span class="token keyword">@var</span> <span class="token class-name">FlashBagInterface</span> */</span>
    <span class="token keyword">private</span> <span class="token variable">$flashBag</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span>
        <span class="token class-name type-declaration">EngineInterface</span> <span class="token variable">$engine</span><span class="token punctuation">,</span>
        <span class="token class-name type-declaration">CommandBusInterface</span> <span class="token variable">$commandBus</span><span class="token punctuation">,</span>
        <span class="token class-name type-declaration">FormFactoryInterface</span> <span class="token variable">$formFactory</span><span class="token punctuation">,</span>
        <span class="token class-name type-declaration">RouterInterface</span> <span class="token variable">$router</span><span class="token punctuation">,</span>
        <span class="token class-name type-declaration">FlashBagInterface</span> <span class="token variable">$flashBag</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">engine</span> <span class="token operator">=</span> <span class="token variable">$engine</span><span class="token punctuation">;</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">commandBus</span> <span class="token operator">=</span> <span class="token variable">$commandBus</span><span class="token punctuation">;</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">formFactory</span> <span class="token operator">=</span> <span class="token variable">$formFactory</span><span class="token punctuation">;</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">router</span> <span class="token operator">=</span> <span class="token variable">$router</span><span class="token punctuation">;</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">flashBag</span> <span class="token operator">=</span> <span class="token variable">$flashBag</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__invoke</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Course</span> <span class="token variable">$course</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Response</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$assign</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AssignUser</span><span class="token punctuation">(</span><span class="token variable">$course</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$form</span> <span class="token operator">=</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">formFactory</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token scope">AssignUserType<span class="token punctuation">::</span></span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token variable">$assign</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">isSubmitted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">commandBus</span><span class="token operator">-&gt;</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">$assign</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">flashBag</span><span class="token operator">-&gt;</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'success'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'flash.admin.course.assign_user.success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RedirectResponse</span><span class="token punctuation">(</span><span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">router</span><span class="token operator">-&gt;</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'admin_course_list'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span class="token property">engine</span><span class="token operator">-&gt;</span><span class="token function">renderResponse</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Admin/Course/assign_users.html.twig'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'form'</span> <span class="token operator">=&gt;</span> <span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">createView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'course'</span> <span class="token operator">=&gt;</span> <span class="token variable">$course</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p>Nous avons utilisé <a href="https://symfony.com/doc/current/service_container/autowiring.html" target="_blank">l'autowiring des services</a>
qui rend beaucoup plus simple la gestion des dépendances:</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="38866e4a5b7acd436a02900c357b5b26"><span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">_defaults</span><span class="token punctuation">:</span>
        <span class="token comment"># automatically injects dependencies in services</span>
        <span class="token key atrule">autowire</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token comment"># automatically registers your services as commands, event subscribers, etc.</span>
        <span class="token key atrule">autoconfigure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token comment"># example:</span>
    <span class="token key atrule">App\Ui\Admin\Action\Course\AssignUserAction</span><span class="token punctuation">:</span>
        <span class="token key atrule">autowire</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre>
<h3 id="graphql-et-symfony" class="anchor-title"><a href="#graphql-et-symfony">GraphQL et Symfony</a></h3>
<p>Pour concevoir un serveur d'API GraphQL, nous avons utilisé le bundle Symfony
<a href="https://github.com/overblog/GraphQLBundle" target="_blank">overblog/GraphQLBundle</a>
lui-même utilisant l'implémentation en PHP de <a href="https://github.com/webonyx/graphql-php" target="_blank">webonyx/graphql-php</a>.</p>
<p>Déclaration d'un schéma d'un cours :</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="70811d0a2c9ba6c892a7f19f4ef185b2"><span class="token key atrule">Course</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"A course"</span>
        <span class="token key atrule">fields</span><span class="token punctuation">:</span>
            <span class="token key atrule">uuid</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"String!"</span>
                <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"The uuid of the course."</span>
            <span class="token key atrule">title</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"String!"</span>
                <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"The title of the course."</span>
            <span class="token key atrule">updatedAt</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"DateTime!"</span>
                <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"The last update date of the course in format 2017-01-15 10:00"</span>
            <span class="token key atrule">folders</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"[Folder]"</span></code></pre>
<p>Déclaration d'un <em>resolver</em> d'un cours :</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="0428f08af45bc28bbba62710eddcd7e2"><span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">App\Infrastructure\GraphQL\Resolver\CourseResolver</span><span class="token punctuation">:</span>
        <span class="token key atrule">autowire</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">tags</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> overblog_graphql.resolver<span class="token punctuation">,</span> <span class="token key atrule">alias</span><span class="token punctuation">:</span> <span class="token string">"courses"</span><span class="token punctuation">,</span> <span class="token key atrule">method</span><span class="token punctuation">:</span> <span class="token string">"resolveCourses"</span> <span class="token punctuation">}</span></code></pre>
<p>Nous avions des besoins assez simples. La mise en place d'un serveur GraphQL n'est vraiment pas plus compliqué que REST.</p>
<h2 id="conclusion" class="anchor-title"><a href="#conclusion">Conclusion</a></h2>
<p>Nous avons adoré travailler sur React / Redux / GraphQL, à réfléchir l'utilisation d'une application web en hors-ligne
tout en faisant attention de bien penser l'UI/UX pour mobile.</p>
<p>Nous avons adoré travailler avec le <em>pattern Action-Domain-Response</em> pour des <em>controllers</em> Symfony sexy.</p>
<p>Et par dessus tout, nous avons adoré que notre travail permette à des étudiant•e•s d'accéder à la connaissance.</p>
<blockquote>
« J'espère qu'avec Chalkboard Education chacun aura accès à l'éducation dont il rêve et qu'à mon échelle,
je vais faire progresser le monde. »
</blockquote>
<p>Adrien, cofondateur de Chalkboard Education</p>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a>
                                <img     src="/elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/48b4d8efbc2f597dab26fcb1ed88d540.jpg"
    srcset="
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/48b4d8efbc2f597dab26fcb1ed88d540.jpg 1x,
        /elao_/pr/660/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/595ecfd31fcd439bed40e88acab04bb4.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a>
                                <strong>Richard Hanna</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                            <a
                                    href="https://twitter.com/richardhanna"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--x" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte Twitter de Richard Hanna</span>
                                </a>
                                                                                                                    <a
                                    href="https://github.com/supertanuki"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Richard Hanna</span>
                                </a>
                                                                                        <a href="http://www.elao.com"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--website" aria-hidden="true"></i>
                                    <span class="screen-reader">Site personnel de Richard Hanna</span>
                                </a>
                                                    </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/feature/add-carriere-page/content/blog/dev/progressive-web-app-chalkboard-education-elearning-sans-internet.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/660/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/660/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/660/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                                                <a href="/elao_/pr/660/recrutement">
                            Nous recrutons
                                                            <span class="bullet">1</span>
                                                    </a>
                    </li>
                    <li>
                        <a href="/elao_/pr/660/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/660/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                    <li>
                        <a href="https://bsky.app/profile/elao.com" target="_blank">
                            <i class="icon icon--bluesky"></i>
                            Bluesky
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            X
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/pr/660/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2025 - ELAO - Tous droits réservés</span>
            <a href="/elao_/pr/660/legal">Mentions légales</a>
            <a href="/elao_/pr/660/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
