<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Le web n&#039;est pas mort, la revanche par les Progressives Web Apps</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/662/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/662/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/662/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/662/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/662/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/662/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/662/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Les Progressives Web Apps ont pour objectif de rivaliser avec les apps natives. Voyons comment cela fonctionne et le gain que cela apporte à vos utilisateurs." />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/662/blog/dev/la-revanche-du-web-par-les-progressive-web-apps" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Le web n&#039;est pas mort, la revanche par les Progressives Web Apps" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Les Progressives Web Apps ont pour objectif de rivaliser avec les apps natives. Voyons comment cela fonctionne et le gain que cela apporte à vos utilisateurs." />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/662/blog/dev/la-revanche-du-web-par-les-progressive-web-apps" />
            <meta property="og:site_name" content="elao_" />

                                        <meta property="og:image" content="https://elao.github.io/elao_/pr/662/%2E%2E/../resized/content/images/blog/thumbnails/pwa-general.jpg/6729298e4fce53c736a6836a7d0b94d2.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Le web n&#039;est pas mort, la revanche par les Progressives Web Apps">
            <meta property="twitter:description" content="Les Progressives Web Apps ont pour objectif de rivaliser avec les apps natives. Voyons comment cela fonctionne et le gain que cela apporte à vos utilisateurs.">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/662/%2E%2E/../resized/content/images/blog/thumbnails/pwa-general.jpg/8b8a6d83277b1b81c9dc145044f511b5.jpg">
                            <link rel="alternate" type="application/rss+xml" href="/elao_/pr/662/blog/rss.xml" title="Le blog de l'équipe d'Elao" />
        
                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Le web n'est pas mort, la revanche par les Progressives Web Apps",
    "image": [
        "https://elao.github.io/elao_/pr/662/blog/dev/content/images/blog/thumbnails/pwa-general.jpg"
    ],
    "datePublished": "2016-12-05T00:00:00+00:00",
    "dateModified": "2016-12-05T00:00:00+00:00",
    "author": [
        {
            "@type": "Person",
            "name": "Richard Hanna",
            "url": "https://elao.github.io/elao_/pr/662/equipe"
        }
    ],
    "keywords": [
        "Progressive web app",
        "Service worker",
        "Mobile",
        "Offline"
    ]
}
    </script>
    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/662/build/app.4c8d3e4a.css">
        
                        <script src="/elao_/pr/662/build/runtime.ecc1016d.js" defer></script><script src="/elao_/pr/662/build/947.b56b79b1.js" defer></script><script src="/elao_/pr/662/build/769.7dfbbe52.js" defer></script><script src="/elao_/pr/662/build/app.e47fd89c.js" defer></script>

                    

    <script src="https://platform.twitter.com/widgets.js"></script>
    <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

    <script>
        window.onload = (function(){
            var tweets = document.querySelectorAll('.tweet-container');
            tweets.forEach(function(tweet) {
                // https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/guides/embedded-tweet-parameter-reference
                twttr.widgets.createTweet(tweet.getAttribute('data-tweet-id'), tweet, {
                    conversation: 'none',
                    cards: 'hidden',
                    theme: 'light',
                    lang: 'fr',
                    align: 'center',
                    width: 550, // default
                    dnt: true,
                })
            })
        });
    </script>

        <!-- S.E.E. -->
        <meta name="see" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;662&#x5C;&#x2F;build&#x5C;&#x2F;see.80fe75b7.js&quot;&#x5D;">
        <meta name="see_style" content="&#x5B;&quot;&#x5C;&#x2F;elao_&#x5C;&#x2F;pr&#x5C;&#x2F;662&#x5C;&#x2F;build&#x5C;&#x2F;see.d77e78f8.css&quot;&#x5D;">
    </head>
    <body
        data-controller="swup-plugins symfony--ux-swup--swup swup-matomo" data-symfony--ux-swup--swup-containers-value="&#x5B;&quot;&#x23;main&quot;,&quot;&#x23;nav&quot;&#x5D;" data-symfony--ux-swup--swup-cache-value="true" data-symfony--ux-swup--swup-animate-history-browsing-value="true" data-symfony--ux-swup--swup-debug-value="false" data-symfony--ux-swup--swup-link-selector-value="a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;662&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;662&#x2F;_profiler&quot;&#x5D;&#x29;,a&#x5B;href&#x5E;&#x3D;&quot;&#x2F;&quot;&#x5D;&#x3A;not&#x28;&#x5B;data-no-swup&#x5D;&#x29;&#x3A;not&#x28;&#x5B;target&#x3D;&quot;_blank&quot;&#x5D;&#x29;&#x3A;not&#x28;a&#x5B;href&#x5E;&#x3D;&quot;https&#x3A;&#x2F;&#x2F;elao.github.io&#x2F;elao_&#x2F;pr&#x2F;662&#x2F;_profiler&quot;&#x5D;&#x29;" data-swup-matomo-enabled-value="false">
                    <header id="nav" class="header">
                <div class="container">
                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/662/">
                        <span class="screen-reader">Le web n&#039;est pas mort, la revanche par les Progressives Web Apps</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>

                                            <!-- Desktop nav -->
                        <nav class="nav">
                            <ul>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/662/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/662/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/662/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/662/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/662/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item nav__item--active">
                                        <a href="/elao_/pr/662/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav__item ">
                                        <a href="/elao_/pr/662/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                    
                                            <!-- Mobile nav -->
                        <nav class="nav-mobile" data-controller="toggle">
                            <div class="nav-mobile__header">
                                <a href="/elao_/pr/662/">
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                                </a>
                                <button class="nav-toggle nav-toggle--close">
                                    <i class="icon icon--close" aria-hidden="true"></i>
                                    <span class="screen-reader">Fermer le menu</span>
                                </button>
                            </div>
                            <ul>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/662/nos-services/">
                                                                                        <span>Services</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/662/demarche">
                                                                                        <span>Démarche</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/662/etudes-de-cas">
                                                                                        <span>Études de cas</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/662/nos-valeurs">
                                                                                        <span>Valeurs</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  ">
                                        <a href="/elao_/pr/662/equipe">
                                                                                        <span>L&#039;équipe</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item nav-mobile__item--active ">
                                        <a href="/elao_/pr/662/blog">
                                                                                        <span>Blog</span>
                                        </a>
                                    </li>
                                                                    <li class="nav-mobile__item  nav-mobile__item--large">
                                        <a href="/elao_/pr/662/contact">
                                                                                            <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                        <span>Contact</span>
                                        </a>
                                    </li>
                                                            </ul>
                        </nav>
                        <button class="nav-toggle nav-toggle--open">
                            <i class="icon icon--hamburger" aria-hidden="true"></i>
                            <span class="screen-reader">Ouvrir le menu</span>
                        </button>
                                    </div>
            </header>
                <main id="main">
                <div class="container">
                                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/662/">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/662/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/662/blog/dev">
                <span itemprop="name">Dev</span>
            </a>
            <meta itemprop="position" content="3" />
        </li>        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Le web n&#039;est pas mort, la revanche par les Progressives Web Apps</span>
            </a>
            <meta itemprop="position" content="4" />
        </li></ol>

        
        <div class="article-banner">
            <div
                class="article-banner__cover"
                style="background: #f1f1f1 url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/d51f7d6eb3b84c59886553ddeb662a65.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/d51f7d6eb3b84c59886553ddeb662a65.jpg') 1x,
        url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/560bf434e559415b75a529b8cfb6ec32.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/d51f7d6eb3b84c59886553ddeb662a65.jpg') 1x,
        url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/560bf434e559415b75a529b8cfb6ec32.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/d51f7d6eb3b84c59886553ddeb662a65.jpg') 1x,
        url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/560bf434e559415b75a529b8cfb6ec32.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/d51f7d6eb3b84c59886553ddeb662a65.jpg') 1x,
        url('/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/pwa-general.jpg/560bf434e559415b75a529b8cfb6ec32.jpg') 2x
    );"
                data-aos="fade-down"
            ></div>

            <div class="article-info" data-aos="zoom-in">
                                                    <div class="article-author ">
                        <div class="article-author__image">
                                                            <a>
                                    <img     src="/elao_/pr/662/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/48b4d8efbc2f597dab26fcb1ed88d540.jpg"
    srcset="
        /elao_/pr/662/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/48b4d8efbc2f597dab26fcb1ed88d540.jpg 1x,
        /elao_/pr/662/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/595ecfd31fcd439bed40e88acab04bb4.jpg 2x
    "
 />
                                </a>
                                                    </div>
                        <span class="article-author__info">
                            Écrit par
                                                            <a href="/elao_/pr/662/blog/auteur/rhanna">
                                    <strong>Richard Hanna</strong>
                                </a>
                                                    </span>
                    </div>
                                <div class="article-info__date">
                    <span>Publication <strong>5 décembre 2016</strong></span>
                                                        </div>
            </div>

            <div class="article-header" data-aos="zoom-in-up">
                <h1>Le web n&#039;est pas mort, la revanche par les Progressives Web Apps</h1>
                <p>Les Progressives Web Apps ont pour objectif de rivaliser avec les apps natives. Voyons comment cela fonctionne et le gain que cela apporte à vos utilisateurs.</p>
                <ul class="article-tag-list">
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/662/blog/tag/progressive-web-app" rel="nofollow">#ProgressiveWebApp</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/662/blog/tag/service-worker" rel="nofollow">#ServiceWorker</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/662/blog/tag/mobile" rel="nofollow">#Mobile</a>
                        </li>
                                            <li class="article-tag-list__item">
                            <a href="/elao_/pr/662/blog/tag/offline" rel="nofollow">#Offline</a>
                        </li>
                                    </ul>
            </div>
        </div>

                    <ol class="table-of-content" data-aos="fade-up">
                                    <li class="table-of-content__item">
                        <a href="#qu-est-ce-qu-une-progressive-web-app">Qu&#039;est ce qu&#039;une Progressive Web App ?</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#le-service-worker">Le Service Worker</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#le-web-app-manifest">Le Web App Manifest</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#push-notifications">Push Notifications</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#demos">Démos</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#outils">Outils</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#ils-en-sont-ou-safari-et-ios">Ils en sont où Safari et iOS ?</a>

                                            </li>
                                    <li class="table-of-content__item">
                        <a href="#et-apres">Et après ?</a>

                                            </li>
                            </ol>
        
        <div class="article-content">
            <main class="article-content__main">

                
                
                <p><small>Temps de lecture : 15 minutes</small></p>
<p>En 2010, le magazine américain Wired titrait "<a href="https://www.wired.com/2010/08/ff_webrip/" target="_blank">The web is dead</a>"
et prédisait que les apps allaient remplacer le web.
Retournement de veste en 2014 lorsque ce même magazine annonce "<a href="https://www.wired.com/insights/2014/02/web-dead/" target="_blank">The web is not dead</a>".
L'installation d'apps n'a finalement pas pris le dessus sur l'utilisation du web.
En réalité la plupart des gens <a href="http://www.recode.net/2016/6/8/11883518/app-boom-over-snapchat-uber" target="_blank">n'installent ou n'utilisent que très peu d'apps</a>, celles des messageries et des réseaux sociaux.
Au contraire, l'usage du web en position de mobilité a explosé.</p>
<p>La plupart des sources citées dans cet article sont des sites Google ou des blogs de ses ingénieurs,
tout simplement parce que les contenus sont de qualité.
Cela s'explique car le mastondonte américain fait un lobby de dingue pour pousser les Progressives web apps et faire plier son rival Apple, qui est en retard en la matière.
Et honnêtement, Google n'a pas tout à fait tort. Voici pourquoi.</p>
<h2 id="qu-est-ce-qu-une-progressive-web-app" class="anchor-title"><a href="#qu-est-ce-qu-une-progressive-web-app">Qu'est ce qu'une Progressive Web App ?</a></h2>
<ul>
<li><strong>Amélioration progressive</strong> : le site fonctionne pour n'importe quel utilisateur quel que soit le navigateur utilisé. Seuls les navigateurs modernes (comprendre Chrome et Firefox) profiteront de toutes les possibilités.</li>
<li><strong>Responsive</strong> : s'ajuste à la taille de l'écran, sur ordinateur, mobile ou tablette.</li>
<li><strong>Indépendant de la connexion</strong> : expérience améliorée grâce au Service Worker qui permet à l'application de fonctionner hors connexion ou en très bas débit.</li>
<li><strong>Sécurité garantie</strong> : l'utilisation d'un Service Worker est conditionnée par le fait que le site est délivré en https.</li>
<li><strong>Ré-engagement de l'utilisateur</strong> grâce :
<ul>
<li>aux notifications push,</li>
<li>à la possibilité d'installer un icône de raccourci comme pour une application native sur l'écran d'accueil de l'appareil (sur mobile, tablette...).</li>
</ul></li>
<li><strong>Légère et rapide</strong> : le poids d'une app native est souvent minimum x10 par rapport à son équivalent web optimisé pour mobile.
Dans nos contrées où le haut-débit, la 4G et le forfait data quasi illimité sont des normes, il en n'est pas de même dans les pays en voie de développement.
De plus, nous ne profitons pas toujours d'une connectivité ou d'un débit constant.
Dans les transports souterrains, dans un lieu confiné ou dans de lointaines campagnes, il n'est pas rare d'être complètement "déconnecté".</li>
</ul>
<h3 id="des-retours-sur-investissement-assez-impressionnants" class="anchor-title"><a href="#des-retours-sur-investissement-assez-impressionnants">Des retours sur investissement assez impressionnants</a></h3>
<ul>
<li><a href="https://developers.google.com/web/showcase/2016/aliexpress" target="_blank">AliExpress</a> : 104% de nouveaux utilisateurs quelque soit le navigateur utilisé ; 82% de hausse du taux de conversion des utilisateurs iOS,</li>
<li><a href="https://developers.google.com/web/showcase/2016/extra" target="_blank">eXtra Electronics</a> : 100% d'augmentation des ventes avec les Web Push Notifications,</li>
<li><a href="https://developers.google.com/web/showcase/2016/jumia" target="_blank">Jumia</a> : 9 fois plus de conversions de paniers abandonnés avec les Web Push Notifications,</li>
<li><a href="https://developers.google.com/web/showcase/2016/5miles" target="_blank">5miles</a> : 30% de hausse de la conversion des utilisateurs qui passent par l'app placée en écran d'accueil.</li>
</ul>
<h2 id="le-service-worker" class="anchor-title"><a href="#le-service-worker">Le Service Worker</a></h2>
<p>Depuis plusieurs années, il existe une technologie planquée dans nos navigateurs permettant de gérer du cache et donc de faire du hors-ligne : <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Utiliser_Application_Cache" target="_blank">Application Cache</a>
mais celle-ci est dépréciée au profit du <a href="https://developer.mozilla.org/fr/docs/Web/API/Service_Worker_API/Using_Service_Workers" target="_blank">Service Worker</a>.</p>
<h3 id="comment-ca-marche" class="anchor-title"><a href="#comment-ca-marche">Comment ça marche ?</a></h3>
<p>Un service worker est déclaré ainsi dans le code JavaScript de vos pages :</p>
<pre class="code-multiline language-js"><code class="language-js" id="e9c4570ade762079d0c0d3d9563b5061"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> <span class="token dom variable">navigator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">serviceWorker</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token string">'/service-worker.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>On dit alors que le Service Worker est "<em>registered</em>" dans le navigateur.
De plus, le scope est très important : /service-worker.js à la racine du domaine signifie que le service worker est disponible pour l'ensemble du domaine.
S'il était dans un répertoire /blog/service-worker.js, il ne fonctionnerait que sur les pages dont les urls commencent par /blog/.</p>
<p>Et notre service-worker.js dans tout ça ? Et bien, il contient des écouteurs d'évènements :</p>
<pre class="code-multiline language-js"><code class="language-js" id="724e40f36427e3aa447a557a0bf85741">self<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'install'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Service worker install'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Service worker ready'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="gestion-du-cache" class="anchor-title"><a href="#gestion-du-cache">Gestion du cache</a></h3>
<p>La mise en cache de ressources se fait ainsi dans notre Service Worker :</p>
<pre class="code-multiline language-js"><code class="language-js" id="ef07ec97ab1835c55f0e1b6f2474765c"><span class="token keyword">var</span> <span class="token constant">CACHE_NAME</span> <span class="token operator">=</span> <span class="token string">'my-cache-v1'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> urlsToCache <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'/'</span><span class="token punctuation">,</span>
  <span class="token string">'/styles/main.css'</span><span class="token punctuation">,</span>
  <span class="token string">'/script/main.js'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'install'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token method function property-access">waitUntil</span><span class="token punctuation">(</span>
    caches<span class="token punctuation">.</span><span class="token method function property-access">open</span><span class="token punctuation">(</span><span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cache</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> cache<span class="token punctuation">.</span><span class="token method function property-access">addAll</span><span class="token punctuation">(</span>urlsToCache<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>La récupération de ressources en cache se fait en écoutant l'évènement "fetch".
Si la ressource n'est pas trouvée en cache, on tente notre chance via le réseau :</p>
<pre class="code-multiline language-js"><code class="language-js" id="ff2cd0be2c88ec70c5679040c581c06e">self<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'fetch'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token method function property-access">respondWith</span><span class="token punctuation">(</span>
    caches<span class="token punctuation">.</span><span class="token method function property-access">match</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">request</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword control-flow">return</span> response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// use the network to fetch request</span>
        <span class="token keyword control-flow">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Modifions notre code précédent pour mettre en cache la ressource récupérée du réseau :</p>
<pre class="code-multiline language-js"><code class="language-js" id="9422435414994d6f4d4a4bab0832f4b7"><span class="token comment">// we need to clone the response.</span>
<span class="token keyword">var</span> fetchRequest <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token property-access">request</span><span class="token punctuation">.</span><span class="token method function property-access">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>fetchRequest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Check if we received a valid response</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response <span class="token operator">||</span> response<span class="token punctuation">.</span><span class="token property-access">status</span> <span class="token operator">!==</span> <span class="token number">200</span> <span class="token operator">||</span> response<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">!==</span> <span class="token string">'basic'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> response<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// we need to clone it so we have two streams.</span>
    <span class="token keyword">var</span> responseToCache <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token method function property-access">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    caches<span class="token punctuation">.</span><span class="token method function property-access">open</span><span class="token punctuation">(</span><span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cache</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cache<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">request</span><span class="token punctuation">,</span> responseToCache<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">return</span> response<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Il s'agit ici d'un exemple simple. La gestion du cache n'est pas forcément triviale.
De nombreuses stratégies de gestion du cache existent.
Jake Archibald, un des ingénieurs de Google a écrit un article complet à ce sujet : <a href="https://jakearchibald.com/2014/offline-cookbook/" target="_blank">The offline cookbook</a>.
Il n'y a pas de "meilleure solution"; tout dépendra de votre besoin.</p>
<h3 id="mise-a-jour-d-un-service-worker" class="anchor-title"><a href="#mise-a-jour-d-un-service-worker">Mise à jour d'un Service Worker</a></h3>
<p>Pour mettre à jour un Service Worker ou les ressources mises en cache par le Service Worker, il faut supprimer les ressources en cache.</p>
<pre class="code-multiline language-js"><code class="language-js" id="39d805549ac78676dc38503644ceeb57">self<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> cacheWhitelist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'pages-cache-v1'</span><span class="token punctuation">,</span> <span class="token string">'blog-posts-cache-v1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  event<span class="token punctuation">.</span><span class="token method function property-access">waitUntil</span><span class="token punctuation">(</span>
    caches<span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cacheNames</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">all</span><span class="token punctuation">(</span>
        cacheNames<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cacheName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cacheWhitelist<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>cacheName<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword control-flow">return</span> caches<span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span>cacheName<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Les nouvelles versions des fichiers seront alors récupérées au prochain chargement de la page, via l'évènement "install" vu plus haut dans cet article.</p>
<h3 id="architecture" class="anchor-title"><a href="#architecture">Architecture</a></h3>
<p>Pour booster vos web apps, il est recommandé d'opter pour une architecture de type "App Shell".
C'est à dire que vous fournissez une coquille vide contenant la présentation de votre app (html, js, css, images).
Ces ressources sont mises en cache et n'ont pas besoin d'être retéléchargées à chaque requête.
Ensuite, les données sont récupérées via des <em>fetch</em> d'API par exemple et viennent s'insérer dans votre présentation à l'aide par exemple de votre framework Frontend préféré.
Les requêtes à ces API peuvent elles-mêmes être mises en cache.</p>
<p class="text-center">
    <img src="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/appshell.png/c832db4f960bb07574bd91dea0994c60.png" alt="Appshell" style="max-width:80%" srcset="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/appshell.png/c832db4f960bb07574bd91dea0994c60.png 1x,
/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/appshell.png/bd88ae70b32f9fdd171eb39b4913bebe.png 2x," id="appshell">
</p>
<h3 id="c-est-reserve-aux-apps-mobiles" class="anchor-title"><a href="#c-est-reserve-aux-apps-mobiles">C'est réservé aux apps mobiles ?</a></h3>
<p>Il est vrai que le problème de connectivité, on l'a surtout en position de mobilité et grâce à la gestion du cache, une web app reste utilisable même en mode déconnecté.
Mais rien ne vous empêche d'utiliser un Service Worker pour booster vos applications web <em>desktop</em>.
Les mastodontes tels que Gmail ou Facebook les utilisent couramment.</p>
<h2 id="le-web-app-manifest" class="anchor-title"><a href="#le-web-app-manifest">Le Web App Manifest</a></h2>
<p>Le Web App Manifest a pour but de permettre l'installation des applications Web sur l'écran d'accueil d'un appareil, notamment sur les smartphones,
offrant aux utilisateurs un accès plus rapide.</p>
<p>L'ouverture du site dans le navigateur se présente comme une application native avec également un Splash Screen :</p>
<p class="text-center">
    <img src="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/splashscreen.gif/b7882a9c8e3659d39d3b704f0eaad9b8.gif" alt="splashscreen" style="max-width:80%" id="splashscreen">
</p>
<p>Ce Web App Manifest se présente sous forme d'un fichier json :</p>
<pre class="code-multiline language-json"><code class="language-json" id="0896c690edd9ccd39b2c1244905a3083"><span class="token punctuation">{</span>
  <span class="token property">"short_name"</span><span class="token operator">:</span> <span class="token string">"Elao App"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Elao, agence web agile"</span><span class="token punctuation">,</span>
  <span class="token property">"icons"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"src"</span><span class="token operator">:</span> <span class="token string">"logo-icon-1x.png"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>
      <span class="token property">"sizes"</span><span class="token operator">:</span> <span class="token string">"48x48"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"src"</span><span class="token operator">:</span> <span class="token string">"logo-icon-2x.png"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>
      <span class="token property">"sizes"</span><span class="token operator">:</span> <span class="token string">"96x96"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"src"</span><span class="token operator">:</span> <span class="token string">"logo-icon-4x.png"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>
      <span class="token property">"sizes"</span><span class="token operator">:</span> <span class="token string">"192x192"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"start_url"</span><span class="token operator">:</span> <span class="token string">"/?utm_source=homescreen"</span><span class="token punctuation">,</span>
  <span class="token property">"background_color"</span><span class="token operator">:</span> <span class="token string">"#2196F3"</span><span class="token punctuation">,</span>
  <span class="token property">"display"</span><span class="token operator">:</span> <span class="token string">"standalone"</span>
<span class="token punctuation">}</span></code></pre>
<p>À noter :</p>
<ul>
<li>Dans notre <em>start_url</em> on a inséré un paramètre <em>utm_source</em> pour collecter par exemple via Analytics les stats utilisateurs ayant installé l'app sur leur écran d'accueil.</li>
<li>Pour simuler un affichage de style App native dans notre navigateur, c'est à dire sans l'interface du navigateur, on a spécifié pour "display" la valeur "standalone". Sinon on peut utiliser la valeur par défaut "browser".</li>
<li>De plus, on peut forcer l'orientation de l'affichage, par exemple en mode paysage cela donne <code class="code-inline" id="7ef0cdb219dc34d0ba1306e0707cd1c8">"orientation": "landscape"</code>.</li>
</ul>
<p>Dans votre <code class="code-inline" id="babd0daf38a8ba8a6c33c4d1d354eb56">&lt;head&gt;</code> html, il suffit de déclarer votre manifest de la façon suivante :</p>
<pre class="code-multiline language-html"><code class="language-html" id="1b3f1ba70d5abf0f24b7813af4ddbc77"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manifest<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/manifest.json<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
<h3 id="banniere-d-installation-sur-l-ecran-d-accueil" class="anchor-title"><a href="#banniere-d-installation-sur-l-ecran-d-accueil">Bannière d'installation sur l'écran d'accueil</a></h3>
<p>À quel moment le "prompt" ou bannière d'installation sur l'écran d'accueil s'affiche ?</p>
<p>En tant que développeur, il n'est pas possible de déclencher cet évènement.
C'est le navigateur qui décide de l'afficher sous certaines conditions.
Par exemple, les conditions de Chrome sont (liste non exhaustive) :</p>
<ul>
<li>l'utilisateur a visité deux fois la page dans les 5 minutes,</li>
<li>un web app manifest est déclaré,</li>
<li>un Service worker est enregistré.</li>
</ul>
<p>Et ces conditions peuvent changer dans les futures versions des navigateurs !</p>
<p>En tant que développeur, on peut toutefois attraper cet évènement et l'afficher plus tard par exemple en attendant que l'utilisateur réalise une "action positive" sur notre application.
Afin qu'il soit sollicité dans le bon timing.
Par exemple, dans le code ci-dessous, nous allons sauvegarder le prompt en écoutant l'évènement "beforeinstallprompt"
et différer l'affichage lorsque l'utilisateur aura cliqué sur un bouton :</p>
<pre class="code-multiline language-js"><code class="language-js" id="90636ac774159374204a358981d07ab0"><span class="token keyword">var</span> deferredPrompt<span class="token punctuation">;</span>

<span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeinstallprompt'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Stash the event so it can be triggered later.</span>
  deferredPrompt <span class="token operator">=</span> e<span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

btnSave<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>deferredPrompt <span class="token operator">!==</span> <span class="token keyword nil">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    deferredPrompt<span class="token punctuation">.</span><span class="token method function property-access">prompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    deferredPrompt<span class="token punctuation">.</span><span class="token property-access">userChoice</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">choiceResult</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>choiceResult<span class="token punctuation">.</span><span class="token property-access">outcome</span> <span class="token operator">==</span> <span class="token string">'accepted'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'App added to home screen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'User cancelled home screen install'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      deferredPrompt <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="push-notifications" class="anchor-title"><a href="#push-notifications">Push Notifications</a></h2>
<p>Les Push et les Notifications sont deux technologies différentes mais complémentaires :</p>
<ul>
<li>l'<a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API" target="_blank">API Push</a> est utilisée lorsqu'un serveur sur Internet envoi une notification attrapée et traitée par le service worker sur notre navigateur</li>
<li>l'<a href="https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API" target="_blank">API Notifications</a> permet au Service Worker d'afficher la notification à l'utilisateur.</li>
</ul>
<h3 id="l-api-push-ou-demander-a-l-utilisateur-de-souscrire-aux-notifications" class="anchor-title"><a href="#l-api-push-ou-demander-a-l-utilisateur-de-souscrire-aux-notifications">L'API Push ou demander à l'utilisateur de souscrire aux notifications</a></h3>
<p>Cela se passe ainsi, non pas dans le Service Worker mais dans le code JavaScript de vos pages :</p>
<pre class="code-multiline language-js"><code class="language-js" id="0f48e32ea4a3b6a0a9618ccd26c23126"><span class="token keyword">var</span> swRegistration<span class="token punctuation">;</span>
<span class="token keyword">var</span> isSubscribed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> <span class="token dom variable">navigator</span> <span class="token operator">&amp;&amp;</span> <span class="token string">'PushManager'</span> <span class="token keyword">in</span> <span class="token dom variable">window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Register the Service Worker</span>
  <span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">serviceWorker</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token string">'/myserviceworker.js'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">serviceWorkerRegistered</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    swRegistration <span class="token operator">=</span> serviceWorkerRegistered<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'Service Worker Error'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Set the initial subscription value</span>
  swRegistration<span class="token punctuation">.</span><span class="token property-access">pushManager</span><span class="token punctuation">.</span><span class="token method function property-access">getSubscription</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">subscription</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isSubscribed <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span>subscription <span class="token operator">===</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isSubscribed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'User IS subscribed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'User is NOT subscribed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// On click on a "Subscribe to notification" button, call the pushManager to subscribe the user</span>
  myButton<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>swRegistration <span class="token operator">!==</span> <span class="token keyword nil">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> applicationServerKey <span class="token operator">=</span> <span class="token function">urlB64ToUint8Array</span><span class="token punctuation">(</span><span class="token string">"yourApplicationServerPublicKey"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    swRegistration<span class="token punctuation">.</span><span class="token property-access">pushManager</span><span class="token punctuation">.</span><span class="token method function property-access">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">userVisibleOnly</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">applicationServerKey</span><span class="token operator">:</span> applicationServerKey
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">subscription</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'User is subscribed:'</span><span class="token punctuation">,</span> subscription<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// We need to implement something to save the subscription, for example an API call to save it on our database</span>
      <span class="token comment">// updateSubscriptionOnServer(subscription);</span>

      isSubscribed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to subscribe the user: '</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Le paramètre "userVisibleOnly: true" est une option mais il est en réalité requis.
Cela permet de s'engager qu'une notification sera affichée à chaque fois qu'il y aura un Push.</p>
<p>Et pour en savoir plus sur comment obtenir le paramètre <em>applicationServerKey</em>,
consultez cet article : <a href="https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/sending-messages#generating-the-key" target="_blank">Generating the applicationServerKey</a>.</p>
<p>Exemple d'objet Subscription généré par le navigateur :</p>
<pre class="code-multiline language-json"><code class="language-json" id="8095f7edfa82b3d8551a1850feb4aa06"><span class="token punctuation">{</span>
  <span class="token property">"endpoint"</span><span class="token operator">:</span> <span class="token string">"https://example.com/push-service/send/dbDqU8xX10w:APA91b..."</span><span class="token punctuation">,</span>
  <span class="token property">"keys"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"auth"</span><span class="token operator">:</span> <span class="token string">"qLAYRzG9TnUwbprns6H2Ew=="</span><span class="token punctuation">,</span>
    <span class="token property">"p256dh"</span><span class="token operator">:</span> <span class="token string">"BILXd-c1-zuEQYXH\\_tc3qmLq52cggfqqTr\\_ZclwqYl6A7-RX2J0NG3icsw..."</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Le <em>endpoint</em> dépend du navigateur utilisé et c'est lui même qui vous le fourni.
Par exemple pour Chrome, c'est un endpoint qui ressemble à ça : <em><a href="https://android.googleapis.com/gcm/send/APA91bHPffi" target="_blank">https://android.googleapis.com/gcm/send/APA91bHPffi</a>...</em></p>
<h3 id="l-api-notifications" class="anchor-title"><a href="#l-api-notifications">L'API Notifications</a></h3>
<p>Pour générer une notification Push, votre serveur devra utiliser l'objet Subscription et donc le endpoint fourni.
Pour voir en détail comment gérer cela, consultez cet article : <a href="https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/sending-messages" target="_blank">Sending Messages</a>.</p>
<p>La prise en compte d'une notification est réalisée par le Service Worker, en écoutant un évènement "push" :</p>
<pre class="code-multiline language-js"><code class="language-js" id="6cf5968a59a60c22929ba9566a1e7275">self<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'push'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token method function property-access">waitUntil</span><span class="token punctuation">(</span>
    <span class="token comment">// Display a notification</span>
    self<span class="token punctuation">.</span><span class="token property-access">registration</span><span class="token punctuation">.</span><span class="token method function property-access">showNotification</span><span class="token punctuation">(</span><span class="token string">'You got a notification!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Une notification ne requis qu'un titre, mais d'autres options sont possibles :</p>
<pre class="code-multiline language-js"><code class="language-js" id="270c26570f96ee51d821da63968a9f60">self<span class="token punctuation">.</span><span class="token property-access">registration</span><span class="token punctuation">.</span><span class="token method function property-access">showNotification</span><span class="token punctuation">(</span><span class="token string">'You got a notification!'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token string-property property">"body"</span><span class="token operator">:</span> <span class="token string">"Souhaitez-vous confirmer le rendez-vous du 20/11/2016 avec M. Martin ?"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"icon"</span><span class="token operator">:</span> <span class="token string">"/images/meeting.png"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"tag"</span><span class="token operator">:</span> <span class="token string">"meeting"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"actions"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token string-property property">"action"</span><span class="token operator">:</span> <span class="token string">"yes"</span><span class="token punctuation">,</span> <span class="token string-property property">"title"</span><span class="token operator">:</span> <span class="token string">"Yes"</span><span class="token punctuation">,</span> <span class="token string-property property">"icon"</span><span class="token operator">:</span> <span class="token string">"content/images/yes.png"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token string-property property">"action"</span><span class="token operator">:</span> <span class="token string">"no"</span><span class="token punctuation">,</span> <span class="token string-property property">"title"</span><span class="token operator">:</span> <span class="token string">"No"</span><span class="token punctuation">,</span> <span class="token string-property property">"icon"</span><span class="token operator">:</span> <span class="token string">"content/images/no.png"</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Comme vous pouvez le voir, outre le contenu et l'icone de la notification, il est possible :</p>
<ul>
<li>de taguer la notification (ici "meeting") afin de permettre de grouper les notifications de même tag,</li>
<li>de proposer différentes actions pour permettre à l'utilisateur d'interagir avec notre web app directement depuis la notification.</li>
</ul>
<p>Deux autres écouteurs sont disponibles pour réaliser des actions lorsque l'utilisateur ouvre ou ferme la notification :</p>
<pre class="code-multiline language-js"><code class="language-js" id="cbf5f8af7b4d6b772b49674f8dc33450">self<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'notificationclick'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something with the event</span>
  event<span class="token punctuation">.</span><span class="token property-access">notification</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'notificationclose'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something with the event</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Pour en savoir plus sur la gestion des notifications :</p>
<ul>
<li><a href="https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/sending-messages" target="_blank">Sending Messages</a></li>
<li><a href="https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/handling-messages" target="_blank">Handling Messages</a>.</li>
</ul>
<h2 id="demos" class="anchor-title"><a href="#demos">Démos</a></h2>
<ul>
<li><a href="https://www.pokedex.org/" target="_blank">Pokedex.org</a> est une web app que vous pouvez consulter en mode déconnecté.</li>
<li><a href="https://wiki-offline.jakearchibald.com/" target="_blank">Wikipedia offline demo</a> est une démo montrant les possibilités de concevoir les applications en "offline-first".</li>
<li><a href="https://www.flipkart.com/" target="_blank">Flipkart</a> est un site marchand qui fonctionne également en hors-ligne. Les contenus sont grisés lorsque le contenu n'est pas caché.
Un article à lire à ce sujet : <a href="https://medium.com/@AdityaPunjani/building-flipkart-lite-a-progressive-web-app-2c211e641883#.zfx2f64ws" target="_blank">Building Flipkart Lite: A Progressive Web App</a>.</li>
</ul>
<h2 id="outils" class="anchor-title"><a href="#outils">Outils</a></h2>
<p>Le panel "Application" de Developer Tools de Chrome est déjà assez riche en fonctionnalités pour débuguer toutes les facettes d'une Progressive Web App.</p>
<p>Il permet de consulter le Cache Storage :</p>
<p class="text-center">
    <img src="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-cachestorage.png/e0dd5ca55ff1654365bb2c2755a292c3.png" alt="Cache storage" style="max-width:80%" srcset="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-cachestorage.png/e0dd5ca55ff1654365bb2c2755a292c3.png 1x,
/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-cachestorage.png/b5f287d919cf120de766655e2697562b.png 2x," id="cache-storage">
</p>
<p>Vérifier le contenu du Web App Manifest et simuler l'ajout à l'écran d'accueil.
Sous Chrome desktop, l'ajout sera effectivement fait dans les onglets Applications.</p>
<p class="text-center">
    <img src="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-manifest.png/ad29daa11082353a8cda13aafd434c28.png" alt="service worker" style="max-width:80%" srcset="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-manifest.png/ad29daa11082353a8cda13aafd434c28.png 1x,
/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-manifest.png/39795567dcf08d579c6040e7888f6e4c.png 2x," id="service-worker">
</p>
<p>Consulter le Service Worker utilisé et avoir différentes options parmi lesquelles :</p>
<ul>
<li>simuler la déconnection avec "offline",</li>
<li>mettre à jour le Service Worker notamment en phase de développement avec "Update on reload",</li>
<li>contourner le service worker pour obliger le navigateur à récupérer une ressource depuis le réseau (au lieu du cache) avec "Bypass for network".</li>
</ul>
<p class="text-center">
    <img src="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-serviceworker.png/e77e38b6806dc991d0e729329571b8ab.png" alt="service worker" style="max-width:80%" srcset="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-serviceworker.png/e77e38b6806dc991d0e729329571b8ab.png 1x,
/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-serviceworker.png/844bc73f867330a0cb75abd8966e78d3.png 2x," id="service-worker">
</p>
<p>Enfin, une fonction "Clear storage" permet de tout réinitialiser :</p>
<p class="text-center">
    <img src="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-clearstorage.png/7bc5b4de9172541fc6a08dae2c9ab4ba.png" alt="service worker" style="max-width:80%" srcset="/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-clearstorage.png/7bc5b4de9172541fc6a08dae2c9ab4ba.png 1x,
/elao_/pr/662/%2E%2E/../resized/content/images/blog/2016/pwa/chrome-devtools-clearstorage.png/65049894a189bbc0a254dc89e70a99eb.png 2x," id="service-worker">
</p>
<p>Pour en savoir plus, voir cet article <a href="https://developers.google.com/web/tools/chrome-devtools/progressive-web-apps" target="_blank">Debug Progressive Web Apps</a>.</p>
<p>De plus, voici d'autres outils - tous propulsés par Google - pour faciliter le développement d'une Progressive Web App :</p>
<ul>
<li><a href="https://github.com/GoogleChrome/sw-precache/" target="_blank">Service Worker Precache</a> est un module node pour faciliter la gestion de la mise en cache des ressouces statiques (HTML, JavaScript, CSS, images, etc.) via un Service Worker. Un <a href="https://codelabs.developers.google.com/codelabs/sw-precache/index.html" target="_blank">codelab</a> est disponible.</li>
<li><a href="https://github.com/GoogleChrome/sw-toolbox" target="_blank">Service Worker Toolbox</a> est un ensemble d'outils permettant notamment de gérer le <em>routing</em> vers du contenu caché ou du contenu en ligne.</li>
<li><a href="https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk" target="_blank">Lighthouse</a> est une extension Chrome permettant d'analyser une page et nous aider à implémenter les bonnes pratiques d'une Progressive Web App.</li>
<li><a href="https://developers.google.com/web/progressive-web-apps/checklist" target="_blank">Progressive Web App Checklist</a></li>
</ul>
<h2 id="ils-en-sont-ou-safari-et-ios" class="anchor-title"><a href="#ils-en-sont-ou-safari-et-ios">Ils en sont où Safari et iOS ?</a></h2>
<p>L'arrivée des Progressive Web Apps met clairement en danger le modèle du store d'Apple. La firme à la pomme traine sans doute volontairement des pieds.</p>
<p>Une Progressive Web App fonctionne sous iOS, mais les utilisateurs ne profitent ni du Service Worker, ni donc de la mise en cache et des notifications Push. Ils voient un site web responsive "normal".</p>
<p>L'implémentation du Service Worker dans WebKit, le moteur de rendu de Safari, est "<a href="https://webkit.org/status/#specification-service-workers" target="_blank">under consideration</a>".</p>
<p>Inutile d'utiliser un navigateur Chrome sur votre iPhone ou votre iPad pour profiter des Progressive Web App, cela ne fonctionnera pas. En effet, Chrome sous iOS est en réalité du packaging Google autour d'un WebKit :)</p>
<p>Du côté de <a href="https://developer.microsoft.com/en-us/microsoft-edge/platform/status/serviceworker/" target="_blank">Microsoft Edge</a>, bonne nouvelle, le Service Worker est en cours d'implémentation.</p>
<p>En bref, en cette fin 2016, tout le potentiel des Progressives Web Apps n'est exploité que sous Android + Chrome, Firefox ou Opera (oui Opera, vous avez bien lu).</p>
<p>Ce n'est pas une raison d'attendre pour vous mettre aux Progressives Web Apps ;
ces technologies sont en cours de propagation ;
les utilisateurs Android sont majoritaires par rapport à tous les autres OS, autant les adresser maintenant et les autres en profiteront dès que ces technologies seront supportées.</p>
<p>Pour suivre l'avancement de l'implémentation de Service Worker, un site : <a href="https://jakearchibald.github.io/isserviceworkerready/" target="_blank">Is Service Worker Ready?</a></p>
<h2 id="et-apres" class="anchor-title"><a href="#et-apres">Et après ?</a></h2>
<p>Que peut-on ajouter à notre Progressive Web Apps pour améliorer encore plus l'expérience utilisateur ?</p>
<ul>
<li><a href="https://developers.google.com/web/updates/2016/04/credential-management-api" target="_blank">Credential Management API</a> pour faciliter l'authentification de l'utilisateur.</li>
<li><a href="https://developers.google.com/web/updates/2016/07/payment-request" target="_blank">Payment Request API</a> pour faciliter les paiements sur Internet.</li>
<li><a href="https://github.com/WICG/BackgroundSync/blob/master/explainer.md" target="_blank">BackgroundSync</a> pour permettre la synchronisation de données en tâche de fond dès lors que la connectivité est retrouvée.</li>
</ul>
<p>Devinez-quoi ? Ces technologies ne sont disponibles que dans les dernières versions de Chrome.
Cependant c'est très prometteur. A suivre donc de près !</p>
                                                                </main>
            <aside class="article-content__aside">
                            </aside>
        </div>

        <div class="article-footer" data-aos="fade-in">
                                                <div class="article-author">
                        <div class="article-author__image">
                            <a>
                                <img     src="/elao_/pr/662/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/48b4d8efbc2f597dab26fcb1ed88d540.jpg"
    srcset="
        /elao_/pr/662/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/48b4d8efbc2f597dab26fcb1ed88d540.jpg 1x,
        /elao_/pr/662/%2E%2E/../resized/content/images/members/avatars/rhanna.jpg/595ecfd31fcd439bed40e88acab04bb4.jpg 2x
    "
 />
                            </a>
                        </div>
                        <span class="article-author__info">
                            Écrit par
                            <a>
                                <strong>Richard Hanna</strong>
                            </a>
                        </span>

                        <div class="article-author__social">
                                                            <a
                                    href="https://twitter.com/richardhanna"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--x" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte Twitter de Richard Hanna</span>
                                </a>
                                                                                                                    <a
                                    href="https://github.com/supertanuki"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--github" aria-hidden="true"></i>
                                    <span class="screen-reader">Compte github de Richard Hanna</span>
                                </a>
                                                                                        <a href="http://www.elao.com"
                                    target="_blank"
                                    rel="noreferrer"
                                    class="social social--small"
                                >
                                    <i class="icon icon--website" aria-hidden="true"></i>
                                    <span class="screen-reader">Site personnel de Richard Hanna</span>
                                </a>
                                                    </div>
                    </div>
                                    </div>

                <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/bc/rigby/content/blog/dev/la-revanche-du-web-par-les-progressive-web-apps.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </div>
        </main>
                    
<footer class="footer">
    <div class="container">
        <section class="footer__links">
            <p class="h1">
                elao
                <span>développe</span>
                <span>du lien</span>
            </p>
            <div class="links">
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/662/nos-services/" >Services</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/662/demarche" >Démarche</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/662/etudes-de-cas" >Études de cas</a>
                            </li>
                                            </ul>
                                    <ul>
                                                    <li>
                                <a href="/elao_/pr/662/nos-valeurs" >Valeurs</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/662/equipe" >L&#039;équipe</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/662/blog" >Blog</a>
                            </li>
                                                    <li>
                                <a href="/elao_/pr/662/blog/rss.xml"  data-no-swup="data-no-swup">RSS</a>
                            </li>
                                            </ul>
                                <ul>
                    <li>
                        <a href="/elao_/pr/662/carriere">Page Carrière</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/662/glossaire/">Glossaire 🧐</a>
                    </li>
                    <li>
                        <a href="/elao_/pr/662/elaomojis">Elaomojis 🎉</a>
                    </li>
                </ul>
            </div>
            <div class="socials">
                <ul>
                    <li>
                        <a href="https://www.linkedin.com/company/elao/" target="_blank">
                            <i class="icon icon--linkedin"></i>
                            Linkedin
                        </a>
                    </li>
                    <li>
                        <a href="https://bsky.app/profile/elao.com" target="_blank">
                            <i class="icon icon--bluesky"></i>
                            Bluesky
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/elao" target="_blank">
                            <i class="icon icon--x"></i>
                            X
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/elao" target="_blank">
                            <i class="icon icon--github"></i>
                            Github
                        </a>
                    </li>
                </ul>
            </div>
            <div class="contacts">
                <ul>
                    <li>
                        <a href="/elao_/pr/662/contact">Contact</a>
                    </li>
                    <li>
                        <a href="tel:04 82 53 37 19">04 82 53 37 19</a>
                    </li>
                    <li>
                        <a href="mailto:contact@elao.com">contact@elao.com</a>
                    </li>
                    <li>34 rue Jean Broquin</li>
                    <li>69006 Lyon</li>
                </ul>
            </div>
        </section>

        <section class="footer__legals">
            <span>© 2005 - 2025 - ELAO - Tous droits réservés</span>
            <a href="/elao_/pr/662/legal">Mentions légales</a>
            <a href="/elao_/pr/662/confidentialite">Protection des données</a>
            <a id="see" href="#ssss">🐍</a>
        </section>
    </div>
</footer>

            </body>
</html>
